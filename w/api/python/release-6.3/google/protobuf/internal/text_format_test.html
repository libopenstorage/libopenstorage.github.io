<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.4" />
<title>google.protobuf.internal.text_format_test API documentation</title>
<meta name="description" content="Test for google.protobuf.text_format." />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>google.protobuf.internal.text_format_test</code></h1>
</header>
<section id="section-intro">
<p>Test for google.protobuf.text_format.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#! /usr/bin/env python
# -*- coding: utf-8 -*-
#
# Protocol Buffers - Google&#39;s data interchange format
# Copyright 2008 Google Inc.  All rights reserved.
# https://developers.google.com/protocol-buffers/
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are
# met:
#
#     * Redistributions of source code must retain the above copyright
# notice, this list of conditions and the following disclaimer.
#     * Redistributions in binary form must reproduce the above
# copyright notice, this list of conditions and the following disclaimer
# in the documentation and/or other materials provided with the
# distribution.
#     * Neither the name of Google Inc. nor the names of its
# contributors may be used to endorse or promote products derived from
# this software without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# &#34;AS IS&#34; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

&#34;&#34;&#34;Test for google.protobuf.text_format.&#34;&#34;&#34;

import io
import math
import re
import string
import textwrap

import six

# pylint: disable=g-import-not-at-top
try:
  import unittest2 as unittest  # PY26
except ImportError:
  import unittest

from google.protobuf import any_pb2
from google.protobuf import any_test_pb2
from google.protobuf import map_unittest_pb2
from google.protobuf import unittest_custom_options_pb2
from google.protobuf import unittest_mset_pb2
from google.protobuf import unittest_pb2
from google.protobuf import unittest_proto3_arena_pb2
from google.protobuf import descriptor_pb2
from google.protobuf.internal import any_test_pb2 as test_extend_any
from google.protobuf.internal import message_set_extensions_pb2
from google.protobuf.internal import test_util
from google.protobuf import descriptor_pool
from google.protobuf import text_format
from google.protobuf.internal import _parameterized
# pylint: enable=g-import-not-at-top


# Low-level nuts-n-bolts tests.
class SimpleTextFormatTests(unittest.TestCase):

  # The members of _QUOTES are formatted into a regexp template that
  # expects single characters.  Therefore it&#39;s an error (in addition to being
  # non-sensical in the first place) to try to specify a &#34;quote mark&#34; that is
  # more than one character.
  def testQuoteMarksAreSingleChars(self):
    for quote in text_format._QUOTES:
      self.assertEqual(1, len(quote))


# Base class with some common functionality.
class TextFormatBase(unittest.TestCase):

  def ReadGolden(self, golden_filename):
    with test_util.GoldenFile(golden_filename) as f:
      return (f.readlines() if str is bytes else  # PY3
              [golden_line.decode(&#39;utf-8&#39;) for golden_line in f])

  def CompareToGoldenFile(self, text, golden_filename):
    golden_lines = self.ReadGolden(golden_filename)
    self.assertMultiLineEqual(text, &#39;&#39;.join(golden_lines))

  def CompareToGoldenText(self, text, golden_text):
    self.assertEqual(text, golden_text)

  def RemoveRedundantZeros(self, text):
    # Some platforms print 1e+5 as 1e+005.  This is fine, but we need to remove
    # these zeros in order to match the golden file.
    text = text.replace(&#39;e+0&#39;,&#39;e+&#39;).replace(&#39;e+0&#39;,&#39;e+&#39;) \
               .replace(&#39;e-0&#39;,&#39;e-&#39;).replace(&#39;e-0&#39;,&#39;e-&#39;)
    # Floating point fields are printed with .0 suffix even if they are
    # actualy integer numbers.
    text = re.compile(r&#39;\.0$&#39;, re.MULTILINE).sub(&#39;&#39;, text)
    return text


@_parameterized.parameters(unittest_pb2, unittest_proto3_arena_pb2)
class TextFormatMessageToStringTests(TextFormatBase):

  def testPrintExotic(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;repeated_int64: -9223372036854775808\n&#39;
        &#39;repeated_uint64: 18446744073709551615\n&#39;
        &#39;repeated_double: 123.456\n&#39;
        &#39;repeated_double: 1.23e+22\n&#39;
        &#39;repeated_double: 1.23e-18\n&#39;
        &#39;repeated_string:&#39;
        &#39; &#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
        &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)

  def testPrintExoticUnicodeSubclass(self, message_module):

    class UnicodeSub(six.text_type):
      pass

    message = message_module.TestAllTypes()
    message.repeated_string.append(UnicodeSub(u&#39;\u00fc\ua71f&#39;))
    self.CompareToGoldenText(
        text_format.MessageToString(message),
        &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)

  def testPrintNestedMessageAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;repeated_nested_message { bb: 42 }&#39;)

  def testPrintRepeatedFieldsAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int32.append(1)
    message.repeated_int32.append(1)
    message.repeated_int32.append(3)
    message.repeated_string.append(&#39;Google&#39;)
    message.repeated_string.append(&#39;Zurich&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;repeated_int32: 1 repeated_int32: 1 repeated_int32: 3 &#39;
        &#39;repeated_string: &#34;Google&#34; repeated_string: &#34;Zurich&#34;&#39;)

  def VerifyPrintShortFormatRepeatedFields(self, message_module, as_one_line):
    message = message_module.TestAllTypes()
    message.repeated_int32.append(1)
    message.repeated_string.append(&#39;Google&#39;)
    message.repeated_string.append(&#39;Hello,World&#39;)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_FOO)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAR)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAZ)
    message.optional_nested_message.bb = 3
    for i in (21, 32):
      msg = message.repeated_nested_message.add()
      msg.bb = i
    expected_ascii = (
        &#39;optional_nested_message {\n  bb: 3\n}\n&#39;
        &#39;repeated_int32: [1]\n&#39;
        &#39;repeated_string: &#34;Google&#34;\n&#39;
        &#39;repeated_string: &#34;Hello,World&#34;\n&#39;
        &#39;repeated_nested_message {\n  bb: 21\n}\n&#39;
        &#39;repeated_nested_message {\n  bb: 32\n}\n&#39;
        &#39;repeated_foreign_enum: [FOREIGN_FOO, FOREIGN_BAR, FOREIGN_BAZ]\n&#39;)
    if as_one_line:
      expected_ascii = expected_ascii.replace(&#39;\n&#39;, &#39; &#39;)
      expected_ascii = re.sub(r&#39;\s+&#39;, &#39; &#39;, expected_ascii)
      expected_ascii = re.sub(r&#39;\s$&#39;, &#39;&#39;, expected_ascii)

    actual_ascii = text_format.MessageToString(
        message, use_short_repeated_primitives=True,
        as_one_line=as_one_line)
    self.CompareToGoldenText(actual_ascii, expected_ascii)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(actual_ascii, parsed_message)
    self.assertEqual(parsed_message, message)

  def testPrintShortFormatRepeatedFields(self, message_module):
    self.VerifyPrintShortFormatRepeatedFields(message_module, False)
    self.VerifyPrintShortFormatRepeatedFields(message_module, True)

  def testPrintNestedNewLineInStringAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.optional_string = &#39;a\nnew\nline&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;optional_string: &#34;a\\nnew\\nline&#34;&#39;)

  def testPrintExoticAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, as_one_line=True)),
        &#39;repeated_int64: -9223372036854775808&#39;
        &#39; repeated_uint64: 18446744073709551615&#39;
        &#39; repeated_double: 123.456&#39;
        &#39; repeated_double: 1.23e+22&#39;
        &#39; repeated_double: 1.23e-18&#39;
        &#39; repeated_string: &#39;
        &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;&#39;
        &#39; repeated_string: &#34;\\303\\274\\352\\234\\237&#34;&#39;)

  def testRoundTripExoticAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)

    # Test as_utf8 = False.
    wire_text = text_format.MessageToString(message,
                                            as_one_line=True,
                                            as_utf8=False)
    parsed_message = message_module.TestAllTypes()
    r = text_format.Parse(wire_text, parsed_message)
    self.assertIs(r, parsed_message)
    self.assertEqual(message, parsed_message)

    # Test as_utf8 = True.
    wire_text = text_format.MessageToString(message,
                                            as_one_line=True,
                                            as_utf8=True)
    parsed_message = message_module.TestAllTypes()
    r = text_format.Parse(wire_text, parsed_message)
    self.assertIs(r, parsed_message)
    self.assertEqual(message, parsed_message,
                     &#39;\n%s != %s&#39; % (message, parsed_message))

  def testPrintRawUtf8String(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    text = text_format.MessageToString(message, as_utf8=True)
    golden_unicode = u&#39;repeated_string: &#34;\u00fc\\t\ua71f&#34;\n&#39;
    golden_text = golden_unicode if six.PY3 else golden_unicode.encode(&#39;utf-8&#39;)
    # MessageToString always returns a native str.
    self.CompareToGoldenText(text, golden_text)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))

  def testPrintFloatFormat(self, message_module):
    # Check that float_format argument is passed to sub-message formatting.
    message = message_module.NestedTestAllTypes()
    message.payload.optional_float = 1.25
    # Check rounding at 15 significant digits
    message.payload.optional_double = -.000003456789012345678
    # Check no decimal point.
    message.payload.repeated_float.append(-5642)
    # Check no trailing zeros.
    message.payload.repeated_double.append(.000078900)
    formatted_fields = [&#39;optional_float: 1.25&#39;,
                        &#39;optional_double: -3.45678901234568e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))
    # as_one_line=True is a separate code branch where float_format is passed.
    text_message = text_format.MessageToString(message,
                                               as_one_line=True,
                                               float_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{ {0} {1} {2} {3} }}&#39;.format(*formatted_fields))

    # 32-bit 1.2 is noisy when extended to 64-bit:
    #  &gt;&gt;&gt; struct.unpack(&#39;f&#39;, struct.pack(&#39;f&#39;, 1.2))[0]
    #  1.2000000476837158
    # TODO(jieluo): change to 1.2 with cl/241634942.
    message.payload.optional_float = 1.2000000476837158
    formatted_fields = [&#39;optional_float: 1.2&#39;,
                        &#39;optional_double: -3.45678901234568e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;,
                                               double_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

    # Test only set float_format affect both float and double fields.
    formatted_fields = [&#39;optional_float: 1.2&#39;,
                        &#39;optional_double: -3.456789e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

    # Test default float_format has 8 valid digits.
    message.payload.optional_float = 1.2345678912
    message.payload.optional_double = 1.2345678912
    formatted_fields = [&#39;optional_float: 1.2345679&#39;,
                        &#39;optional_double: 1.2345678912&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

  def testMessageToString(self, message_module):
    message = message_module.ForeignMessage()
    message.c = 123
    self.assertEqual(&#39;c: 123\n&#39;, str(message))

  def testMessageToStringUnicode(self, message_module):
    golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
    golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
    message = message_module.TestAllTypes()
    message.optional_string = golden_unicode
    message.optional_bytes = golden_bytes
    text = text_format.MessageToString(message, as_utf8=True)
    golden_message = textwrap.dedent(
        &#39;optional_string: &#34;Á short desçription and a 🍌.&#34;\n&#39;
        &#39;optional_bytes: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;)
    self.CompareToGoldenText(text, golden_message)

  def testMessageToStringASCII(self, message_module):
    golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
    golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
    message = message_module.TestAllTypes()
    message.optional_string = golden_unicode
    message.optional_bytes = golden_bytes
    text = text_format.MessageToString(message, as_utf8=False)  # ASCII
    golden_message = (
        &#39;optional_string: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;
        &#39;optional_bytes: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;)
    self.CompareToGoldenText(text, golden_message)

  def testPrintField(self, message_module):
    message = message_module.TestAllTypes()
    field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
    value = message.optional_float
    out = text_format.TextWriter(False)
    text_format.PrintField(field, value, out)
    self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
    out.close()
    # Test Printer
    out = text_format.TextWriter(False)
    printer = text_format._Printer(out)
    printer.PrintField(field, value)
    self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
    out.close()

  def testPrintFieldValue(self, message_module):
    message = message_module.TestAllTypes()
    field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
    value = message.optional_float
    out = text_format.TextWriter(False)
    text_format.PrintFieldValue(field, value, out)
    self.assertEqual(&#39;0.0&#39;, out.getvalue())
    out.close()
    # Test Printer
    out = text_format.TextWriter(False)
    printer = text_format._Printer(out)
    printer.PrintFieldValue(field, value)
    self.assertEqual(&#39;0.0&#39;, out.getvalue())
    out.close()

  def testCustomOptions(self, message_module):
    message_descriptor = (unittest_custom_options_pb2.
                          TestMessageWithCustomOptions.DESCRIPTOR)
    message_proto = descriptor_pb2.DescriptorProto()
    message_descriptor.CopyToProto(message_proto)
    expected_text = (
        &#39;name: &#34;TestMessageWithCustomOptions&#34;\n&#39;
        &#39;field {\n&#39;
        &#39;  name: &#34;field1&#34;\n&#39;
        &#39;  number: 1\n&#39;
        &#39;  label: LABEL_OPTIONAL\n&#39;
        &#39;  type: TYPE_STRING\n&#39;
        &#39;  options {\n&#39;
        &#39;    ctype: CORD\n&#39;
        &#39;    [protobuf_unittest.field_opt1]: 8765432109\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;field {\n&#39;
        &#39;  name: &#34;oneof_field&#34;\n&#39;
        &#39;  number: 2\n&#39;
        &#39;  label: LABEL_OPTIONAL\n&#39;
        &#39;  type: TYPE_INT32\n&#39;
        &#39;  oneof_index: 0\n&#39;
        &#39;}\n&#39;
        &#39;enum_type {\n&#39;
        &#39;  name: &#34;AnEnum&#34;\n&#39;
        &#39;  value {\n&#39;
        &#39;    name: &#34;ANENUM_VAL1&#34;\n&#39;
        &#39;    number: 1\n&#39;
        &#39;  }\n&#39;
        &#39;  value {\n&#39;
        &#39;    name: &#34;ANENUM_VAL2&#34;\n&#39;
        &#39;    number: 2\n&#39;
        &#39;    options {\n&#39;
        &#39;      [protobuf_unittest.enum_value_opt1]: 123\n&#39;
        &#39;    }\n&#39;
        &#39;  }\n&#39;
        &#39;  options {\n&#39;
        &#39;    [protobuf_unittest.enum_opt1]: -789\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;options {\n&#39;
        &#39;  message_set_wire_format: false\n&#39;
        &#39;  [protobuf_unittest.message_opt1]: -56\n&#39;
        &#39;}\n&#39;
        &#39;oneof_decl {\n&#39;
        &#39;  name: &#34;AnOneof&#34;\n&#39;
        &#39;  options {\n&#39;
        &#39;    [protobuf_unittest.oneof_opt1]: -99\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)
    self.assertEqual(expected_text,
                     text_format.MessageToString(message_proto))
    parsed_proto = descriptor_pb2.DescriptorProto()
    text_format.Parse(expected_text, parsed_proto)
    self.assertEqual(message_proto, parsed_proto)

  def testPrintUnknownFieldsEmbeddedMessageInBytes(self, message_module):
    inner_msg = message_module.TestAllTypes()
    inner_msg.optional_int32 = 101
    inner_msg.optional_double = 102.0
    inner_msg.optional_string = u&#39;hello&#39;
    inner_msg.optional_bytes = b&#39;103&#39;
    inner_msg.optional_nested_message.bb = 105
    inner_data = inner_msg.SerializeToString()
    outer_message = message_module.TestAllTypes()
    outer_message.optional_int32 = 101
    outer_message.optional_bytes = inner_data
    all_data = outer_message.SerializeToString()
    empty_message = message_module.TestEmptyMessage()
    empty_message.ParseFromString(all_data)

    self.assertEqual(&#39;  1: 101\n&#39;
                     &#39;  15 {\n&#39;
                     &#39;    1: 101\n&#39;
                     &#39;    12: 4636878028842991616\n&#39;
                     &#39;    14: &#34;hello&#34;\n&#39;
                     &#39;    15: &#34;103&#34;\n&#39;
                     &#39;    18 {\n&#39;
                     &#39;      1: 105\n&#39;
                     &#39;    }\n&#39;
                     &#39;  }\n&#39;,
                     text_format.MessageToString(empty_message,
                                                 indent=2,
                                                 print_unknown_fields=True))
    self.assertEqual(&#39;1: 101 &#39;
                     &#39;15 { &#39;
                     &#39;1: 101 &#39;
                     &#39;12: 4636878028842991616 &#39;
                     &#39;14: &#34;hello&#34; &#39;
                     &#39;15: &#34;103&#34; &#39;
                     &#39;18 { 1: 105 } &#39;
                     &#39;}&#39;,
                     text_format.MessageToString(empty_message,
                                                 print_unknown_fields=True,
                                                 as_one_line=True))


@_parameterized.parameters(unittest_pb2, unittest_proto3_arena_pb2)
class TextFormatMessageToTextBytesTests(TextFormatBase):

  def testMessageToBytes(self, message_module):
    message = message_module.ForeignMessage()
    message.c = 123
    self.assertEqual(b&#39;c: 123\n&#39;, text_format.MessageToBytes(message))

  def testRawUtf8RoundTrip(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    utf8_text = text_format.MessageToBytes(message, as_utf8=True)
    golden_bytes = b&#39;repeated_string: &#34;\xc3\xbc\\t\xea\x9c\x9f&#34;\n&#39;
    self.CompareToGoldenText(utf8_text, golden_bytes)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(utf8_text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))

  def testEscapedUtf8ASCIIRoundTrip(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    ascii_text = text_format.MessageToBytes(message)  # as_utf8=False default
    golden_bytes = b&#39;repeated_string: &#34;\\303\\274\\t\\352\\234\\237&#34;\n&#39;
    self.CompareToGoldenText(ascii_text, golden_bytes)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))


@_parameterized.parameters(unittest_pb2, unittest_proto3_arena_pb2)
class TextFormatParserTests(TextFormatBase):

  def testParseAllFields(self, message_module):
    message = message_module.TestAllTypes()
    test_util.SetAllFields(message)
    ascii_text = text_format.MessageToString(message)

    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

  def testParseAndMergeUtf8(self, message_module):
    message = message_module.TestAllTypes()
    test_util.SetAllFields(message)
    ascii_text = text_format.MessageToString(message)
    ascii_text = ascii_text.encode(&#39;utf-8&#39;)

    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

    parsed_message.Clear()
    text_format.Merge(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

    msg2 = message_module.TestAllTypes()
    text = (u&#39;optional_string: &#34;café&#34;&#39;)
    text_format.Merge(text, msg2)
    self.assertEqual(msg2.optional_string, u&#39;café&#39;)
    msg2.Clear()
    self.assertEqual(msg2.optional_string, u&#39;&#39;)
    text_format.Parse(text, msg2)
    self.assertEqual(msg2.optional_string, u&#39;café&#39;)

  def testParseDoubleToFloat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_float: 3.4028235e+39\n&#39;
            &#39;repeated_float: 1.4028235e-39\n&#39;)
    text_format.Parse(text, message)
    self.assertEqual(message.repeated_float[0], float(&#39;inf&#39;))
    self.assertAlmostEqual(message.repeated_float[1], 1.4028235e-39)

  def testParseExotic(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: -9223372036854775808\n&#39;
            &#39;repeated_uint64: 18446744073709551615\n&#39;
            &#39;repeated_double: 123.456\n&#39;
            &#39;repeated_double: 1.23e+22\n&#39;
            &#39;repeated_double: 1.23e-18\n&#39;
            &#39;repeated_string: \n&#39;
            &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
            &#39;repeated_string: &#34;foo&#34; \&#39;corge\&#39; &#34;grault&#34;\n&#39;
            &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;
            &#39;repeated_string: &#34;\\xc3\\xbc&#34;\n&#39;
            &#39;repeated_string: &#34;\xc3\xbc&#34;\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(-9223372036854775808, message.repeated_int64[0])
    self.assertEqual(18446744073709551615, message.repeated_uint64[0])
    self.assertEqual(123.456, message.repeated_double[0])
    self.assertEqual(1.23e22, message.repeated_double[1])
    self.assertEqual(1.23e-18, message.repeated_double[2])
    self.assertEqual(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;, message.repeated_string[0])
    self.assertEqual(&#39;foocorgegrault&#39;, message.repeated_string[1])
    self.assertEqual(u&#39;\u00fc\ua71f&#39;, message.repeated_string[2])
    self.assertEqual(u&#39;\u00fc&#39;, message.repeated_string[3])

  def testParseTrailingCommas(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: 100;\n&#39;
            &#39;repeated_int64: 200;\n&#39;
            &#39;repeated_int64: 300,\n&#39;
            &#39;repeated_string: &#34;one&#34;,\n&#39;
            &#39;repeated_string: &#34;two&#34;;\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_int64[0])
    self.assertEqual(200, message.repeated_int64[1])
    self.assertEqual(300, message.repeated_int64[2])
    self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
    self.assertEqual(u&#39;two&#39;, message.repeated_string[1])

  def testParseRepeatedScalarShortFormat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: [100, 200];\n&#39;
            &#39;repeated_int64: []\n&#39;
            &#39;repeated_int64: 300,\n&#39;
            &#39;repeated_string: [&#34;one&#34;, &#34;two&#34;];\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_int64[0])
    self.assertEqual(200, message.repeated_int64[1])
    self.assertEqual(300, message.repeated_int64[2])
    self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
    self.assertEqual(u&#39;two&#39;, message.repeated_string[1])

  def testParseRepeatedMessageShortFormat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_nested_message: [{bb: 100}, {bb: 200}],\n&#39;
            &#39;repeated_nested_message: {bb: 300}\n&#39;
            &#39;repeated_nested_message [{bb: 400}];\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_nested_message[0].bb)
    self.assertEqual(200, message.repeated_nested_message[1].bb)
    self.assertEqual(300, message.repeated_nested_message[2].bb)
    self.assertEqual(400, message.repeated_nested_message[3].bb)

  def testParseEmptyText(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;&#39;
    text_format.Parse(text, message)
    self.assertEqual(message_module.TestAllTypes(), message)

  def testParseInvalidUtf8(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;repeated_string: &#34;\\xc3\\xc3&#34;&#39;
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Parse(text, message)
    self.assertEqual(e.exception.GetLine(), 1)
    self.assertEqual(e.exception.GetColumn(), 28)

  def testParseSingleWord(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;foo&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;foo&#34;.&#39;), text_format.Parse, text, message)

  def testParseUnknownField(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;unknown_field: 8\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;unknown_field&#34;.&#39;), text_format.Parse, text, message)
    text = (&#39;optional_int32: 123\n&#39;
            &#39;unknown_field: 8\n&#39;
            &#39;optional_nested_message { bb: 45 }&#39;)
    text_format.Parse(text, message, allow_unknown_field=True)
    self.assertEqual(message.optional_nested_message.bb, 45)
    self.assertEqual(message.optional_int32, 123)

  def testParseBadEnumValue(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;optional_nested_enum: BARR&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;1:23 : \&#39;optional_nested_enum: BARR\&#39;: &#39;
                           r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                           r&#39;has no value named BARR.&#39;), text_format.Parse,
                          text, message)

  def testParseBadIntValue(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;optional_int32: bork&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (&#39;1:17 : \&#39;optional_int32: bork\&#39;: &#39;
                           &#39;Couldn\&#39;t parse integer: bork&#39;),
                          text_format.Parse, text, message)

  def testParseStringFieldUnescape(self, message_module):
    message = message_module.TestAllTypes()
    text = r&#39;&#39;&#39;repeated_string: &#34;\xf\x62&#34;
               repeated_string: &#34;\\xf\\x62&#34;
               repeated_string: &#34;\\\xf\\\x62&#34;
               repeated_string: &#34;\\\\xf\\\\x62&#34;
               repeated_string: &#34;\\\\\xf\\\\\x62&#34;
               repeated_string: &#34;\x5cx20&#34;&#39;&#39;&#39;

    text_format.Parse(text, message)

    SLASH = &#39;\\&#39;
    self.assertEqual(&#39;\x0fb&#39;, message.repeated_string[0])
    self.assertEqual(SLASH + &#39;xf&#39; + SLASH + &#39;x62&#39;, message.repeated_string[1])
    self.assertEqual(SLASH + &#39;\x0f&#39; + SLASH + &#39;b&#39;, message.repeated_string[2])
    self.assertEqual(SLASH + SLASH + &#39;xf&#39; + SLASH + SLASH + &#39;x62&#39;,
                     message.repeated_string[3])
    self.assertEqual(SLASH + SLASH + &#39;\x0f&#39; + SLASH + SLASH + &#39;b&#39;,
                     message.repeated_string[4])
    self.assertEqual(SLASH + &#39;x20&#39;, message.repeated_string[5])

  def testParseOneof(self, message_module):
    m = message_module.TestAllTypes()
    m.oneof_uint32 = 11
    m2 = message_module.TestAllTypes()
    text_format.Parse(text_format.MessageToString(m), m2)
    self.assertEqual(&#39;oneof_uint32&#39;, m2.WhichOneof(&#39;oneof_field&#39;))

  def testParseMultipleOneof(self, message_module):
    m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
    m2 = message_module.TestAllTypes()
    with six.assertRaisesRegex(self, text_format.ParseError,
                               &#39; is specified along with field &#39;):
      text_format.Parse(m_string, m2)

  # This example contains non-ASCII codepoint unicode data as literals
  # which should come through as utf-8 for bytes, and as the unicode
  # itself for string fields.  It also demonstrates escaped binary data.
  # The ur&#34;&#34; string prefix is unfortunately missing from Python 3
  # so we resort to double escaping our \s so that they come through.
  _UNICODE_SAMPLE = u&#34;&#34;&#34;
      optional_bytes: &#39;Á short desçription&#39;
      optional_string: &#39;Á short desçription&#39;
      repeated_bytes: &#39;\\303\\201 short des\\303\\247ription&#39;
      repeated_bytes: &#39;\\x12\\x34\\x56\\x78\\x90\\xab\\xcd\\xef&#39;
      repeated_string: &#39;\\xd0\\x9f\\xd1\\x80\\xd0\\xb8\\xd0\\xb2\\xd0\\xb5\\xd1\\x82&#39;
      &#34;&#34;&#34;
  _BYTES_SAMPLE = _UNICODE_SAMPLE.encode(&#39;utf-8&#39;)
  _GOLDEN_UNICODE = u&#39;Á short desçription&#39;
  _GOLDEN_BYTES = _GOLDEN_UNICODE.encode(&#39;utf-8&#39;)
  _GOLDEN_BYTES_1 = b&#39;\x12\x34\x56\x78\x90\xab\xcd\xef&#39;
  _GOLDEN_STR_0 = u&#39;Привет&#39;

  def testParseUnicode(self, message_module):
    m = message_module.TestAllTypes()
    text_format.Parse(self._UNICODE_SAMPLE, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
    # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
    self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
    # repeated_string[0] contained \ escaped data representing the UTF-8
    # representation of _GOLDEN_STR_0 - it needs to decode as such.
    self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)

  def testParseBytes(self, message_module):
    m = message_module.TestAllTypes()
    text_format.Parse(self._BYTES_SAMPLE, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
    # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
    self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
    # repeated_string[0] contained \ escaped data representing the UTF-8
    # representation of _GOLDEN_STR_0 - it needs to decode as such.
    self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)

  def testFromBytesFile(self, message_module):
    m = message_module.TestAllTypes()
    f = io.BytesIO(self._BYTES_SAMPLE)
    text_format.ParseLines(f, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromUnicodeFile(self, message_module):
    m = message_module.TestAllTypes()
    f = io.StringIO(self._UNICODE_SAMPLE)
    text_format.ParseLines(f, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromBytesLines(self, message_module):
    m = message_module.TestAllTypes()
    text_format.ParseLines(self._BYTES_SAMPLE.split(b&#39;\n&#39;), m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromUnicodeLines(self, message_module):
    m = message_module.TestAllTypes()
    text_format.ParseLines(self._UNICODE_SAMPLE.split(u&#39;\n&#39;), m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testParseDuplicateMessages(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_nested_message { bb: 1 } &#39;
            &#39;optional_nested_message { bb: 2 }&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:59 : Message type &#34;\w+.TestAllTypes&#34; &#39;
        r&#39;should not have multiple &#34;optional_nested_message&#34; fields.&#39;),
                          text_format.Parse, text,
                          message)

  def testParseDuplicateScalars(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:36 : Message type &#34;\w+.TestAllTypes&#34; should not &#39;
        r&#39;have multiple &#34;optional_int32&#34; fields.&#39;), text_format.Parse, text,
                          message)

  def testParseExistingScalarInMessage(self, message_module):
    message = message_module.TestAllTypes(optional_int32=42)
    text = &#39;optional_int32: 67&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;Message type &#34;\w+.TestAllTypes&#34; should not &#39;
                           r&#39;have multiple &#34;optional_int32&#34; fields.&#39;),
                          text_format.Parse, text, message)


@_parameterized.parameters(unittest_pb2, unittest_proto3_arena_pb2)
class TextFormatMergeTests(TextFormatBase):

  def testMergeDuplicateScalarsInText(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(67, message.optional_int32)

  def testMergeDuplicateNestedMessageScalars(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_nested_message { bb: 1 } &#39;
            &#39;optional_nested_message { bb: 2 }&#39;)
    r = text_format.Merge(text, message)
    self.assertTrue(r is message)
    self.assertEqual(2, message.optional_nested_message.bb)

  def testReplaceScalarInMessage(self, message_module):
    message = message_module.TestAllTypes(optional_int32=42)
    text = &#39;optional_int32: 67&#39;
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(67, message.optional_int32)

  def testReplaceMessageInMessage(self, message_module):
    message = message_module.TestAllTypes(
        optional_int32=42, optional_nested_message=dict())
    self.assertTrue(message.HasField(&#39;optional_nested_message&#39;))
    text = &#39;optional_nested_message{ bb: 3 }&#39;
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(3, message.optional_nested_message.bb)

  def testMergeMultipleOneof(self, message_module):
    m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
    m2 = message_module.TestAllTypes()
    text_format.Merge(m_string, m2)
    self.assertEqual(&#39;oneof_string&#39;, m2.WhichOneof(&#39;oneof_field&#39;))


# These are tests that aren&#39;t fundamentally specific to proto2, but are at
# the moment because of differences between the proto2 and proto3 test schemas.
# Ideally the schemas would be made more similar so these tests could pass.
class OnlyWorksWithProto2RightNowTests(TextFormatBase):

  def testPrintAllFieldsPointy(self):
    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, pointy_brackets=True)),
        &#39;text_format_unittest_data_pointy_oneof.txt&#39;)

  def testParseGolden(self):
    golden_text = &#39;\n&#39;.join(self.ReadGolden(
        &#39;text_format_unittest_data_oneof_implemented.txt&#39;))
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.Parse(golden_text, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testPrintAllFields(self):
    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;text_format_unittest_data_oneof_implemented.txt&#39;)

  def testPrintUnknownFields(self):
    message = unittest_pb2.TestAllTypes()
    message.optional_int32 = 101
    message.optional_double = 102.0
    message.optional_string = u&#39;hello&#39;
    message.optional_bytes = b&#39;103&#39;
    message.optionalgroup.a = 104
    message.optional_nested_message.bb = 105
    all_data = message.SerializeToString()
    empty_message = unittest_pb2.TestEmptyMessage()
    empty_message.ParseFromString(all_data)
    self.assertEqual(&#39;  1: 101\n&#39;
                     &#39;  12: 4636878028842991616\n&#39;
                     &#39;  14: &#34;hello&#34;\n&#39;
                     &#39;  15: &#34;103&#34;\n&#39;
                     &#39;  16 {\n&#39;
                     &#39;    17: 104\n&#39;
                     &#39;  }\n&#39;
                     &#39;  18 {\n&#39;
                     &#39;    1: 105\n&#39;
                     &#39;  }\n&#39;,
                     text_format.MessageToString(empty_message,
                                                 indent=2,
                                                 print_unknown_fields=True))
    self.assertEqual(&#39;1: 101 &#39;
                     &#39;12: 4636878028842991616 &#39;
                     &#39;14: &#34;hello&#34; &#39;
                     &#39;15: &#34;103&#34; &#39;
                     &#39;16 { 17: 104 } &#39;
                     &#39;18 { 1: 105 }&#39;,
                     text_format.MessageToString(empty_message,
                                                 print_unknown_fields=True,
                                                 as_one_line=True))

  def testPrintInIndexOrder(self):
    message = unittest_pb2.TestFieldOrderings()
    # Fields are listed in index order instead of field number.
    message.my_string = &#39;str&#39;
    message.my_int = 101
    message.my_float = 111
    message.optional_nested_message.oo = 0
    message.optional_nested_message.bb = 1
    message.Extensions[unittest_pb2.my_extension_string] = &#39;ext_str0&#39;
    # Extensions are listed based on the order of extension number.
    # Extension number 12.
    message.Extensions[unittest_pb2.TestExtensionOrderings2.
                       test_ext_orderings2].my_string = &#39;ext_str2&#39;
    # Extension number 13.
    message.Extensions[unittest_pb2.TestExtensionOrderings1.
                       test_ext_orderings1].my_string = &#39;ext_str1&#39;
    # Extension number 14.
    message.Extensions[
        unittest_pb2.TestExtensionOrderings2.TestExtensionOrderings3.
        test_ext_orderings3].my_string = &#39;ext_str3&#39;

    # Print in index order.
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(
            text_format.MessageToString(message, use_index_order=True)),
        &#39;my_string: &#34;str&#34;\n&#39;
        &#39;my_int: 101\n&#39;
        &#39;my_float: 111\n&#39;
        &#39;optional_nested_message {\n&#39;
        &#39;  oo: 0\n&#39;
        &#39;  bb: 1\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
        &#39;  my_string: &#34;ext_str2&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
        &#39;  my_string: &#34;ext_str1&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
        &#39;.test_ext_orderings3] {\n&#39;
        &#39;  my_string: &#34;ext_str3&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;)
    # By default, print in field number order.
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;my_int: 101\n&#39;
        &#39;my_string: &#34;str&#34;\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
        &#39;  my_string: &#34;ext_str2&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
        &#39;  my_string: &#34;ext_str1&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
        &#39;.test_ext_orderings3] {\n&#39;
        &#39;  my_string: &#34;ext_str3&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;
        &#39;my_float: 111\n&#39;
        &#39;optional_nested_message {\n&#39;
        &#39;  bb: 1\n&#39;
        &#39;  oo: 0\n&#39;
        &#39;}\n&#39;)

  def testMergeLinesGolden(self):
    opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.MergeLines(opened, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testParseLinesGolden(self):
    opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.ParseLines(opened, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testPrintMap(self):
    message = map_unittest_pb2.TestMap()

    message.map_int32_int32[-123] = -456
    message.map_int64_int64[-2**33] = -2**34
    message.map_uint32_uint32[123] = 456
    message.map_uint64_uint64[2**33] = 2**34
    message.map_string_string[&#39;abc&#39;] = &#39;123&#39;
    message.map_int32_foreign_message[111].c = 5

    # Maps are serialized to text format using their underlying repeated
    # representation.
    self.CompareToGoldenText(
        text_format.MessageToString(message), &#39;map_int32_int32 {\n&#39;
        &#39;  key: -123\n&#39;
        &#39;  value: -456\n&#39;
        &#39;}\n&#39;
        &#39;map_int64_int64 {\n&#39;
        &#39;  key: -8589934592\n&#39;
        &#39;  value: -17179869184\n&#39;
        &#39;}\n&#39;
        &#39;map_uint32_uint32 {\n&#39;
        &#39;  key: 123\n&#39;
        &#39;  value: 456\n&#39;
        &#39;}\n&#39;
        &#39;map_uint64_uint64 {\n&#39;
        &#39;  key: 8589934592\n&#39;
        &#39;  value: 17179869184\n&#39;
        &#39;}\n&#39;
        &#39;map_string_string {\n&#39;
        &#39;  key: &#34;abc&#34;\n&#39;
        &#39;  value: &#34;123&#34;\n&#39;
        &#39;}\n&#39;
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 5\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  # In cpp implementation, __str__ calls the cpp implementation of text format.
  def testPrintMapUsingCppImplementation(self):
    message = map_unittest_pb2.TestMap()
    inner_msg = message.map_int32_foreign_message[111]
    inner_msg.c = 1
    self.assertEqual(
        str(message),
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 1\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)
    inner_msg.c = 2
    self.assertEqual(
        str(message),
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 2\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testMapOrderEnforcement(self):
    message = map_unittest_pb2.TestMap()
    for letter in string.ascii_uppercase[13:26]:
      message.map_string_string[letter] = &#39;dummy&#39;
    for letter in reversed(string.ascii_uppercase[0:13]):
      message.map_string_string[letter] = &#39;dummy&#39;
    golden = &#39;&#39;.join((&#39;map_string_string {\n  key: &#34;%c&#34;\n  value: &#34;dummy&#34;\n}\n&#39;
                      % (letter,) for letter in string.ascii_uppercase))
    self.CompareToGoldenText(text_format.MessageToString(message), golden)

  # TODO(teboring): In c/137553523, not serializing default value for map entry
  # message has been fixed. This test needs to be disabled in order to submit
  # that cl. Add this back when c/137553523 has been submitted.
  # def testMapOrderSemantics(self):
  #   golden_lines = self.ReadGolden(&#39;map_test_data.txt&#39;)

  #   message = map_unittest_pb2.TestMap()
  #   text_format.ParseLines(golden_lines, message)
  #   candidate = text_format.MessageToString(message)
  #   # The Python implementation emits &#34;1.0&#34; for the double value that the C++
  #   # implementation emits as &#34;1&#34;.
  #   candidate = candidate.replace(&#39;1.0&#39;, &#39;1&#39;, 2)
  #   candidate = candidate.replace(&#39;0.0&#39;, &#39;0&#39;, 2)
  #   self.assertMultiLineEqual(candidate, &#39;&#39;.join(golden_lines))


# Tests of proto2-only features (MessageSet, extensions, etc.).
class Proto2Tests(TextFormatBase):

  def testPrintMessageSet(self):
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message), &#39;message_set {\n&#39;
        &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
        &#39;    i: 23\n&#39;
        &#39;  }\n&#39;
        &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
        &#39;    str: \&#34;foo\&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

    message = message_set_extensions_pb2.TestMessageSet()
    ext = message_set_extensions_pb2.message_set_extension3
    message.Extensions[ext].text = &#39;bar&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message),
        &#39;[google.protobuf.internal.TestMessageSetExtension3] {\n&#39;
        &#39;  text: \&#34;bar\&#34;\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageSetByFieldNumber(self):
    out = text_format.TextWriter(False)
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    text_format.PrintMessage(message, out, use_field_number=True)
    self.CompareToGoldenText(out.getvalue(), &#39;1 {\n&#39;
                             &#39;  1545008 {\n&#39;
                             &#39;    15: 23\n&#39;
                             &#39;  }\n&#39;
                             &#39;  1547769 {\n&#39;
                             &#39;    25: \&#34;foo\&#34;\n&#39;
                             &#39;  }\n&#39;
                             &#39;}\n&#39;)
    out.close()

  def testPrintMessageSetAsOneLine(self):
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;message_set {&#39;
        &#39; [protobuf_unittest.TestMessageSetExtension1] {&#39;
        &#39; i: 23&#39;
        &#39; }&#39;
        &#39; [protobuf_unittest.TestMessageSetExtension2] {&#39;
        &#39; str: \&#34;foo\&#34;&#39;
        &#39; }&#39;
        &#39; }&#39;)

  def testParseMessageSet(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;repeated_uint64: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
    text_format.Parse(text, message)
    self.assertEqual(1, message.repeated_uint64[0])
    self.assertEqual(2, message.repeated_uint64[1])

    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
            &#39;    str: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

  def testExtensionInsideAnyMessage(self):
    message = test_extend_any.TestAny()
    text = (&#39;value {\n&#39;
            &#39;  [type.googleapis.com/google.protobuf.internal.TestAny] {\n&#39;
            &#39;    [google.protobuf.internal.TestAnyExtension1.extension1] {\n&#39;
            &#39;      i: 10\n&#39;
            &#39;    }\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message, descriptor_pool=descriptor_pool.Default())
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, descriptor_pool=descriptor_pool.Default()),
        text)

  def testParseMessageByFieldNumber(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;34: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
    text_format.Parse(text, message, allow_field_number=True)
    self.assertEqual(1, message.repeated_uint64[0])
    self.assertEqual(2, message.repeated_uint64[1])

    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;1 {\n&#39;
            &#39;  1545008 {\n&#39;
            &#39;    15: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  1547769 {\n&#39;
            &#39;    25: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_field_number=True)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

    # Can&#39;t parse field number without set allow_field_number=True.
    message = unittest_pb2.TestAllTypes()
    text = &#39;34:1\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;34&#34;.&#39;), text_format.Parse, text, message)

    # Can&#39;t parse if field number is not found.
    text = &#39;1234:1\n&#39;
    six.assertRaisesRegex(
        self,
        text_format.ParseError,
        (r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
         r&#39;&#34;1234&#34;.&#39;),
        text_format.Parse,
        text,
        message,
        allow_field_number=True)

  def testPrintAllExtensions(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;text_format_unittest_extensions_data.txt&#39;)

  def testPrintAllExtensionsPointy(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, pointy_brackets=True)),
        &#39;text_format_unittest_extensions_data_pointy.txt&#39;)

  def testParseGoldenExtensions(self):
    golden_text = &#39;\n&#39;.join(self.ReadGolden(
        &#39;text_format_unittest_extensions_data.txt&#39;))
    parsed_message = unittest_pb2.TestAllExtensions()
    text_format.Parse(golden_text, parsed_message)

    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.assertEqual(message, parsed_message)

  def testParseAllExtensions(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    ascii_text = text_format.MessageToString(message)

    parsed_message = unittest_pb2.TestAllExtensions()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)

  def testParseAllowedUnknownExtension(self):
    # Skip over unknown extension correctly.
    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [unknown_extension] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;    bin: &#34;\xe0&#34;&#39;
            &#39;    [nested_unknown_ext]: {\n&#39;
            &#39;      i: 23\n&#39;
            &#39;      x: x\n&#39;
            &#39;      test: &#34;test_string&#34;\n&#39;
            &#39;      floaty_float: -0.315\n&#39;
            &#39;      num: -inf\n&#39;
            &#39;      multiline_str: &#34;abc&#34;\n&#39;
            &#39;          &#34;def&#34;\n&#39;
            &#39;          &#34;xyz.&#34;\n&#39;
            &#39;      [nested_unknown_ext.ext]: &lt;\n&#39;
            &#39;        i: 23\n&#39;
            &#39;        i: 24\n&#39;
            &#39;        pointfloat: .3\n&#39;
            &#39;        test: &#34;test_string&#34;\n&#39;
            &#39;        floaty_float: -0.315\n&#39;
            &#39;        num: -inf\n&#39;
            &#39;        long_string: &#34;test&#34; &#34;test2&#34; \n&#39;
            &#39;      &gt;\n&#39;
            &#39;    }\n&#39;
            &#39;  }\n&#39;
            &#39;  [unknown_extension]: 5\n&#39;
            &#39;  [unknown_extension_with_number_field] {\n&#39;
            &#39;    1: &#34;some_field&#34;\n&#39;
            &#39;    2: -0.451\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_unknown_extension=True)
    golden = &#39;message_set {\n}\n&#39;
    self.CompareToGoldenText(text_format.MessageToString(message), golden)

    # Catch parse errors in unknown extension.
    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    i:\n&#39;  # Missing value.
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: }&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    str: &#34;malformed string\n&#39;  # Missing closing quote.
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: &#34;&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    str: &#34;malformed\n multiline\n string\n&#39;
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: &#34;&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [malformed_extension] &lt;\n&#39;
                 &#39;    i: -5\n&#39;
                 &#39;  \n&#39;  # Missing &#39;&gt;&#39; here.
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;5:1 : \&#39;}\&#39;: Expected &#34;&gt;&#34;.&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    # Don&#39;t allow unknown fields with allow_unknown_extension=True.
    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  unknown_field: true\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          (&#39;2:3 : Message type &#39;
                           &#39;&#34;proto2_wireformat_unittest.TestMessageSet&#34; has no&#39;
                           &#39; field named &#34;unknown_field&#34;.&#39;),
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    # Parse known extension correctly.
    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
            &#39;    str: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_unknown_extension=True)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

  def testParseBadIdentifier(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;optional_nested_message { &#34;bb&#34;: 1 }&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Parse(text, message)
    self.assertEqual(str(e.exception),
                     &#39;1:27 : \&#39;optional_nested_message { &#34;bb&#34;: 1 }\&#39;: &#39;
                     &#39;Expected identifier or number, got &#34;bb&#34;.&#39;)

  def testParseBadExtension(self):
    message = unittest_pb2.TestAllExtensions()
    text = &#39;[unknown_extension]: 8\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          &#39;1:2 : Extension &#34;unknown_extension&#34; not registered.&#39;,
                          text_format.Parse, text, message)
    message = unittest_pb2.TestAllTypes()
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:2 : Message type &#34;protobuf_unittest.TestAllTypes&#34; does not have &#39;
        &#39;extensions.&#39;), text_format.Parse, text, message)

  def testParseNumericUnknownEnum(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;optional_nested_enum: 100&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;1:23 : \&#39;optional_nested_enum: 100\&#39;: &#39;
                           r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                           r&#39;has no value with number 100.&#39;), text_format.Parse,
                          text, message)

  def testMergeDuplicateExtensionScalars(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
            &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
    text_format.Merge(text, message)
    self.assertEqual(67,
                     message.Extensions[unittest_pb2.optional_int32_extension])

  def testParseDuplicateExtensionScalars(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
            &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:96 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
        &#39;should not have multiple &#39;
        &#39;&#34;protobuf_unittest.optional_int32_extension&#34; extensions.&#39;),
                          text_format.Parse, text, message)

  def testParseDuplicateExtensionMessages(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_nested_message_extension]: {} &#39;
            &#39;[protobuf_unittest.optional_nested_message_extension]: {}&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:114 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
        &#39;should not have multiple &#39;
        &#39;&#34;protobuf_unittest.optional_nested_message_extension&#34; extensions.&#39;),
                          text_format.Parse, text, message)

  def testParseGroupNotClosed(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;RepeatedGroup: &lt;&#39;
    six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;&gt;&#34;.&#39;,
                          text_format.Parse, text, message)
    text = &#39;RepeatedGroup: {&#39;
    six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;}&#34;.&#39;,
                          text_format.Parse, text, message)

  def testParseEmptyGroup(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;OptionalGroup: {}&#39;
    text_format.Parse(text, message)
    self.assertTrue(message.HasField(&#39;optionalgroup&#39;))

    message.Clear()

    message = unittest_pb2.TestAllTypes()
    text = &#39;OptionalGroup: &lt;&gt;&#39;
    text_format.Parse(text, message)
    self.assertTrue(message.HasField(&#39;optionalgroup&#39;))

  # Maps aren&#39;t really proto2-only, but our test schema only has maps for
  # proto2.
  def testParseMap(self):
    text = (&#39;map_int32_int32 {\n&#39;
            &#39;  key: -123\n&#39;
            &#39;  value: -456\n&#39;
            &#39;}\n&#39;
            &#39;map_int64_int64 {\n&#39;
            &#39;  key: -8589934592\n&#39;
            &#39;  value: -17179869184\n&#39;
            &#39;}\n&#39;
            &#39;map_uint32_uint32 {\n&#39;
            &#39;  key: 123\n&#39;
            &#39;  value: 456\n&#39;
            &#39;}\n&#39;
            &#39;map_uint64_uint64 {\n&#39;
            &#39;  key: 8589934592\n&#39;
            &#39;  value: 17179869184\n&#39;
            &#39;}\n&#39;
            &#39;map_string_string {\n&#39;
            &#39;  key: &#34;abc&#34;\n&#39;
            &#39;  value: &#34;123&#34;\n&#39;
            &#39;}\n&#39;
            &#39;map_int32_foreign_message {\n&#39;
            &#39;  key: 111\n&#39;
            &#39;  value {\n&#39;
            &#39;    c: 5\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    message = map_unittest_pb2.TestMap()
    text_format.Parse(text, message)

    self.assertEqual(-456, message.map_int32_int32[-123])
    self.assertEqual(-2**34, message.map_int64_int64[-2**33])
    self.assertEqual(456, message.map_uint32_uint32[123])
    self.assertEqual(2**34, message.map_uint64_uint64[2**33])
    self.assertEqual(&#39;123&#39;, message.map_string_string[&#39;abc&#39;])
    self.assertEqual(5, message.map_int32_foreign_message[111].c)


class Proto3Tests(unittest.TestCase):

  def testPrintMessageExpandAny(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    descriptor_pool=descriptor_pool.Default()),
        &#39;any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testTopAnyMessage(self):
    packed_msg = unittest_pb2.OneString()
    msg = any_pb2.Any()
    msg.Pack(packed_msg)
    text = text_format.MessageToString(msg)
    other_msg = text_format.Parse(text, any_pb2.Any())
    self.assertEqual(msg, other_msg)

  def testPrintMessageExpandAnyRepeated(self):
    packed_message = unittest_pb2.OneString()
    message = any_test_pb2.TestAny()
    packed_message.data = &#39;string0&#39;
    message.repeated_any_value.add().Pack(packed_message)
    packed_message.data = &#39;string1&#39;
    message.repeated_any_value.add().Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message),
        &#39;repeated_any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string0&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;repeated_any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string1&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageExpandAnyDescriptorPoolMissingType(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    empty_pool = descriptor_pool.DescriptorPool()
    self.assertEqual(
        text_format.MessageToString(message, descriptor_pool=empty_pool),
        &#39;any_value {\n&#39;
        &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
        &#39;  value: &#34;\\n\\006string&#34;\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageExpandAnyPointyBrackets(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    pointy_brackets=True),
        &#39;any_value &lt;\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
        &#39;    data: &#34;string&#34;\n&#39;
        &#39;  &gt;\n&#39;
        &#39;&gt;\n&#39;)

  def testPrintMessageExpandAnyAsOneLine(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    as_one_line=True),
        &#39;any_value {&#39;
        &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
        &#39; { data: &#34;string&#34; } &#39;
        &#39;}&#39;)

  def testPrintMessageExpandAnyAsOneLinePointyBrackets(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    as_one_line=True,
                                    pointy_brackets=True,
                                    descriptor_pool=descriptor_pool.Default()),
        &#39;any_value &lt;&#39;
        &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
        &#39; &lt; data: &#34;string&#34; &gt; &#39;
        &#39;&gt;&#39;)

  def testPrintAndParseMessageInvalidAny(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    # Only include string after last &#39;/&#39; in type_url.
    message.any_value.type_url = message.any_value.TypeName()
    text = text_format.MessageToString(message)
    self.assertEqual(
        text, &#39;any_value {\n&#39;
        &#39;  type_url: &#34;protobuf_unittest.OneString&#34;\n&#39;
        &#39;  value: &#34;\\n\\006string&#34;\n&#39;
        &#39;}\n&#39;)

    parsed_message = any_test_pb2.TestAny()
    text_format.Parse(text, parsed_message)
    self.assertEqual(message, parsed_message)

  def testUnknownEnums(self):
    message = unittest_proto3_arena_pb2.TestAllTypes()
    message2 = unittest_proto3_arena_pb2.TestAllTypes()
    message.optional_nested_enum = 999
    text_string = text_format.MessageToString(message)
    text_format.Parse(text_string, message2)
    self.assertEqual(999, message2.optional_nested_enum)

  def testMergeExpandedAny(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)
    message.Clear()
    text_format.Parse(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeExpandedAnyRepeated(self):
    message = any_test_pb2.TestAny()
    text = (&#39;repeated_any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string0&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;
            &#39;repeated_any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string1&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.repeated_any_value[0].Unpack(packed_message)
    self.assertEqual(&#39;string0&#39;, packed_message.data)
    message.repeated_any_value[1].Unpack(packed_message)
    self.assertEqual(&#39;string1&#39;, packed_message.data)

  def testMergeExpandedAnyPointyBrackets(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  &gt;\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeAlternativeUrl(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.otherapi.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    self.assertEqual(&#39;type.otherapi.com/protobuf_unittest.OneString&#39;,
                     message.any_value.type_url)

  def testMergeExpandedAnyDescriptorPoolMissingType(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      empty_pool = descriptor_pool.DescriptorPool()
      text_format.Merge(text, message, descriptor_pool=empty_pool)
    self.assertEqual(
        str(e.exception),
        &#39;Type protobuf_unittest.OneString not found in descriptor pool&#39;)

  def testMergeUnexpandedAny(self):
    text = (&#39;any_value {\n&#39;
            &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
            &#39;  value: &#34;\\n\\006string&#34;\n&#39;
            &#39;}\n&#39;)
    message = any_test_pb2.TestAny()
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeMissingAnyEndToken(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Merge(text, message)
    self.assertEqual(str(e.exception), &#39;3:11 : Expected &#34;}&#34;.&#39;)


class TokenizerTest(unittest.TestCase):

  def testSimpleTokenCases(self):
    text = (&#39;identifier1:&#34;string1&#34;\n     \n\n&#39;
            &#39;identifier2 : \n \n123  \n  identifier3 :\&#39;string\&#39;\n&#39;
            &#39;identifiER_4 : 1.1e+2 ID5:-0.23 ID6:\&#39;aaaa\\\&#39;bbbb\&#39;\n&#39;
            &#39;ID7 : &#34;aa\\&#34;bb&#34;\n\n\n\n ID8: {A:inf B:-inf C:true D:false}\n&#39;
            &#39;ID9: 22 ID10: -111111111111111111 ID11: -22\n&#39;
            &#39;ID12: 2222222222222222222 ID13: 1.23456f ID14: 1.2e+2f &#39;
            &#39;false_bool:  0 true_BOOL:t \n true_bool1:  1 false_BOOL1:f &#39;
            &#39;False_bool: False True_bool: True X:iNf Y:-inF Z:nAN&#39;)
    tokenizer = text_format.Tokenizer(text.splitlines())
    methods = [(tokenizer.ConsumeIdentifier, &#39;identifier1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;string1&#39;),
               (tokenizer.ConsumeIdentifier, &#39;identifier2&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 123),
               (tokenizer.ConsumeIdentifier, &#39;identifier3&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;string&#39;),
               (tokenizer.ConsumeIdentifier, &#39;identifiER_4&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.1e+2),
               (tokenizer.ConsumeIdentifier, &#39;ID5&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, -0.23),
               (tokenizer.ConsumeIdentifier, &#39;ID6&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;aaaa\&#39;bbbb&#39;),
               (tokenizer.ConsumeIdentifier, &#39;ID7&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;aa\&#34;bb&#39;),
               (tokenizer.ConsumeIdentifier, &#39;ID8&#39;), &#39;:&#39;, &#39;{&#39;,
               (tokenizer.ConsumeIdentifier, &#39;A&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;B&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, -float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;C&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;D&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False), &#39;}&#39;,
               (tokenizer.ConsumeIdentifier, &#39;ID9&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 22),
               (tokenizer.ConsumeIdentifier, &#39;ID10&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, -111111111111111111),
               (tokenizer.ConsumeIdentifier, &#39;ID11&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, -22),
               (tokenizer.ConsumeIdentifier, &#39;ID12&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 2222222222222222222),
               (tokenizer.ConsumeIdentifier, &#39;ID13&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.23456),
               (tokenizer.ConsumeIdentifier, &#39;ID14&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.2e+2),
               (tokenizer.ConsumeIdentifier, &#39;false_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;true_BOOL&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;true_bool1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;false_BOOL1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;False_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;True_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;X&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;Y&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;-inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;Z&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;nan&#39;))]

    i = 0
    while not tokenizer.AtEnd():
      m = methods[i]
      if isinstance(m, str):
        token = tokenizer.token
        self.assertEqual(token, m)
        tokenizer.NextToken()
      elif isinstance(m[1], float) and math.isnan(m[1]):
        self.assertTrue(math.isnan(m[0]()))
      else:
        self.assertEqual(m[1], m[0]())
      i += 1

  def testConsumeAbstractIntegers(self):
    # This test only tests the failures in the integer parsing methods as well
    # as the &#39;0&#39; special cases.
    int64_max = (1 &lt;&lt; 63) - 1
    uint32_max = (1 &lt;&lt; 32) - 1
    text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(-1, tokenizer.ConsumeInteger())

    self.assertEqual(uint32_max + 1, tokenizer.ConsumeInteger())

    self.assertEqual(int64_max + 1, tokenizer.ConsumeInteger())
    self.assertTrue(tokenizer.AtEnd())

    text = &#39;-0 0 0 1.2&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(True, tokenizer.TryConsumeInteger())
    self.assertEqual(False, tokenizer.TryConsumeInteger())
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()
    self.assertEqual(1.2, tokenizer.ConsumeFloat())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeIntegers(self):
    # This test only tests the failures in the integer parsing methods as well
    # as the &#39;0&#39; special cases.
    int64_max = (1 &lt;&lt; 63) - 1
    uint32_max = (1 &lt;&lt; 32) - 1
    text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint32, tokenizer)
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint64, tokenizer)
    self.assertEqual(-1, text_format._ConsumeInt32(tokenizer))

    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint32, tokenizer)
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeInt32, tokenizer)
    self.assertEqual(uint32_max + 1, text_format._ConsumeInt64(tokenizer))

    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeInt64, tokenizer)
    self.assertEqual(int64_max + 1, text_format._ConsumeUint64(tokenizer))
    self.assertTrue(tokenizer.AtEnd())

    text = &#39;-0 -0 0 0&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeOctalIntegers(self):
    &#34;&#34;&#34;Test support for C style octal integers.&#34;&#34;&#34;
    text = &#39;00 -00 04 0755 -010 007 -0033 08 -09 01&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertEqual(0o755, tokenizer.ConsumeInteger())
    self.assertEqual(-0o10, tokenizer.ConsumeInteger())
    self.assertEqual(7, tokenizer.ConsumeInteger())
    self.assertEqual(-0o033, tokenizer.ConsumeInteger())
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()  # 08
    tokenizer.NextToken()
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()  # -09
    tokenizer.NextToken()
    self.assertEqual(1, tokenizer.ConsumeInteger())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeByteString(self):
    text = &#39;&#34;string1\&#39;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;string1&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\xt&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\x&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  def testConsumeBool(self):
    text = &#39;not-a-bool&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeBool)

  def testSkipComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines())
    self.assertTrue(tokenizer.AtEnd())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)

  def testConsumeComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                      skip_comments=False)
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTwoComments(self):
    text = &#39;# some comment\n# another comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual(&#39;# another comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTrailingComment(self):
    text = &#39;some_number: 4\n# some comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)

    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertFalse(tokenizer.AtEnd())

    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeLineComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                      skip_comments=False)
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual((False, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTwoLineComments(self):
    text = &#39;# some comment\n# another comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual((False, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual((False, &#39;# another comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeAndCheckTrailingComment(self):
    text = &#39;some_number: 4  # some comment&#39;  # trailing comment on the same line
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertRaises(text_format.ParseError,
                      tokenizer.ConsumeCommentOrTrailingComment)

    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertRaises(text_format.ParseError,
                      tokenizer.ConsumeCommentOrTrailingComment)
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertFalse(tokenizer.AtEnd())

    self.assertEqual((True, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testHashinComment(self):
    text = &#39;some_number: 4  # some comment # not a new comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertEqual((True, &#39;# some comment # not a new comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testHugeString(self):
    # With pathologic backtracking, fails with Forge OOM.
    text = &#39;&#34;&#39; + &#39;a&#39; * (10 * 1024 * 1024) + &#39;&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    tokenizer.ConsumeString()


# Tests for pretty printer functionality.
@_parameterized.parameters((unittest_pb2), (unittest_proto3_arena_pb2))
class PrettyPrinterTest(TextFormatBase):

  def testPrettyPrintNoMatch(self, message_module):

    def printer(message, indent, as_one_line):
      del message, indent, as_one_line
      return None

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { bb: 42 }&#39;)

  def testPrettyPrintOneLine(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        return &#39;My lucky number is %s&#39; % m.bb

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { My lucky number is 42 }&#39;)

  def testPrettyPrintMultiLine(self, message_module):

    def printer(m, indent, as_one_line):
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        line_deliminator = (&#39; &#39; if as_one_line else &#39;\n&#39;) + &#39; &#39; * indent
        return &#39;My lucky number is:%s%s&#39; % (line_deliminator, m.bb)
      return None

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { My lucky number is: 42 }&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=False, message_formatter=printer),
        &#39;repeated_nested_message {\n  My lucky number is:\n  42\n}\n&#39;)

  def testPrettyPrintEntireMessage(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.DESCRIPTOR:
        return &#39;The is the message!&#39;
      return None

    message = message_module.TestAllTypes()
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=False, message_formatter=printer),
        &#39;The is the message!\n&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;The is the message!&#39;)

  def testPrettyPrintMultipleParts(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        return &#39;My lucky number is %s&#39; % m.bb
      return None

    message = message_module.TestAllTypes()
    message.optional_int32 = 61
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    msg = message.repeated_nested_message.add()
    msg.bb = 99
    msg = message.optional_nested_message
    msg.bb = 1
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        (&#39;optional_int32: 61 &#39;
         &#39;optional_nested_message { My lucky number is 1 } &#39;
         &#39;repeated_nested_message { My lucky number is 42 } &#39;
         &#39;repeated_nested_message { My lucky number is 99 }&#39;))

    out = text_format.TextWriter(False)
    text_format.PrintField(
        message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
            &#39;optional_nested_message&#39;],
        message.optional_nested_message,
        out,
        message_formatter=printer)
    self.assertEqual(
        &#39;optional_nested_message {\n  My lucky number is 1\n}\n&#39;,
        out.getvalue())
    out.close()

    out = text_format.TextWriter(False)
    text_format.PrintFieldValue(
        message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
            &#39;optional_nested_message&#39;],
        message.optional_nested_message,
        out,
        message_formatter=printer)
    self.assertEqual(
        &#39;{\n  My lucky number is 1\n}&#39;,
        out.getvalue())
    out.close()


class WhitespaceTest(TextFormatBase):

  def setUp(self):
    self.out = text_format.TextWriter(False)
    self.addCleanup(self.out.close)
    self.message = unittest_pb2.NestedTestAllTypes()
    self.message.child.payload.optional_string = &#39;value&#39;
    self.field = self.message.DESCRIPTOR.fields_by_name[&#39;child&#39;]
    self.value = self.message.child

  def testMessageToString(self):
    self.CompareToGoldenText(
        text_format.MessageToString(self.message),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintMessage(self):
    text_format.PrintMessage(self.message, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintField(self):
    text_format.PrintField(self.field, self.value, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintFieldValue(self):
    text_format.PrintFieldValue(
        self.field, self.value, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            {
              payload {
                optional_string: &#34;value&#34;
              }
            }&#34;&#34;&#34;))


if __name__ == &#39;__main__&#39;:
  unittest.main()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests"><code class="flex name class">
<span>class <span class="ident">OnlyWorksWithProto2RightNowTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OnlyWorksWithProto2RightNowTests(TextFormatBase):

  def testPrintAllFieldsPointy(self):
    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, pointy_brackets=True)),
        &#39;text_format_unittest_data_pointy_oneof.txt&#39;)

  def testParseGolden(self):
    golden_text = &#39;\n&#39;.join(self.ReadGolden(
        &#39;text_format_unittest_data_oneof_implemented.txt&#39;))
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.Parse(golden_text, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testPrintAllFields(self):
    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;text_format_unittest_data_oneof_implemented.txt&#39;)

  def testPrintUnknownFields(self):
    message = unittest_pb2.TestAllTypes()
    message.optional_int32 = 101
    message.optional_double = 102.0
    message.optional_string = u&#39;hello&#39;
    message.optional_bytes = b&#39;103&#39;
    message.optionalgroup.a = 104
    message.optional_nested_message.bb = 105
    all_data = message.SerializeToString()
    empty_message = unittest_pb2.TestEmptyMessage()
    empty_message.ParseFromString(all_data)
    self.assertEqual(&#39;  1: 101\n&#39;
                     &#39;  12: 4636878028842991616\n&#39;
                     &#39;  14: &#34;hello&#34;\n&#39;
                     &#39;  15: &#34;103&#34;\n&#39;
                     &#39;  16 {\n&#39;
                     &#39;    17: 104\n&#39;
                     &#39;  }\n&#39;
                     &#39;  18 {\n&#39;
                     &#39;    1: 105\n&#39;
                     &#39;  }\n&#39;,
                     text_format.MessageToString(empty_message,
                                                 indent=2,
                                                 print_unknown_fields=True))
    self.assertEqual(&#39;1: 101 &#39;
                     &#39;12: 4636878028842991616 &#39;
                     &#39;14: &#34;hello&#34; &#39;
                     &#39;15: &#34;103&#34; &#39;
                     &#39;16 { 17: 104 } &#39;
                     &#39;18 { 1: 105 }&#39;,
                     text_format.MessageToString(empty_message,
                                                 print_unknown_fields=True,
                                                 as_one_line=True))

  def testPrintInIndexOrder(self):
    message = unittest_pb2.TestFieldOrderings()
    # Fields are listed in index order instead of field number.
    message.my_string = &#39;str&#39;
    message.my_int = 101
    message.my_float = 111
    message.optional_nested_message.oo = 0
    message.optional_nested_message.bb = 1
    message.Extensions[unittest_pb2.my_extension_string] = &#39;ext_str0&#39;
    # Extensions are listed based on the order of extension number.
    # Extension number 12.
    message.Extensions[unittest_pb2.TestExtensionOrderings2.
                       test_ext_orderings2].my_string = &#39;ext_str2&#39;
    # Extension number 13.
    message.Extensions[unittest_pb2.TestExtensionOrderings1.
                       test_ext_orderings1].my_string = &#39;ext_str1&#39;
    # Extension number 14.
    message.Extensions[
        unittest_pb2.TestExtensionOrderings2.TestExtensionOrderings3.
        test_ext_orderings3].my_string = &#39;ext_str3&#39;

    # Print in index order.
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(
            text_format.MessageToString(message, use_index_order=True)),
        &#39;my_string: &#34;str&#34;\n&#39;
        &#39;my_int: 101\n&#39;
        &#39;my_float: 111\n&#39;
        &#39;optional_nested_message {\n&#39;
        &#39;  oo: 0\n&#39;
        &#39;  bb: 1\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
        &#39;  my_string: &#34;ext_str2&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
        &#39;  my_string: &#34;ext_str1&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
        &#39;.test_ext_orderings3] {\n&#39;
        &#39;  my_string: &#34;ext_str3&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;)
    # By default, print in field number order.
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;my_int: 101\n&#39;
        &#39;my_string: &#34;str&#34;\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
        &#39;  my_string: &#34;ext_str2&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
        &#39;  my_string: &#34;ext_str1&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
        &#39;.test_ext_orderings3] {\n&#39;
        &#39;  my_string: &#34;ext_str3&#34;\n&#39;
        &#39;}\n&#39;
        &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;
        &#39;my_float: 111\n&#39;
        &#39;optional_nested_message {\n&#39;
        &#39;  bb: 1\n&#39;
        &#39;  oo: 0\n&#39;
        &#39;}\n&#39;)

  def testMergeLinesGolden(self):
    opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.MergeLines(opened, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testParseLinesGolden(self):
    opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
    parsed_message = unittest_pb2.TestAllTypes()
    r = text_format.ParseLines(opened, parsed_message)
    self.assertIs(r, parsed_message)

    message = unittest_pb2.TestAllTypes()
    test_util.SetAllFields(message)
    self.assertEqual(message, parsed_message)

  def testPrintMap(self):
    message = map_unittest_pb2.TestMap()

    message.map_int32_int32[-123] = -456
    message.map_int64_int64[-2**33] = -2**34
    message.map_uint32_uint32[123] = 456
    message.map_uint64_uint64[2**33] = 2**34
    message.map_string_string[&#39;abc&#39;] = &#39;123&#39;
    message.map_int32_foreign_message[111].c = 5

    # Maps are serialized to text format using their underlying repeated
    # representation.
    self.CompareToGoldenText(
        text_format.MessageToString(message), &#39;map_int32_int32 {\n&#39;
        &#39;  key: -123\n&#39;
        &#39;  value: -456\n&#39;
        &#39;}\n&#39;
        &#39;map_int64_int64 {\n&#39;
        &#39;  key: -8589934592\n&#39;
        &#39;  value: -17179869184\n&#39;
        &#39;}\n&#39;
        &#39;map_uint32_uint32 {\n&#39;
        &#39;  key: 123\n&#39;
        &#39;  value: 456\n&#39;
        &#39;}\n&#39;
        &#39;map_uint64_uint64 {\n&#39;
        &#39;  key: 8589934592\n&#39;
        &#39;  value: 17179869184\n&#39;
        &#39;}\n&#39;
        &#39;map_string_string {\n&#39;
        &#39;  key: &#34;abc&#34;\n&#39;
        &#39;  value: &#34;123&#34;\n&#39;
        &#39;}\n&#39;
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 5\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  # In cpp implementation, __str__ calls the cpp implementation of text format.
  def testPrintMapUsingCppImplementation(self):
    message = map_unittest_pb2.TestMap()
    inner_msg = message.map_int32_foreign_message[111]
    inner_msg.c = 1
    self.assertEqual(
        str(message),
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 1\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)
    inner_msg.c = 2
    self.assertEqual(
        str(message),
        &#39;map_int32_foreign_message {\n&#39;
        &#39;  key: 111\n&#39;
        &#39;  value {\n&#39;
        &#39;    c: 2\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testMapOrderEnforcement(self):
    message = map_unittest_pb2.TestMap()
    for letter in string.ascii_uppercase[13:26]:
      message.map_string_string[letter] = &#39;dummy&#39;
    for letter in reversed(string.ascii_uppercase[0:13]):
      message.map_string_string[letter] = &#39;dummy&#39;
    golden = &#39;&#39;.join((&#39;map_string_string {\n  key: &#34;%c&#34;\n  value: &#34;dummy&#34;\n}\n&#39;
                      % (letter,) for letter in string.ascii_uppercase))
    self.CompareToGoldenText(text_format.MessageToString(message), golden)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMapOrderEnforcement"><code class="name flex">
<span>def <span class="ident">testMapOrderEnforcement</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMapOrderEnforcement(self):
  message = map_unittest_pb2.TestMap()
  for letter in string.ascii_uppercase[13:26]:
    message.map_string_string[letter] = &#39;dummy&#39;
  for letter in reversed(string.ascii_uppercase[0:13]):
    message.map_string_string[letter] = &#39;dummy&#39;
  golden = &#39;&#39;.join((&#39;map_string_string {\n  key: &#34;%c&#34;\n  value: &#34;dummy&#34;\n}\n&#39;
                    % (letter,) for letter in string.ascii_uppercase))
  self.CompareToGoldenText(text_format.MessageToString(message), golden)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMergeLinesGolden"><code class="name flex">
<span>def <span class="ident">testMergeLinesGolden</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeLinesGolden(self):
  opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
  parsed_message = unittest_pb2.TestAllTypes()
  r = text_format.MergeLines(opened, parsed_message)
  self.assertIs(r, parsed_message)

  message = unittest_pb2.TestAllTypes()
  test_util.SetAllFields(message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseGolden"><code class="name flex">
<span>def <span class="ident">testParseGolden</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseGolden(self):
  golden_text = &#39;\n&#39;.join(self.ReadGolden(
      &#39;text_format_unittest_data_oneof_implemented.txt&#39;))
  parsed_message = unittest_pb2.TestAllTypes()
  r = text_format.Parse(golden_text, parsed_message)
  self.assertIs(r, parsed_message)

  message = unittest_pb2.TestAllTypes()
  test_util.SetAllFields(message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseLinesGolden"><code class="name flex">
<span>def <span class="ident">testParseLinesGolden</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseLinesGolden(self):
  opened = self.ReadGolden(&#39;text_format_unittest_data_oneof_implemented.txt&#39;)
  parsed_message = unittest_pb2.TestAllTypes()
  r = text_format.ParseLines(opened, parsed_message)
  self.assertIs(r, parsed_message)

  message = unittest_pb2.TestAllTypes()
  test_util.SetAllFields(message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFields"><code class="name flex">
<span>def <span class="ident">testPrintAllFields</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintAllFields(self):
  message = unittest_pb2.TestAllTypes()
  test_util.SetAllFields(message)
  self.CompareToGoldenFile(
      self.RemoveRedundantZeros(text_format.MessageToString(message)),
      &#39;text_format_unittest_data_oneof_implemented.txt&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFieldsPointy"><code class="name flex">
<span>def <span class="ident">testPrintAllFieldsPointy</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintAllFieldsPointy(self):
  message = unittest_pb2.TestAllTypes()
  test_util.SetAllFields(message)
  self.CompareToGoldenFile(
      self.RemoveRedundantZeros(text_format.MessageToString(
          message, pointy_brackets=True)),
      &#39;text_format_unittest_data_pointy_oneof.txt&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintInIndexOrder"><code class="name flex">
<span>def <span class="ident">testPrintInIndexOrder</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintInIndexOrder(self):
  message = unittest_pb2.TestFieldOrderings()
  # Fields are listed in index order instead of field number.
  message.my_string = &#39;str&#39;
  message.my_int = 101
  message.my_float = 111
  message.optional_nested_message.oo = 0
  message.optional_nested_message.bb = 1
  message.Extensions[unittest_pb2.my_extension_string] = &#39;ext_str0&#39;
  # Extensions are listed based on the order of extension number.
  # Extension number 12.
  message.Extensions[unittest_pb2.TestExtensionOrderings2.
                     test_ext_orderings2].my_string = &#39;ext_str2&#39;
  # Extension number 13.
  message.Extensions[unittest_pb2.TestExtensionOrderings1.
                     test_ext_orderings1].my_string = &#39;ext_str1&#39;
  # Extension number 14.
  message.Extensions[
      unittest_pb2.TestExtensionOrderings2.TestExtensionOrderings3.
      test_ext_orderings3].my_string = &#39;ext_str3&#39;

  # Print in index order.
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(
          text_format.MessageToString(message, use_index_order=True)),
      &#39;my_string: &#34;str&#34;\n&#39;
      &#39;my_int: 101\n&#39;
      &#39;my_float: 111\n&#39;
      &#39;optional_nested_message {\n&#39;
      &#39;  oo: 0\n&#39;
      &#39;  bb: 1\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
      &#39;  my_string: &#34;ext_str2&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
      &#39;  my_string: &#34;ext_str1&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
      &#39;.test_ext_orderings3] {\n&#39;
      &#39;  my_string: &#34;ext_str3&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;)
  # By default, print in field number order.
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_format.MessageToString(message)),
      &#39;my_int: 101\n&#39;
      &#39;my_string: &#34;str&#34;\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings2.test_ext_orderings2] {\n&#39;
      &#39;  my_string: &#34;ext_str2&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings1.test_ext_orderings1] {\n&#39;
      &#39;  my_string: &#34;ext_str1&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.TestExtensionOrderings2.TestExtensionOrderings3&#39;
      &#39;.test_ext_orderings3] {\n&#39;
      &#39;  my_string: &#34;ext_str3&#34;\n&#39;
      &#39;}\n&#39;
      &#39;[protobuf_unittest.my_extension_string]: &#34;ext_str0&#34;\n&#39;
      &#39;my_float: 111\n&#39;
      &#39;optional_nested_message {\n&#39;
      &#39;  bb: 1\n&#39;
      &#39;  oo: 0\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMap"><code class="name flex">
<span>def <span class="ident">testPrintMap</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMap(self):
  message = map_unittest_pb2.TestMap()

  message.map_int32_int32[-123] = -456
  message.map_int64_int64[-2**33] = -2**34
  message.map_uint32_uint32[123] = 456
  message.map_uint64_uint64[2**33] = 2**34
  message.map_string_string[&#39;abc&#39;] = &#39;123&#39;
  message.map_int32_foreign_message[111].c = 5

  # Maps are serialized to text format using their underlying repeated
  # representation.
  self.CompareToGoldenText(
      text_format.MessageToString(message), &#39;map_int32_int32 {\n&#39;
      &#39;  key: -123\n&#39;
      &#39;  value: -456\n&#39;
      &#39;}\n&#39;
      &#39;map_int64_int64 {\n&#39;
      &#39;  key: -8589934592\n&#39;
      &#39;  value: -17179869184\n&#39;
      &#39;}\n&#39;
      &#39;map_uint32_uint32 {\n&#39;
      &#39;  key: 123\n&#39;
      &#39;  value: 456\n&#39;
      &#39;}\n&#39;
      &#39;map_uint64_uint64 {\n&#39;
      &#39;  key: 8589934592\n&#39;
      &#39;  value: 17179869184\n&#39;
      &#39;}\n&#39;
      &#39;map_string_string {\n&#39;
      &#39;  key: &#34;abc&#34;\n&#39;
      &#39;  value: &#34;123&#34;\n&#39;
      &#39;}\n&#39;
      &#39;map_int32_foreign_message {\n&#39;
      &#39;  key: 111\n&#39;
      &#39;  value {\n&#39;
      &#39;    c: 5\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMapUsingCppImplementation"><code class="name flex">
<span>def <span class="ident">testPrintMapUsingCppImplementation</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMapUsingCppImplementation(self):
  message = map_unittest_pb2.TestMap()
  inner_msg = message.map_int32_foreign_message[111]
  inner_msg.c = 1
  self.assertEqual(
      str(message),
      &#39;map_int32_foreign_message {\n&#39;
      &#39;  key: 111\n&#39;
      &#39;  value {\n&#39;
      &#39;    c: 1\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)
  inner_msg.c = 2
  self.assertEqual(
      str(message),
      &#39;map_int32_foreign_message {\n&#39;
      &#39;  key: 111\n&#39;
      &#39;  value {\n&#39;
      &#39;    c: 2\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintUnknownFields"><code class="name flex">
<span>def <span class="ident">testPrintUnknownFields</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintUnknownFields(self):
  message = unittest_pb2.TestAllTypes()
  message.optional_int32 = 101
  message.optional_double = 102.0
  message.optional_string = u&#39;hello&#39;
  message.optional_bytes = b&#39;103&#39;
  message.optionalgroup.a = 104
  message.optional_nested_message.bb = 105
  all_data = message.SerializeToString()
  empty_message = unittest_pb2.TestEmptyMessage()
  empty_message.ParseFromString(all_data)
  self.assertEqual(&#39;  1: 101\n&#39;
                   &#39;  12: 4636878028842991616\n&#39;
                   &#39;  14: &#34;hello&#34;\n&#39;
                   &#39;  15: &#34;103&#34;\n&#39;
                   &#39;  16 {\n&#39;
                   &#39;    17: 104\n&#39;
                   &#39;  }\n&#39;
                   &#39;  18 {\n&#39;
                   &#39;    1: 105\n&#39;
                   &#39;  }\n&#39;,
                   text_format.MessageToString(empty_message,
                                               indent=2,
                                               print_unknown_fields=True))
  self.assertEqual(&#39;1: 101 &#39;
                   &#39;12: 4636878028842991616 &#39;
                   &#39;14: &#34;hello&#34; &#39;
                   &#39;15: &#34;103&#34; &#39;
                   &#39;16 { 17: 104 } &#39;
                   &#39;18 { 1: 105 }&#39;,
                   text_format.MessageToString(empty_message,
                                               print_unknown_fields=True,
                                               as_one_line=True))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest"><code class="flex name class">
<span>class <span class="ident">PrettyPrinterTest</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class PrettyPrinterTest(TextFormatBase):

  def testPrettyPrintNoMatch(self, message_module):

    def printer(message, indent, as_one_line):
      del message, indent, as_one_line
      return None

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { bb: 42 }&#39;)

  def testPrettyPrintOneLine(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        return &#39;My lucky number is %s&#39; % m.bb

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { My lucky number is 42 }&#39;)

  def testPrettyPrintMultiLine(self, message_module):

    def printer(m, indent, as_one_line):
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        line_deliminator = (&#39; &#39; if as_one_line else &#39;\n&#39;) + &#39; &#39; * indent
        return &#39;My lucky number is:%s%s&#39; % (line_deliminator, m.bb)
      return None

    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;repeated_nested_message { My lucky number is: 42 }&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=False, message_formatter=printer),
        &#39;repeated_nested_message {\n  My lucky number is:\n  42\n}\n&#39;)

  def testPrettyPrintEntireMessage(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.DESCRIPTOR:
        return &#39;The is the message!&#39;
      return None

    message = message_module.TestAllTypes()
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=False, message_formatter=printer),
        &#39;The is the message!\n&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        &#39;The is the message!&#39;)

  def testPrettyPrintMultipleParts(self, message_module):

    def printer(m, indent, as_one_line):
      del indent, as_one_line
      if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
        return &#39;My lucky number is %s&#39; % m.bb
      return None

    message = message_module.TestAllTypes()
    message.optional_int32 = 61
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    msg = message.repeated_nested_message.add()
    msg.bb = 99
    msg = message.optional_nested_message
    msg.bb = 1
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, as_one_line=True, message_formatter=printer),
        (&#39;optional_int32: 61 &#39;
         &#39;optional_nested_message { My lucky number is 1 } &#39;
         &#39;repeated_nested_message { My lucky number is 42 } &#39;
         &#39;repeated_nested_message { My lucky number is 99 }&#39;))

    out = text_format.TextWriter(False)
    text_format.PrintField(
        message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
            &#39;optional_nested_message&#39;],
        message.optional_nested_message,
        out,
        message_formatter=printer)
    self.assertEqual(
        &#39;optional_nested_message {\n  My lucky number is 1\n}\n&#39;,
        out.getvalue())
    out.close()

    out = text_format.TextWriter(False)
    text_format.PrintFieldValue(
        message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
            &#39;optional_nested_message&#39;],
        message.optional_nested_message,
        out,
        message_formatter=printer)
    self.assertEqual(
        &#39;{\n  My lucky number is 1\n}&#39;,
        out.getvalue())
    out.close()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintEntireMessage(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.DESCRIPTOR:
      return &#39;The is the message!&#39;
    return None

  message = message_module.TestAllTypes()
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=False, message_formatter=printer),
      &#39;The is the message!\n&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;The is the message!&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintEntireMessage(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.DESCRIPTOR:
      return &#39;The is the message!&#39;
    return None

  message = message_module.TestAllTypes()
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=False, message_formatter=printer),
      &#39;The is the message!\n&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;The is the message!&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintMultiLine(self, message_module):

  def printer(m, indent, as_one_line):
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      line_deliminator = (&#39; &#39; if as_one_line else &#39;\n&#39;) + &#39; &#39; * indent
      return &#39;My lucky number is:%s%s&#39; % (line_deliminator, m.bb)
    return None

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { My lucky number is: 42 }&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=False, message_formatter=printer),
      &#39;repeated_nested_message {\n  My lucky number is:\n  42\n}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintMultiLine(self, message_module):

  def printer(m, indent, as_one_line):
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      line_deliminator = (&#39; &#39; if as_one_line else &#39;\n&#39;) + &#39; &#39; * indent
      return &#39;My lucky number is:%s%s&#39; % (line_deliminator, m.bb)
    return None

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { My lucky number is: 42 }&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=False, message_formatter=printer),
      &#39;repeated_nested_message {\n  My lucky number is:\n  42\n}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintMultipleParts(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      return &#39;My lucky number is %s&#39; % m.bb
    return None

  message = message_module.TestAllTypes()
  message.optional_int32 = 61
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  msg = message.repeated_nested_message.add()
  msg.bb = 99
  msg = message.optional_nested_message
  msg.bb = 1
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      (&#39;optional_int32: 61 &#39;
       &#39;optional_nested_message { My lucky number is 1 } &#39;
       &#39;repeated_nested_message { My lucky number is 42 } &#39;
       &#39;repeated_nested_message { My lucky number is 99 }&#39;))

  out = text_format.TextWriter(False)
  text_format.PrintField(
      message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
          &#39;optional_nested_message&#39;],
      message.optional_nested_message,
      out,
      message_formatter=printer)
  self.assertEqual(
      &#39;optional_nested_message {\n  My lucky number is 1\n}\n&#39;,
      out.getvalue())
  out.close()

  out = text_format.TextWriter(False)
  text_format.PrintFieldValue(
      message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
          &#39;optional_nested_message&#39;],
      message.optional_nested_message,
      out,
      message_formatter=printer)
  self.assertEqual(
      &#39;{\n  My lucky number is 1\n}&#39;,
      out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintMultipleParts(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      return &#39;My lucky number is %s&#39; % m.bb
    return None

  message = message_module.TestAllTypes()
  message.optional_int32 = 61
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  msg = message.repeated_nested_message.add()
  msg.bb = 99
  msg = message.optional_nested_message
  msg.bb = 1
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      (&#39;optional_int32: 61 &#39;
       &#39;optional_nested_message { My lucky number is 1 } &#39;
       &#39;repeated_nested_message { My lucky number is 42 } &#39;
       &#39;repeated_nested_message { My lucky number is 99 }&#39;))

  out = text_format.TextWriter(False)
  text_format.PrintField(
      message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
          &#39;optional_nested_message&#39;],
      message.optional_nested_message,
      out,
      message_formatter=printer)
  self.assertEqual(
      &#39;optional_nested_message {\n  My lucky number is 1\n}\n&#39;,
      out.getvalue())
  out.close()

  out = text_format.TextWriter(False)
  text_format.PrintFieldValue(
      message_module.TestAllTypes.DESCRIPTOR.fields_by_name[
          &#39;optional_nested_message&#39;],
      message.optional_nested_message,
      out,
      message_formatter=printer)
  self.assertEqual(
      &#39;{\n  My lucky number is 1\n}&#39;,
      out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintNoMatch(self, message_module):

  def printer(message, indent, as_one_line):
    del message, indent, as_one_line
    return None

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { bb: 42 }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintNoMatch(self, message_module):

  def printer(message, indent, as_one_line):
    del message, indent, as_one_line
    return None

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { bb: 42 }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrettyPrintOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintOneLine(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      return &#39;My lucky number is %s&#39; % m.bb

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { My lucky number is 42 }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrettyPrintOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrettyPrintOneLine(self, message_module):

  def printer(m, indent, as_one_line):
    del indent, as_one_line
    if m.DESCRIPTOR == message_module.TestAllTypes.NestedMessage.DESCRIPTOR:
      return &#39;My lucky number is %s&#39; % m.bb

  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, as_one_line=True, message_formatter=printer),
      &#39;repeated_nested_message { My lucky number is 42 }&#39;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests"><code class="flex name class">
<span>class <span class="ident">Proto2Tests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Proto2Tests(TextFormatBase):

  def testPrintMessageSet(self):
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message), &#39;message_set {\n&#39;
        &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
        &#39;    i: 23\n&#39;
        &#39;  }\n&#39;
        &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
        &#39;    str: \&#34;foo\&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

    message = message_set_extensions_pb2.TestMessageSet()
    ext = message_set_extensions_pb2.message_set_extension3
    message.Extensions[ext].text = &#39;bar&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message),
        &#39;[google.protobuf.internal.TestMessageSetExtension3] {\n&#39;
        &#39;  text: \&#34;bar\&#34;\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageSetByFieldNumber(self):
    out = text_format.TextWriter(False)
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    text_format.PrintMessage(message, out, use_field_number=True)
    self.CompareToGoldenText(out.getvalue(), &#39;1 {\n&#39;
                             &#39;  1545008 {\n&#39;
                             &#39;    15: 23\n&#39;
                             &#39;  }\n&#39;
                             &#39;  1547769 {\n&#39;
                             &#39;    25: \&#34;foo\&#34;\n&#39;
                             &#39;  }\n&#39;
                             &#39;}\n&#39;)
    out.close()

  def testPrintMessageSetAsOneLine(self):
    message = unittest_mset_pb2.TestMessageSetContainer()
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    message.message_set.Extensions[ext1].i = 23
    message.message_set.Extensions[ext2].str = &#39;foo&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;message_set {&#39;
        &#39; [protobuf_unittest.TestMessageSetExtension1] {&#39;
        &#39; i: 23&#39;
        &#39; }&#39;
        &#39; [protobuf_unittest.TestMessageSetExtension2] {&#39;
        &#39; str: \&#34;foo\&#34;&#39;
        &#39; }&#39;
        &#39; }&#39;)

  def testParseMessageSet(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;repeated_uint64: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
    text_format.Parse(text, message)
    self.assertEqual(1, message.repeated_uint64[0])
    self.assertEqual(2, message.repeated_uint64[1])

    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
            &#39;    str: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

  def testExtensionInsideAnyMessage(self):
    message = test_extend_any.TestAny()
    text = (&#39;value {\n&#39;
            &#39;  [type.googleapis.com/google.protobuf.internal.TestAny] {\n&#39;
            &#39;    [google.protobuf.internal.TestAnyExtension1.extension1] {\n&#39;
            &#39;      i: 10\n&#39;
            &#39;    }\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message, descriptor_pool=descriptor_pool.Default())
    self.CompareToGoldenText(
        text_format.MessageToString(
            message, descriptor_pool=descriptor_pool.Default()),
        text)

  def testParseMessageByFieldNumber(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;34: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
    text_format.Parse(text, message, allow_field_number=True)
    self.assertEqual(1, message.repeated_uint64[0])
    self.assertEqual(2, message.repeated_uint64[1])

    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;1 {\n&#39;
            &#39;  1545008 {\n&#39;
            &#39;    15: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  1547769 {\n&#39;
            &#39;    25: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_field_number=True)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

    # Can&#39;t parse field number without set allow_field_number=True.
    message = unittest_pb2.TestAllTypes()
    text = &#39;34:1\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;34&#34;.&#39;), text_format.Parse, text, message)

    # Can&#39;t parse if field number is not found.
    text = &#39;1234:1\n&#39;
    six.assertRaisesRegex(
        self,
        text_format.ParseError,
        (r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
         r&#39;&#34;1234&#34;.&#39;),
        text_format.Parse,
        text,
        message,
        allow_field_number=True)

  def testPrintAllExtensions(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;text_format_unittest_extensions_data.txt&#39;)

  def testPrintAllExtensionsPointy(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.CompareToGoldenFile(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, pointy_brackets=True)),
        &#39;text_format_unittest_extensions_data_pointy.txt&#39;)

  def testParseGoldenExtensions(self):
    golden_text = &#39;\n&#39;.join(self.ReadGolden(
        &#39;text_format_unittest_extensions_data.txt&#39;))
    parsed_message = unittest_pb2.TestAllExtensions()
    text_format.Parse(golden_text, parsed_message)

    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    self.assertEqual(message, parsed_message)

  def testParseAllExtensions(self):
    message = unittest_pb2.TestAllExtensions()
    test_util.SetAllExtensions(message)
    ascii_text = text_format.MessageToString(message)

    parsed_message = unittest_pb2.TestAllExtensions()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)

  def testParseAllowedUnknownExtension(self):
    # Skip over unknown extension correctly.
    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [unknown_extension] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;    bin: &#34;\xe0&#34;&#39;
            &#39;    [nested_unknown_ext]: {\n&#39;
            &#39;      i: 23\n&#39;
            &#39;      x: x\n&#39;
            &#39;      test: &#34;test_string&#34;\n&#39;
            &#39;      floaty_float: -0.315\n&#39;
            &#39;      num: -inf\n&#39;
            &#39;      multiline_str: &#34;abc&#34;\n&#39;
            &#39;          &#34;def&#34;\n&#39;
            &#39;          &#34;xyz.&#34;\n&#39;
            &#39;      [nested_unknown_ext.ext]: &lt;\n&#39;
            &#39;        i: 23\n&#39;
            &#39;        i: 24\n&#39;
            &#39;        pointfloat: .3\n&#39;
            &#39;        test: &#34;test_string&#34;\n&#39;
            &#39;        floaty_float: -0.315\n&#39;
            &#39;        num: -inf\n&#39;
            &#39;        long_string: &#34;test&#34; &#34;test2&#34; \n&#39;
            &#39;      &gt;\n&#39;
            &#39;    }\n&#39;
            &#39;  }\n&#39;
            &#39;  [unknown_extension]: 5\n&#39;
            &#39;  [unknown_extension_with_number_field] {\n&#39;
            &#39;    1: &#34;some_field&#34;\n&#39;
            &#39;    2: -0.451\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_unknown_extension=True)
    golden = &#39;message_set {\n}\n&#39;
    self.CompareToGoldenText(text_format.MessageToString(message), golden)

    # Catch parse errors in unknown extension.
    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    i:\n&#39;  # Missing value.
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: }&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    str: &#34;malformed string\n&#39;  # Missing closing quote.
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: &#34;&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [unknown_extension] {\n&#39;
                 &#39;    str: &#34;malformed\n multiline\n string\n&#39;
                 &#39;  }\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;Invalid field value: &#34;&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  [malformed_extension] &lt;\n&#39;
                 &#39;    i: -5\n&#39;
                 &#39;  \n&#39;  # Missing &#39;&gt;&#39; here.
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          &#39;5:1 : \&#39;}\&#39;: Expected &#34;&gt;&#34;.&#39;,
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    # Don&#39;t allow unknown fields with allow_unknown_extension=True.
    message = unittest_mset_pb2.TestMessageSetContainer()
    malformed = (&#39;message_set {\n&#39;
                 &#39;  unknown_field: true\n&#39;
                 &#39;}\n&#39;)
    six.assertRaisesRegex(self,
                          text_format.ParseError,
                          (&#39;2:3 : Message type &#39;
                           &#39;&#34;proto2_wireformat_unittest.TestMessageSet&#34; has no&#39;
                           &#39; field named &#34;unknown_field&#34;.&#39;),
                          text_format.Parse,
                          malformed,
                          message,
                          allow_unknown_extension=True)

    # Parse known extension correctly.
    message = unittest_mset_pb2.TestMessageSetContainer()
    text = (&#39;message_set {\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
            &#39;    i: 23\n&#39;
            &#39;  }\n&#39;
            &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
            &#39;    str: \&#34;foo\&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Parse(text, message, allow_unknown_extension=True)
    ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
    ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
    self.assertEqual(23, message.message_set.Extensions[ext1].i)
    self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

  def testParseBadIdentifier(self):
    message = unittest_pb2.TestAllTypes()
    text = (&#39;optional_nested_message { &#34;bb&#34;: 1 }&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Parse(text, message)
    self.assertEqual(str(e.exception),
                     &#39;1:27 : \&#39;optional_nested_message { &#34;bb&#34;: 1 }\&#39;: &#39;
                     &#39;Expected identifier or number, got &#34;bb&#34;.&#39;)

  def testParseBadExtension(self):
    message = unittest_pb2.TestAllExtensions()
    text = &#39;[unknown_extension]: 8\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          &#39;1:2 : Extension &#34;unknown_extension&#34; not registered.&#39;,
                          text_format.Parse, text, message)
    message = unittest_pb2.TestAllTypes()
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:2 : Message type &#34;protobuf_unittest.TestAllTypes&#34; does not have &#39;
        &#39;extensions.&#39;), text_format.Parse, text, message)

  def testParseNumericUnknownEnum(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;optional_nested_enum: 100&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;1:23 : \&#39;optional_nested_enum: 100\&#39;: &#39;
                           r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                           r&#39;has no value with number 100.&#39;), text_format.Parse,
                          text, message)

  def testMergeDuplicateExtensionScalars(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
            &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
    text_format.Merge(text, message)
    self.assertEqual(67,
                     message.Extensions[unittest_pb2.optional_int32_extension])

  def testParseDuplicateExtensionScalars(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
            &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:96 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
        &#39;should not have multiple &#39;
        &#39;&#34;protobuf_unittest.optional_int32_extension&#34; extensions.&#39;),
                          text_format.Parse, text, message)

  def testParseDuplicateExtensionMessages(self):
    message = unittest_pb2.TestAllExtensions()
    text = (&#39;[protobuf_unittest.optional_nested_message_extension]: {} &#39;
            &#39;[protobuf_unittest.optional_nested_message_extension]: {}&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        &#39;1:114 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
        &#39;should not have multiple &#39;
        &#39;&#34;protobuf_unittest.optional_nested_message_extension&#34; extensions.&#39;),
                          text_format.Parse, text, message)

  def testParseGroupNotClosed(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;RepeatedGroup: &lt;&#39;
    six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;&gt;&#34;.&#39;,
                          text_format.Parse, text, message)
    text = &#39;RepeatedGroup: {&#39;
    six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;}&#34;.&#39;,
                          text_format.Parse, text, message)

  def testParseEmptyGroup(self):
    message = unittest_pb2.TestAllTypes()
    text = &#39;OptionalGroup: {}&#39;
    text_format.Parse(text, message)
    self.assertTrue(message.HasField(&#39;optionalgroup&#39;))

    message.Clear()

    message = unittest_pb2.TestAllTypes()
    text = &#39;OptionalGroup: &lt;&gt;&#39;
    text_format.Parse(text, message)
    self.assertTrue(message.HasField(&#39;optionalgroup&#39;))

  # Maps aren&#39;t really proto2-only, but our test schema only has maps for
  # proto2.
  def testParseMap(self):
    text = (&#39;map_int32_int32 {\n&#39;
            &#39;  key: -123\n&#39;
            &#39;  value: -456\n&#39;
            &#39;}\n&#39;
            &#39;map_int64_int64 {\n&#39;
            &#39;  key: -8589934592\n&#39;
            &#39;  value: -17179869184\n&#39;
            &#39;}\n&#39;
            &#39;map_uint32_uint32 {\n&#39;
            &#39;  key: 123\n&#39;
            &#39;  value: 456\n&#39;
            &#39;}\n&#39;
            &#39;map_uint64_uint64 {\n&#39;
            &#39;  key: 8589934592\n&#39;
            &#39;  value: 17179869184\n&#39;
            &#39;}\n&#39;
            &#39;map_string_string {\n&#39;
            &#39;  key: &#34;abc&#34;\n&#39;
            &#39;  value: &#34;123&#34;\n&#39;
            &#39;}\n&#39;
            &#39;map_int32_foreign_message {\n&#39;
            &#39;  key: 111\n&#39;
            &#39;  value {\n&#39;
            &#39;    c: 5\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    message = map_unittest_pb2.TestMap()
    text_format.Parse(text, message)

    self.assertEqual(-456, message.map_int32_int32[-123])
    self.assertEqual(-2**34, message.map_int64_int64[-2**33])
    self.assertEqual(456, message.map_uint32_uint32[123])
    self.assertEqual(2**34, message.map_uint64_uint64[2**33])
    self.assertEqual(&#39;123&#39;, message.map_string_string[&#39;abc&#39;])
    self.assertEqual(5, message.map_int32_foreign_message[111].c)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testExtensionInsideAnyMessage"><code class="name flex">
<span>def <span class="ident">testExtensionInsideAnyMessage</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testExtensionInsideAnyMessage(self):
  message = test_extend_any.TestAny()
  text = (&#39;value {\n&#39;
          &#39;  [type.googleapis.com/google.protobuf.internal.TestAny] {\n&#39;
          &#39;    [google.protobuf.internal.TestAnyExtension1.extension1] {\n&#39;
          &#39;      i: 10\n&#39;
          &#39;    }\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Merge(text, message, descriptor_pool=descriptor_pool.Default())
  self.CompareToGoldenText(
      text_format.MessageToString(
          message, descriptor_pool=descriptor_pool.Default()),
      text)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testMergeDuplicateExtensionScalars"><code class="name flex">
<span>def <span class="ident">testMergeDuplicateExtensionScalars</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeDuplicateExtensionScalars(self):
  message = unittest_pb2.TestAllExtensions()
  text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
          &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
  text_format.Merge(text, message)
  self.assertEqual(67,
                   message.Extensions[unittest_pb2.optional_int32_extension])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseAllExtensions"><code class="name flex">
<span>def <span class="ident">testParseAllExtensions</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAllExtensions(self):
  message = unittest_pb2.TestAllExtensions()
  test_util.SetAllExtensions(message)
  ascii_text = text_format.MessageToString(message)

  parsed_message = unittest_pb2.TestAllExtensions()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseAllowedUnknownExtension"><code class="name flex">
<span>def <span class="ident">testParseAllowedUnknownExtension</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAllowedUnknownExtension(self):
  # Skip over unknown extension correctly.
  message = unittest_mset_pb2.TestMessageSetContainer()
  text = (&#39;message_set {\n&#39;
          &#39;  [unknown_extension] {\n&#39;
          &#39;    i: 23\n&#39;
          &#39;    bin: &#34;\xe0&#34;&#39;
          &#39;    [nested_unknown_ext]: {\n&#39;
          &#39;      i: 23\n&#39;
          &#39;      x: x\n&#39;
          &#39;      test: &#34;test_string&#34;\n&#39;
          &#39;      floaty_float: -0.315\n&#39;
          &#39;      num: -inf\n&#39;
          &#39;      multiline_str: &#34;abc&#34;\n&#39;
          &#39;          &#34;def&#34;\n&#39;
          &#39;          &#34;xyz.&#34;\n&#39;
          &#39;      [nested_unknown_ext.ext]: &lt;\n&#39;
          &#39;        i: 23\n&#39;
          &#39;        i: 24\n&#39;
          &#39;        pointfloat: .3\n&#39;
          &#39;        test: &#34;test_string&#34;\n&#39;
          &#39;        floaty_float: -0.315\n&#39;
          &#39;        num: -inf\n&#39;
          &#39;        long_string: &#34;test&#34; &#34;test2&#34; \n&#39;
          &#39;      &gt;\n&#39;
          &#39;    }\n&#39;
          &#39;  }\n&#39;
          &#39;  [unknown_extension]: 5\n&#39;
          &#39;  [unknown_extension_with_number_field] {\n&#39;
          &#39;    1: &#34;some_field&#34;\n&#39;
          &#39;    2: -0.451\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Parse(text, message, allow_unknown_extension=True)
  golden = &#39;message_set {\n}\n&#39;
  self.CompareToGoldenText(text_format.MessageToString(message), golden)

  # Catch parse errors in unknown extension.
  message = unittest_mset_pb2.TestMessageSetContainer()
  malformed = (&#39;message_set {\n&#39;
               &#39;  [unknown_extension] {\n&#39;
               &#39;    i:\n&#39;  # Missing value.
               &#39;  }\n&#39;
               &#39;}\n&#39;)
  six.assertRaisesRegex(self,
                        text_format.ParseError,
                        &#39;Invalid field value: }&#39;,
                        text_format.Parse,
                        malformed,
                        message,
                        allow_unknown_extension=True)

  message = unittest_mset_pb2.TestMessageSetContainer()
  malformed = (&#39;message_set {\n&#39;
               &#39;  [unknown_extension] {\n&#39;
               &#39;    str: &#34;malformed string\n&#39;  # Missing closing quote.
               &#39;  }\n&#39;
               &#39;}\n&#39;)
  six.assertRaisesRegex(self,
                        text_format.ParseError,
                        &#39;Invalid field value: &#34;&#39;,
                        text_format.Parse,
                        malformed,
                        message,
                        allow_unknown_extension=True)

  message = unittest_mset_pb2.TestMessageSetContainer()
  malformed = (&#39;message_set {\n&#39;
               &#39;  [unknown_extension] {\n&#39;
               &#39;    str: &#34;malformed\n multiline\n string\n&#39;
               &#39;  }\n&#39;
               &#39;}\n&#39;)
  six.assertRaisesRegex(self,
                        text_format.ParseError,
                        &#39;Invalid field value: &#34;&#39;,
                        text_format.Parse,
                        malformed,
                        message,
                        allow_unknown_extension=True)

  message = unittest_mset_pb2.TestMessageSetContainer()
  malformed = (&#39;message_set {\n&#39;
               &#39;  [malformed_extension] &lt;\n&#39;
               &#39;    i: -5\n&#39;
               &#39;  \n&#39;  # Missing &#39;&gt;&#39; here.
               &#39;}\n&#39;)
  six.assertRaisesRegex(self,
                        text_format.ParseError,
                        &#39;5:1 : \&#39;}\&#39;: Expected &#34;&gt;&#34;.&#39;,
                        text_format.Parse,
                        malformed,
                        message,
                        allow_unknown_extension=True)

  # Don&#39;t allow unknown fields with allow_unknown_extension=True.
  message = unittest_mset_pb2.TestMessageSetContainer()
  malformed = (&#39;message_set {\n&#39;
               &#39;  unknown_field: true\n&#39;
               &#39;}\n&#39;)
  six.assertRaisesRegex(self,
                        text_format.ParseError,
                        (&#39;2:3 : Message type &#39;
                         &#39;&#34;proto2_wireformat_unittest.TestMessageSet&#34; has no&#39;
                         &#39; field named &#34;unknown_field&#34;.&#39;),
                        text_format.Parse,
                        malformed,
                        message,
                        allow_unknown_extension=True)

  # Parse known extension correctly.
  message = unittest_mset_pb2.TestMessageSetContainer()
  text = (&#39;message_set {\n&#39;
          &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
          &#39;    i: 23\n&#39;
          &#39;  }\n&#39;
          &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
          &#39;    str: \&#34;foo\&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Parse(text, message, allow_unknown_extension=True)
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  self.assertEqual(23, message.message_set.Extensions[ext1].i)
  self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseBadExtension"><code class="name flex">
<span>def <span class="ident">testParseBadExtension</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadExtension(self):
  message = unittest_pb2.TestAllExtensions()
  text = &#39;[unknown_extension]: 8\n&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        &#39;1:2 : Extension &#34;unknown_extension&#34; not registered.&#39;,
                        text_format.Parse, text, message)
  message = unittest_pb2.TestAllTypes()
  six.assertRaisesRegex(self, text_format.ParseError, (
      &#39;1:2 : Message type &#34;protobuf_unittest.TestAllTypes&#34; does not have &#39;
      &#39;extensions.&#39;), text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseBadIdentifier"><code class="name flex">
<span>def <span class="ident">testParseBadIdentifier</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadIdentifier(self):
  message = unittest_pb2.TestAllTypes()
  text = (&#39;optional_nested_message { &#34;bb&#34;: 1 }&#39;)
  with self.assertRaises(text_format.ParseError) as e:
    text_format.Parse(text, message)
  self.assertEqual(str(e.exception),
                   &#39;1:27 : \&#39;optional_nested_message { &#34;bb&#34;: 1 }\&#39;: &#39;
                   &#39;Expected identifier or number, got &#34;bb&#34;.&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionMessages"><code class="name flex">
<span>def <span class="ident">testParseDuplicateExtensionMessages</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateExtensionMessages(self):
  message = unittest_pb2.TestAllExtensions()
  text = (&#39;[protobuf_unittest.optional_nested_message_extension]: {} &#39;
          &#39;[protobuf_unittest.optional_nested_message_extension]: {}&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      &#39;1:114 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
      &#39;should not have multiple &#39;
      &#39;&#34;protobuf_unittest.optional_nested_message_extension&#34; extensions.&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionScalars"><code class="name flex">
<span>def <span class="ident">testParseDuplicateExtensionScalars</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateExtensionScalars(self):
  message = unittest_pb2.TestAllExtensions()
  text = (&#39;[protobuf_unittest.optional_int32_extension]: 42 &#39;
          &#39;[protobuf_unittest.optional_int32_extension]: 67&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      &#39;1:96 : Message type &#34;protobuf_unittest.TestAllExtensions&#34; &#39;
      &#39;should not have multiple &#39;
      &#39;&#34;protobuf_unittest.optional_int32_extension&#34; extensions.&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseEmptyGroup"><code class="name flex">
<span>def <span class="ident">testParseEmptyGroup</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseEmptyGroup(self):
  message = unittest_pb2.TestAllTypes()
  text = &#39;OptionalGroup: {}&#39;
  text_format.Parse(text, message)
  self.assertTrue(message.HasField(&#39;optionalgroup&#39;))

  message.Clear()

  message = unittest_pb2.TestAllTypes()
  text = &#39;OptionalGroup: &lt;&gt;&#39;
  text_format.Parse(text, message)
  self.assertTrue(message.HasField(&#39;optionalgroup&#39;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseGoldenExtensions"><code class="name flex">
<span>def <span class="ident">testParseGoldenExtensions</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseGoldenExtensions(self):
  golden_text = &#39;\n&#39;.join(self.ReadGolden(
      &#39;text_format_unittest_extensions_data.txt&#39;))
  parsed_message = unittest_pb2.TestAllExtensions()
  text_format.Parse(golden_text, parsed_message)

  message = unittest_pb2.TestAllExtensions()
  test_util.SetAllExtensions(message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseGroupNotClosed"><code class="name flex">
<span>def <span class="ident">testParseGroupNotClosed</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseGroupNotClosed(self):
  message = unittest_pb2.TestAllTypes()
  text = &#39;RepeatedGroup: &lt;&#39;
  six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;&gt;&#34;.&#39;,
                        text_format.Parse, text, message)
  text = &#39;RepeatedGroup: {&#39;
  six.assertRaisesRegex(self, text_format.ParseError, &#39;1:16 : Expected &#34;}&#34;.&#39;,
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseMap"><code class="name flex">
<span>def <span class="ident">testParseMap</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseMap(self):
  text = (&#39;map_int32_int32 {\n&#39;
          &#39;  key: -123\n&#39;
          &#39;  value: -456\n&#39;
          &#39;}\n&#39;
          &#39;map_int64_int64 {\n&#39;
          &#39;  key: -8589934592\n&#39;
          &#39;  value: -17179869184\n&#39;
          &#39;}\n&#39;
          &#39;map_uint32_uint32 {\n&#39;
          &#39;  key: 123\n&#39;
          &#39;  value: 456\n&#39;
          &#39;}\n&#39;
          &#39;map_uint64_uint64 {\n&#39;
          &#39;  key: 8589934592\n&#39;
          &#39;  value: 17179869184\n&#39;
          &#39;}\n&#39;
          &#39;map_string_string {\n&#39;
          &#39;  key: &#34;abc&#34;\n&#39;
          &#39;  value: &#34;123&#34;\n&#39;
          &#39;}\n&#39;
          &#39;map_int32_foreign_message {\n&#39;
          &#39;  key: 111\n&#39;
          &#39;  value {\n&#39;
          &#39;    c: 5\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  message = map_unittest_pb2.TestMap()
  text_format.Parse(text, message)

  self.assertEqual(-456, message.map_int32_int32[-123])
  self.assertEqual(-2**34, message.map_int64_int64[-2**33])
  self.assertEqual(456, message.map_uint32_uint32[123])
  self.assertEqual(2**34, message.map_uint64_uint64[2**33])
  self.assertEqual(&#39;123&#39;, message.map_string_string[&#39;abc&#39;])
  self.assertEqual(5, message.map_int32_foreign_message[111].c)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageByFieldNumber"><code class="name flex">
<span>def <span class="ident">testParseMessageByFieldNumber</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseMessageByFieldNumber(self):
  message = unittest_pb2.TestAllTypes()
  text = (&#39;34: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
  text_format.Parse(text, message, allow_field_number=True)
  self.assertEqual(1, message.repeated_uint64[0])
  self.assertEqual(2, message.repeated_uint64[1])

  message = unittest_mset_pb2.TestMessageSetContainer()
  text = (&#39;1 {\n&#39;
          &#39;  1545008 {\n&#39;
          &#39;    15: 23\n&#39;
          &#39;  }\n&#39;
          &#39;  1547769 {\n&#39;
          &#39;    25: \&#34;foo\&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Parse(text, message, allow_field_number=True)
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  self.assertEqual(23, message.message_set.Extensions[ext1].i)
  self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)

  # Can&#39;t parse field number without set allow_field_number=True.
  message = unittest_pb2.TestAllTypes()
  text = &#39;34:1\n&#39;
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
      r&#39;&#34;34&#34;.&#39;), text_format.Parse, text, message)

  # Can&#39;t parse if field number is not found.
  text = &#39;1234:1\n&#39;
  six.assertRaisesRegex(
      self,
      text_format.ParseError,
      (r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
       r&#39;&#34;1234&#34;.&#39;),
      text_format.Parse,
      text,
      message,
      allow_field_number=True)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageSet"><code class="name flex">
<span>def <span class="ident">testParseMessageSet</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseMessageSet(self):
  message = unittest_pb2.TestAllTypes()
  text = (&#39;repeated_uint64: 1\n&#39; &#39;repeated_uint64: 2\n&#39;)
  text_format.Parse(text, message)
  self.assertEqual(1, message.repeated_uint64[0])
  self.assertEqual(2, message.repeated_uint64[1])

  message = unittest_mset_pb2.TestMessageSetContainer()
  text = (&#39;message_set {\n&#39;
          &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
          &#39;    i: 23\n&#39;
          &#39;  }\n&#39;
          &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
          &#39;    str: \&#34;foo\&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Parse(text, message)
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  self.assertEqual(23, message.message_set.Extensions[ext1].i)
  self.assertEqual(&#39;foo&#39;, message.message_set.Extensions[ext2].str)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testParseNumericUnknownEnum"><code class="name flex">
<span>def <span class="ident">testParseNumericUnknownEnum</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseNumericUnknownEnum(self):
  message = unittest_pb2.TestAllTypes()
  text = &#39;optional_nested_enum: 100&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (r&#39;1:23 : \&#39;optional_nested_enum: 100\&#39;: &#39;
                         r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                         r&#39;has no value with number 100.&#39;), text_format.Parse,
                        text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensions"><code class="name flex">
<span>def <span class="ident">testPrintAllExtensions</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintAllExtensions(self):
  message = unittest_pb2.TestAllExtensions()
  test_util.SetAllExtensions(message)
  self.CompareToGoldenFile(
      self.RemoveRedundantZeros(text_format.MessageToString(message)),
      &#39;text_format_unittest_extensions_data.txt&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensionsPointy"><code class="name flex">
<span>def <span class="ident">testPrintAllExtensionsPointy</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintAllExtensionsPointy(self):
  message = unittest_pb2.TestAllExtensions()
  test_util.SetAllExtensions(message)
  self.CompareToGoldenFile(
      self.RemoveRedundantZeros(text_format.MessageToString(
          message, pointy_brackets=True)),
      &#39;text_format_unittest_extensions_data_pointy.txt&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSet"><code class="name flex">
<span>def <span class="ident">testPrintMessageSet</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageSet(self):
  message = unittest_mset_pb2.TestMessageSetContainer()
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  message.message_set.Extensions[ext1].i = 23
  message.message_set.Extensions[ext2].str = &#39;foo&#39;
  self.CompareToGoldenText(
      text_format.MessageToString(message), &#39;message_set {\n&#39;
      &#39;  [protobuf_unittest.TestMessageSetExtension1] {\n&#39;
      &#39;    i: 23\n&#39;
      &#39;  }\n&#39;
      &#39;  [protobuf_unittest.TestMessageSetExtension2] {\n&#39;
      &#39;    str: \&#34;foo\&#34;\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)

  message = message_set_extensions_pb2.TestMessageSet()
  ext = message_set_extensions_pb2.message_set_extension3
  message.Extensions[ext].text = &#39;bar&#39;
  self.CompareToGoldenText(
      text_format.MessageToString(message),
      &#39;[google.protobuf.internal.TestMessageSetExtension3] {\n&#39;
      &#39;  text: \&#34;bar\&#34;\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetAsOneLine"><code class="name flex">
<span>def <span class="ident">testPrintMessageSetAsOneLine</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageSetAsOneLine(self):
  message = unittest_mset_pb2.TestMessageSetContainer()
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  message.message_set.Extensions[ext1].i = 23
  message.message_set.Extensions[ext2].str = &#39;foo&#39;
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;message_set {&#39;
      &#39; [protobuf_unittest.TestMessageSetExtension1] {&#39;
      &#39; i: 23&#39;
      &#39; }&#39;
      &#39; [protobuf_unittest.TestMessageSetExtension2] {&#39;
      &#39; str: \&#34;foo\&#34;&#39;
      &#39; }&#39;
      &#39; }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetByFieldNumber"><code class="name flex">
<span>def <span class="ident">testPrintMessageSetByFieldNumber</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageSetByFieldNumber(self):
  out = text_format.TextWriter(False)
  message = unittest_mset_pb2.TestMessageSetContainer()
  ext1 = unittest_mset_pb2.TestMessageSetExtension1.message_set_extension
  ext2 = unittest_mset_pb2.TestMessageSetExtension2.message_set_extension
  message.message_set.Extensions[ext1].i = 23
  message.message_set.Extensions[ext2].str = &#39;foo&#39;
  text_format.PrintMessage(message, out, use_field_number=True)
  self.CompareToGoldenText(out.getvalue(), &#39;1 {\n&#39;
                           &#39;  1545008 {\n&#39;
                           &#39;    15: 23\n&#39;
                           &#39;  }\n&#39;
                           &#39;  1547769 {\n&#39;
                           &#39;    25: \&#34;foo\&#34;\n&#39;
                           &#39;  }\n&#39;
                           &#39;}\n&#39;)
  out.close()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests"><code class="flex name class">
<span>class <span class="ident">Proto3Tests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Proto3Tests(unittest.TestCase):

  def testPrintMessageExpandAny(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    descriptor_pool=descriptor_pool.Default()),
        &#39;any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testTopAnyMessage(self):
    packed_msg = unittest_pb2.OneString()
    msg = any_pb2.Any()
    msg.Pack(packed_msg)
    text = text_format.MessageToString(msg)
    other_msg = text_format.Parse(text, any_pb2.Any())
    self.assertEqual(msg, other_msg)

  def testPrintMessageExpandAnyRepeated(self):
    packed_message = unittest_pb2.OneString()
    message = any_test_pb2.TestAny()
    packed_message.data = &#39;string0&#39;
    message.repeated_any_value.add().Pack(packed_message)
    packed_message.data = &#39;string1&#39;
    message.repeated_any_value.add().Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message),
        &#39;repeated_any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string0&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;repeated_any_value {\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
        &#39;    data: &#34;string1&#34;\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageExpandAnyDescriptorPoolMissingType(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    empty_pool = descriptor_pool.DescriptorPool()
    self.assertEqual(
        text_format.MessageToString(message, descriptor_pool=empty_pool),
        &#39;any_value {\n&#39;
        &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
        &#39;  value: &#34;\\n\\006string&#34;\n&#39;
        &#39;}\n&#39;)

  def testPrintMessageExpandAnyPointyBrackets(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    pointy_brackets=True),
        &#39;any_value &lt;\n&#39;
        &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
        &#39;    data: &#34;string&#34;\n&#39;
        &#39;  &gt;\n&#39;
        &#39;&gt;\n&#39;)

  def testPrintMessageExpandAnyAsOneLine(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    as_one_line=True),
        &#39;any_value {&#39;
        &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
        &#39; { data: &#34;string&#34; } &#39;
        &#39;}&#39;)

  def testPrintMessageExpandAnyAsOneLinePointyBrackets(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    self.assertEqual(
        text_format.MessageToString(message,
                                    as_one_line=True,
                                    pointy_brackets=True,
                                    descriptor_pool=descriptor_pool.Default()),
        &#39;any_value &lt;&#39;
        &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
        &#39; &lt; data: &#34;string&#34; &gt; &#39;
        &#39;&gt;&#39;)

  def testPrintAndParseMessageInvalidAny(self):
    packed_message = unittest_pb2.OneString()
    packed_message.data = &#39;string&#39;
    message = any_test_pb2.TestAny()
    message.any_value.Pack(packed_message)
    # Only include string after last &#39;/&#39; in type_url.
    message.any_value.type_url = message.any_value.TypeName()
    text = text_format.MessageToString(message)
    self.assertEqual(
        text, &#39;any_value {\n&#39;
        &#39;  type_url: &#34;protobuf_unittest.OneString&#34;\n&#39;
        &#39;  value: &#34;\\n\\006string&#34;\n&#39;
        &#39;}\n&#39;)

    parsed_message = any_test_pb2.TestAny()
    text_format.Parse(text, parsed_message)
    self.assertEqual(message, parsed_message)

  def testUnknownEnums(self):
    message = unittest_proto3_arena_pb2.TestAllTypes()
    message2 = unittest_proto3_arena_pb2.TestAllTypes()
    message.optional_nested_enum = 999
    text_string = text_format.MessageToString(message)
    text_format.Parse(text_string, message2)
    self.assertEqual(999, message2.optional_nested_enum)

  def testMergeExpandedAny(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)
    message.Clear()
    text_format.Parse(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeExpandedAnyRepeated(self):
    message = any_test_pb2.TestAny()
    text = (&#39;repeated_any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string0&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;
            &#39;repeated_any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string1&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.repeated_any_value[0].Unpack(packed_message)
    self.assertEqual(&#39;string0&#39;, packed_message.data)
    message.repeated_any_value[1].Unpack(packed_message)
    self.assertEqual(&#39;string1&#39;, packed_message.data)

  def testMergeExpandedAnyPointyBrackets(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  &gt;\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeAlternativeUrl(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.otherapi.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    self.assertEqual(&#39;type.otherapi.com/protobuf_unittest.OneString&#39;,
                     message.any_value.type_url)

  def testMergeExpandedAnyDescriptorPoolMissingType(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;
            &#39;  }\n&#39;
            &#39;}\n&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      empty_pool = descriptor_pool.DescriptorPool()
      text_format.Merge(text, message, descriptor_pool=empty_pool)
    self.assertEqual(
        str(e.exception),
        &#39;Type protobuf_unittest.OneString not found in descriptor pool&#39;)

  def testMergeUnexpandedAny(self):
    text = (&#39;any_value {\n&#39;
            &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
            &#39;  value: &#34;\\n\\006string&#34;\n&#39;
            &#39;}\n&#39;)
    message = any_test_pb2.TestAny()
    text_format.Merge(text, message)
    packed_message = unittest_pb2.OneString()
    message.any_value.Unpack(packed_message)
    self.assertEqual(&#39;string&#39;, packed_message.data)

  def testMergeMissingAnyEndToken(self):
    message = any_test_pb2.TestAny()
    text = (&#39;any_value {\n&#39;
            &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
            &#39;    data: &#34;string&#34;\n&#39;)
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Merge(text, message)
    self.assertEqual(str(e.exception), &#39;3:11 : Expected &#34;}&#34;.&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeAlternativeUrl"><code class="name flex">
<span>def <span class="ident">testMergeAlternativeUrl</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeAlternativeUrl(self):
  message = any_test_pb2.TestAny()
  text = (&#39;any_value {\n&#39;
          &#39;  [type.otherapi.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Merge(text, message)
  packed_message = unittest_pb2.OneString()
  self.assertEqual(&#39;type.otherapi.com/protobuf_unittest.OneString&#39;,
                   message.any_value.type_url)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAny"><code class="name flex">
<span>def <span class="ident">testMergeExpandedAny</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeExpandedAny(self):
  message = any_test_pb2.TestAny()
  text = (&#39;any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Merge(text, message)
  packed_message = unittest_pb2.OneString()
  message.any_value.Unpack(packed_message)
  self.assertEqual(&#39;string&#39;, packed_message.data)
  message.Clear()
  text_format.Parse(text, message)
  packed_message = unittest_pb2.OneString()
  message.any_value.Unpack(packed_message)
  self.assertEqual(&#39;string&#39;, packed_message.data)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyDescriptorPoolMissingType"><code class="name flex">
<span>def <span class="ident">testMergeExpandedAnyDescriptorPoolMissingType</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeExpandedAnyDescriptorPoolMissingType(self):
  message = any_test_pb2.TestAny()
  text = (&#39;any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  with self.assertRaises(text_format.ParseError) as e:
    empty_pool = descriptor_pool.DescriptorPool()
    text_format.Merge(text, message, descriptor_pool=empty_pool)
  self.assertEqual(
      str(e.exception),
      &#39;Type protobuf_unittest.OneString not found in descriptor pool&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyPointyBrackets"><code class="name flex">
<span>def <span class="ident">testMergeExpandedAnyPointyBrackets</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeExpandedAnyPointyBrackets(self):
  message = any_test_pb2.TestAny()
  text = (&#39;any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
          &#39;    data: &#34;string&#34;\n&#39;
          &#39;  &gt;\n&#39;
          &#39;}\n&#39;)
  text_format.Merge(text, message)
  packed_message = unittest_pb2.OneString()
  message.any_value.Unpack(packed_message)
  self.assertEqual(&#39;string&#39;, packed_message.data)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyRepeated"><code class="name flex">
<span>def <span class="ident">testMergeExpandedAnyRepeated</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeExpandedAnyRepeated(self):
  message = any_test_pb2.TestAny()
  text = (&#39;repeated_any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string0&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;
          &#39;repeated_any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string1&#34;\n&#39;
          &#39;  }\n&#39;
          &#39;}\n&#39;)
  text_format.Merge(text, message)
  packed_message = unittest_pb2.OneString()
  message.repeated_any_value[0].Unpack(packed_message)
  self.assertEqual(&#39;string0&#39;, packed_message.data)
  message.repeated_any_value[1].Unpack(packed_message)
  self.assertEqual(&#39;string1&#39;, packed_message.data)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeMissingAnyEndToken"><code class="name flex">
<span>def <span class="ident">testMergeMissingAnyEndToken</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeMissingAnyEndToken(self):
  message = any_test_pb2.TestAny()
  text = (&#39;any_value {\n&#39;
          &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
          &#39;    data: &#34;string&#34;\n&#39;)
  with self.assertRaises(text_format.ParseError) as e:
    text_format.Merge(text, message)
  self.assertEqual(str(e.exception), &#39;3:11 : Expected &#34;}&#34;.&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testMergeUnexpandedAny"><code class="name flex">
<span>def <span class="ident">testMergeUnexpandedAny</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeUnexpandedAny(self):
  text = (&#39;any_value {\n&#39;
          &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
          &#39;  value: &#34;\\n\\006string&#34;\n&#39;
          &#39;}\n&#39;)
  message = any_test_pb2.TestAny()
  text_format.Merge(text, message)
  packed_message = unittest_pb2.OneString()
  message.any_value.Unpack(packed_message)
  self.assertEqual(&#39;string&#39;, packed_message.data)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintAndParseMessageInvalidAny"><code class="name flex">
<span>def <span class="ident">testPrintAndParseMessageInvalidAny</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintAndParseMessageInvalidAny(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  # Only include string after last &#39;/&#39; in type_url.
  message.any_value.type_url = message.any_value.TypeName()
  text = text_format.MessageToString(message)
  self.assertEqual(
      text, &#39;any_value {\n&#39;
      &#39;  type_url: &#34;protobuf_unittest.OneString&#34;\n&#39;
      &#39;  value: &#34;\\n\\006string&#34;\n&#39;
      &#39;}\n&#39;)

  parsed_message = any_test_pb2.TestAny()
  text_format.Parse(text, parsed_message)
  self.assertEqual(message, parsed_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAny"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAny</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAny(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  self.assertEqual(
      text_format.MessageToString(message,
                                  descriptor_pool=descriptor_pool.Default()),
      &#39;any_value {\n&#39;
      &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
      &#39;    data: &#34;string&#34;\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLine"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAnyAsOneLine</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAnyAsOneLine(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  self.assertEqual(
      text_format.MessageToString(message,
                                  as_one_line=True),
      &#39;any_value {&#39;
      &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
      &#39; { data: &#34;string&#34; } &#39;
      &#39;}&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLinePointyBrackets"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAnyAsOneLinePointyBrackets</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAnyAsOneLinePointyBrackets(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  self.assertEqual(
      text_format.MessageToString(message,
                                  as_one_line=True,
                                  pointy_brackets=True,
                                  descriptor_pool=descriptor_pool.Default()),
      &#39;any_value &lt;&#39;
      &#39; [type.googleapis.com/protobuf_unittest.OneString]&#39;
      &#39; &lt; data: &#34;string&#34; &gt; &#39;
      &#39;&gt;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyDescriptorPoolMissingType"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAnyDescriptorPoolMissingType</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAnyDescriptorPoolMissingType(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  empty_pool = descriptor_pool.DescriptorPool()
  self.assertEqual(
      text_format.MessageToString(message, descriptor_pool=empty_pool),
      &#39;any_value {\n&#39;
      &#39;  type_url: &#34;type.googleapis.com/protobuf_unittest.OneString&#34;\n&#39;
      &#39;  value: &#34;\\n\\006string&#34;\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyPointyBrackets"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAnyPointyBrackets</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAnyPointyBrackets(self):
  packed_message = unittest_pb2.OneString()
  packed_message.data = &#39;string&#39;
  message = any_test_pb2.TestAny()
  message.any_value.Pack(packed_message)
  self.assertEqual(
      text_format.MessageToString(message,
                                  pointy_brackets=True),
      &#39;any_value &lt;\n&#39;
      &#39;  [type.googleapis.com/protobuf_unittest.OneString] &lt;\n&#39;
      &#39;    data: &#34;string&#34;\n&#39;
      &#39;  &gt;\n&#39;
      &#39;&gt;\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyRepeated"><code class="name flex">
<span>def <span class="ident">testPrintMessageExpandAnyRepeated</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessageExpandAnyRepeated(self):
  packed_message = unittest_pb2.OneString()
  message = any_test_pb2.TestAny()
  packed_message.data = &#39;string0&#39;
  message.repeated_any_value.add().Pack(packed_message)
  packed_message.data = &#39;string1&#39;
  message.repeated_any_value.add().Pack(packed_message)
  self.assertEqual(
      text_format.MessageToString(message),
      &#39;repeated_any_value {\n&#39;
      &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
      &#39;    data: &#34;string0&#34;\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;
      &#39;repeated_any_value {\n&#39;
      &#39;  [type.googleapis.com/protobuf_unittest.OneString] {\n&#39;
      &#39;    data: &#34;string1&#34;\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testTopAnyMessage"><code class="name flex">
<span>def <span class="ident">testTopAnyMessage</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testTopAnyMessage(self):
  packed_msg = unittest_pb2.OneString()
  msg = any_pb2.Any()
  msg.Pack(packed_msg)
  text = text_format.MessageToString(msg)
  other_msg = text_format.Parse(text, any_pb2.Any())
  self.assertEqual(msg, other_msg)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.Proto3Tests.testUnknownEnums"><code class="name flex">
<span>def <span class="ident">testUnknownEnums</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testUnknownEnums(self):
  message = unittest_proto3_arena_pb2.TestAllTypes()
  message2 = unittest_proto3_arena_pb2.TestAllTypes()
  message.optional_nested_enum = 999
  text_string = text_format.MessageToString(message)
  text_format.Parse(text_string, message2)
  self.assertEqual(999, message2.optional_nested_enum)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.SimpleTextFormatTests"><code class="flex name class">
<span>class <span class="ident">SimpleTextFormatTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SimpleTextFormatTests(unittest.TestCase):

  # The members of _QUOTES are formatted into a regexp template that
  # expects single characters.  Therefore it&#39;s an error (in addition to being
  # non-sensical in the first place) to try to specify a &#34;quote mark&#34; that is
  # more than one character.
  def testQuoteMarksAreSingleChars(self):
    for quote in text_format._QUOTES:
      self.assertEqual(1, len(quote))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.SimpleTextFormatTests.testQuoteMarksAreSingleChars"><code class="name flex">
<span>def <span class="ident">testQuoteMarksAreSingleChars</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testQuoteMarksAreSingleChars(self):
  for quote in text_format._QUOTES:
    self.assertEqual(1, len(quote))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatBase"><code class="flex name class">
<span>class <span class="ident">TextFormatBase</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextFormatBase(unittest.TestCase):

  def ReadGolden(self, golden_filename):
    with test_util.GoldenFile(golden_filename) as f:
      return (f.readlines() if str is bytes else  # PY3
              [golden_line.decode(&#39;utf-8&#39;) for golden_line in f])

  def CompareToGoldenFile(self, text, golden_filename):
    golden_lines = self.ReadGolden(golden_filename)
    self.assertMultiLineEqual(text, &#39;&#39;.join(golden_lines))

  def CompareToGoldenText(self, text, golden_text):
    self.assertEqual(text, golden_text)

  def RemoveRedundantZeros(self, text):
    # Some platforms print 1e+5 as 1e+005.  This is fine, but we need to remove
    # these zeros in order to match the golden file.
    text = text.replace(&#39;e+0&#39;,&#39;e+&#39;).replace(&#39;e+0&#39;,&#39;e+&#39;) \
               .replace(&#39;e-0&#39;,&#39;e-&#39;).replace(&#39;e-0&#39;,&#39;e-&#39;)
    # Floating point fields are printed with .0 suffix even if they are
    # actualy integer numbers.
    text = re.compile(r&#39;\.0$&#39;, re.MULTILINE).sub(&#39;&#39;, text)
    return text</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>unittest.case.TestCase</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests">OnlyWorksWithProto2RightNowTests</a></li>
<li><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest">PrettyPrinterTest</a></li>
<li><a title="google.protobuf.internal.text_format_test.Proto2Tests" href="#google.protobuf.internal.text_format_test.Proto2Tests">Proto2Tests</a></li>
<li><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests">TextFormatMergeTests</a></li>
<li><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests">TextFormatMessageToStringTests</a></li>
<li><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests">TextFormatMessageToTextBytesTests</a></li>
<li><a title="google.protobuf.internal.text_format_test.TextFormatParserTests" href="#google.protobuf.internal.text_format_test.TextFormatParserTests">TextFormatParserTests</a></li>
<li><a title="google.protobuf.internal.text_format_test.WhitespaceTest" href="#google.protobuf.internal.text_format_test.WhitespaceTest">WhitespaceTest</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenFile"><code class="name flex">
<span>def <span class="ident">CompareToGoldenFile</span></span>(<span>self, text, golden_filename)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def CompareToGoldenFile(self, text, golden_filename):
  golden_lines = self.ReadGolden(golden_filename)
  self.assertMultiLineEqual(text, &#39;&#39;.join(golden_lines))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenText"><code class="name flex">
<span>def <span class="ident">CompareToGoldenText</span></span>(<span>self, text, golden_text)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def CompareToGoldenText(self, text, golden_text):
  self.assertEqual(text, golden_text)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatBase.ReadGolden"><code class="name flex">
<span>def <span class="ident">ReadGolden</span></span>(<span>self, golden_filename)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ReadGolden(self, golden_filename):
  with test_util.GoldenFile(golden_filename) as f:
    return (f.readlines() if str is bytes else  # PY3
            [golden_line.decode(&#39;utf-8&#39;) for golden_line in f])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatBase.RemoveRedundantZeros"><code class="name flex">
<span>def <span class="ident">RemoveRedundantZeros</span></span>(<span>self, text)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def RemoveRedundantZeros(self, text):
  # Some platforms print 1e+5 as 1e+005.  This is fine, but we need to remove
  # these zeros in order to match the golden file.
  text = text.replace(&#39;e+0&#39;,&#39;e+&#39;).replace(&#39;e+0&#39;,&#39;e+&#39;) \
             .replace(&#39;e-0&#39;,&#39;e-&#39;).replace(&#39;e-0&#39;,&#39;e-&#39;)
  # Floating point fields are printed with .0 suffix even if they are
  # actualy integer numbers.
  text = re.compile(r&#39;\.0$&#39;, re.MULTILINE).sub(&#39;&#39;, text)
  return text</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests"><code class="flex name class">
<span>class <span class="ident">TextFormatMergeTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextFormatMergeTests(TextFormatBase):

  def testMergeDuplicateScalarsInText(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(67, message.optional_int32)

  def testMergeDuplicateNestedMessageScalars(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_nested_message { bb: 1 } &#39;
            &#39;optional_nested_message { bb: 2 }&#39;)
    r = text_format.Merge(text, message)
    self.assertTrue(r is message)
    self.assertEqual(2, message.optional_nested_message.bb)

  def testReplaceScalarInMessage(self, message_module):
    message = message_module.TestAllTypes(optional_int32=42)
    text = &#39;optional_int32: 67&#39;
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(67, message.optional_int32)

  def testReplaceMessageInMessage(self, message_module):
    message = message_module.TestAllTypes(
        optional_int32=42, optional_nested_message=dict())
    self.assertTrue(message.HasField(&#39;optional_nested_message&#39;))
    text = &#39;optional_nested_message{ bb: 3 }&#39;
    r = text_format.Merge(text, message)
    self.assertIs(r, message)
    self.assertEqual(3, message.optional_nested_message.bb)

  def testMergeMultipleOneof(self, message_module):
    m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
    m2 = message_module.TestAllTypes()
    text_format.Merge(m_string, m2)
    self.assertEqual(&#39;oneof_string&#39;, m2.WhichOneof(&#39;oneof_field&#39;))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeDuplicateNestedMessageScalars(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_nested_message { bb: 1 } &#39;
          &#39;optional_nested_message { bb: 2 }&#39;)
  r = text_format.Merge(text, message)
  self.assertTrue(r is message)
  self.assertEqual(2, message.optional_nested_message.bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeDuplicateNestedMessageScalars(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_nested_message { bb: 1 } &#39;
          &#39;optional_nested_message { bb: 2 }&#39;)
  r = text_format.Merge(text, message)
  self.assertTrue(r is message)
  self.assertEqual(2, message.optional_nested_message.bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeDuplicateScalarsInText(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(67, message.optional_int32)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeDuplicateScalarsInText(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(67, message.optional_int32)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMergeMultipleOneof60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeMultipleOneof(self, message_module):
  m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
  m2 = message_module.TestAllTypes()
  text_format.Merge(m_string, m2)
  self.assertEqual(&#39;oneof_string&#39;, m2.WhichOneof(&#39;oneof_field&#39;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMergeMultipleOneof60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMergeMultipleOneof(self, message_module):
  m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
  m2 = message_module.TestAllTypes()
  text_format.Merge(m_string, m2)
  self.assertEqual(&#39;oneof_string&#39;, m2.WhichOneof(&#39;oneof_field&#39;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testReplaceMessageInMessage60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testReplaceMessageInMessage(self, message_module):
  message = message_module.TestAllTypes(
      optional_int32=42, optional_nested_message=dict())
  self.assertTrue(message.HasField(&#39;optional_nested_message&#39;))
  text = &#39;optional_nested_message{ bb: 3 }&#39;
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(3, message.optional_nested_message.bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testReplaceMessageInMessage60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testReplaceMessageInMessage(self, message_module):
  message = message_module.TestAllTypes(
      optional_int32=42, optional_nested_message=dict())
  self.assertTrue(message.HasField(&#39;optional_nested_message&#39;))
  text = &#39;optional_nested_message{ bb: 3 }&#39;
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(3, message.optional_nested_message.bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testReplaceScalarInMessage60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testReplaceScalarInMessage(self, message_module):
  message = message_module.TestAllTypes(optional_int32=42)
  text = &#39;optional_int32: 67&#39;
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(67, message.optional_int32)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testReplaceScalarInMessage60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testReplaceScalarInMessage(self, message_module):
  message = message_module.TestAllTypes(optional_int32=42)
  text = &#39;optional_int32: 67&#39;
  r = text_format.Merge(text, message)
  self.assertIs(r, message)
  self.assertEqual(67, message.optional_int32)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests"><code class="flex name class">
<span>class <span class="ident">TextFormatMessageToStringTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextFormatMessageToStringTests(TextFormatBase):

  def testPrintExotic(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(message)),
        &#39;repeated_int64: -9223372036854775808\n&#39;
        &#39;repeated_uint64: 18446744073709551615\n&#39;
        &#39;repeated_double: 123.456\n&#39;
        &#39;repeated_double: 1.23e+22\n&#39;
        &#39;repeated_double: 1.23e-18\n&#39;
        &#39;repeated_string:&#39;
        &#39; &#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
        &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)

  def testPrintExoticUnicodeSubclass(self, message_module):

    class UnicodeSub(six.text_type):
      pass

    message = message_module.TestAllTypes()
    message.repeated_string.append(UnicodeSub(u&#39;\u00fc\ua71f&#39;))
    self.CompareToGoldenText(
        text_format.MessageToString(message),
        &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)

  def testPrintNestedMessageAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    msg = message.repeated_nested_message.add()
    msg.bb = 42
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;repeated_nested_message { bb: 42 }&#39;)

  def testPrintRepeatedFieldsAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int32.append(1)
    message.repeated_int32.append(1)
    message.repeated_int32.append(3)
    message.repeated_string.append(&#39;Google&#39;)
    message.repeated_string.append(&#39;Zurich&#39;)
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;repeated_int32: 1 repeated_int32: 1 repeated_int32: 3 &#39;
        &#39;repeated_string: &#34;Google&#34; repeated_string: &#34;Zurich&#34;&#39;)

  def VerifyPrintShortFormatRepeatedFields(self, message_module, as_one_line):
    message = message_module.TestAllTypes()
    message.repeated_int32.append(1)
    message.repeated_string.append(&#39;Google&#39;)
    message.repeated_string.append(&#39;Hello,World&#39;)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_FOO)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAR)
    message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAZ)
    message.optional_nested_message.bb = 3
    for i in (21, 32):
      msg = message.repeated_nested_message.add()
      msg.bb = i
    expected_ascii = (
        &#39;optional_nested_message {\n  bb: 3\n}\n&#39;
        &#39;repeated_int32: [1]\n&#39;
        &#39;repeated_string: &#34;Google&#34;\n&#39;
        &#39;repeated_string: &#34;Hello,World&#34;\n&#39;
        &#39;repeated_nested_message {\n  bb: 21\n}\n&#39;
        &#39;repeated_nested_message {\n  bb: 32\n}\n&#39;
        &#39;repeated_foreign_enum: [FOREIGN_FOO, FOREIGN_BAR, FOREIGN_BAZ]\n&#39;)
    if as_one_line:
      expected_ascii = expected_ascii.replace(&#39;\n&#39;, &#39; &#39;)
      expected_ascii = re.sub(r&#39;\s+&#39;, &#39; &#39;, expected_ascii)
      expected_ascii = re.sub(r&#39;\s$&#39;, &#39;&#39;, expected_ascii)

    actual_ascii = text_format.MessageToString(
        message, use_short_repeated_primitives=True,
        as_one_line=as_one_line)
    self.CompareToGoldenText(actual_ascii, expected_ascii)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(actual_ascii, parsed_message)
    self.assertEqual(parsed_message, message)

  def testPrintShortFormatRepeatedFields(self, message_module):
    self.VerifyPrintShortFormatRepeatedFields(message_module, False)
    self.VerifyPrintShortFormatRepeatedFields(message_module, True)

  def testPrintNestedNewLineInStringAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.optional_string = &#39;a\nnew\nline&#39;
    self.CompareToGoldenText(
        text_format.MessageToString(message, as_one_line=True),
        &#39;optional_string: &#34;a\\nnew\\nline&#34;&#39;)

  def testPrintExoticAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_format.MessageToString(
            message, as_one_line=True)),
        &#39;repeated_int64: -9223372036854775808&#39;
        &#39; repeated_uint64: 18446744073709551615&#39;
        &#39; repeated_double: 123.456&#39;
        &#39; repeated_double: 1.23e+22&#39;
        &#39; repeated_double: 1.23e-18&#39;
        &#39; repeated_string: &#39;
        &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;&#39;
        &#39; repeated_string: &#34;\\303\\274\\352\\234\\237&#34;&#39;)

  def testRoundTripExoticAsOneLine(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_int64.append(-9223372036854775808)
    message.repeated_uint64.append(18446744073709551615)
    message.repeated_double.append(123.456)
    message.repeated_double.append(1.23e22)
    message.repeated_double.append(1.23e-18)
    message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
    message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)

    # Test as_utf8 = False.
    wire_text = text_format.MessageToString(message,
                                            as_one_line=True,
                                            as_utf8=False)
    parsed_message = message_module.TestAllTypes()
    r = text_format.Parse(wire_text, parsed_message)
    self.assertIs(r, parsed_message)
    self.assertEqual(message, parsed_message)

    # Test as_utf8 = True.
    wire_text = text_format.MessageToString(message,
                                            as_one_line=True,
                                            as_utf8=True)
    parsed_message = message_module.TestAllTypes()
    r = text_format.Parse(wire_text, parsed_message)
    self.assertIs(r, parsed_message)
    self.assertEqual(message, parsed_message,
                     &#39;\n%s != %s&#39; % (message, parsed_message))

  def testPrintRawUtf8String(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    text = text_format.MessageToString(message, as_utf8=True)
    golden_unicode = u&#39;repeated_string: &#34;\u00fc\\t\ua71f&#34;\n&#39;
    golden_text = golden_unicode if six.PY3 else golden_unicode.encode(&#39;utf-8&#39;)
    # MessageToString always returns a native str.
    self.CompareToGoldenText(text, golden_text)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))

  def testPrintFloatFormat(self, message_module):
    # Check that float_format argument is passed to sub-message formatting.
    message = message_module.NestedTestAllTypes()
    message.payload.optional_float = 1.25
    # Check rounding at 15 significant digits
    message.payload.optional_double = -.000003456789012345678
    # Check no decimal point.
    message.payload.repeated_float.append(-5642)
    # Check no trailing zeros.
    message.payload.repeated_double.append(.000078900)
    formatted_fields = [&#39;optional_float: 1.25&#39;,
                        &#39;optional_double: -3.45678901234568e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))
    # as_one_line=True is a separate code branch where float_format is passed.
    text_message = text_format.MessageToString(message,
                                               as_one_line=True,
                                               float_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{ {0} {1} {2} {3} }}&#39;.format(*formatted_fields))

    # 32-bit 1.2 is noisy when extended to 64-bit:
    #  &gt;&gt;&gt; struct.unpack(&#39;f&#39;, struct.pack(&#39;f&#39;, 1.2))[0]
    #  1.2000000476837158
    # TODO(jieluo): change to 1.2 with cl/241634942.
    message.payload.optional_float = 1.2000000476837158
    formatted_fields = [&#39;optional_float: 1.2&#39;,
                        &#39;optional_double: -3.45678901234568e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;,
                                               double_format=&#39;.15g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

    # Test only set float_format affect both float and double fields.
    formatted_fields = [&#39;optional_float: 1.2&#39;,
                        &#39;optional_double: -3.456789e-6&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

    # Test default float_format has 8 valid digits.
    message.payload.optional_float = 1.2345678912
    message.payload.optional_double = 1.2345678912
    formatted_fields = [&#39;optional_float: 1.2345679&#39;,
                        &#39;optional_double: 1.2345678912&#39;,
                        &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
    text_message = text_format.MessageToString(message)
    self.CompareToGoldenText(
        self.RemoveRedundantZeros(text_message),
        &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
            *formatted_fields))

  def testMessageToString(self, message_module):
    message = message_module.ForeignMessage()
    message.c = 123
    self.assertEqual(&#39;c: 123\n&#39;, str(message))

  def testMessageToStringUnicode(self, message_module):
    golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
    golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
    message = message_module.TestAllTypes()
    message.optional_string = golden_unicode
    message.optional_bytes = golden_bytes
    text = text_format.MessageToString(message, as_utf8=True)
    golden_message = textwrap.dedent(
        &#39;optional_string: &#34;Á short desçription and a 🍌.&#34;\n&#39;
        &#39;optional_bytes: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;)
    self.CompareToGoldenText(text, golden_message)

  def testMessageToStringASCII(self, message_module):
    golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
    golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
    message = message_module.TestAllTypes()
    message.optional_string = golden_unicode
    message.optional_bytes = golden_bytes
    text = text_format.MessageToString(message, as_utf8=False)  # ASCII
    golden_message = (
        &#39;optional_string: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;
        &#39;optional_bytes: &#39;
        r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
        &#39;\n&#39;)
    self.CompareToGoldenText(text, golden_message)

  def testPrintField(self, message_module):
    message = message_module.TestAllTypes()
    field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
    value = message.optional_float
    out = text_format.TextWriter(False)
    text_format.PrintField(field, value, out)
    self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
    out.close()
    # Test Printer
    out = text_format.TextWriter(False)
    printer = text_format._Printer(out)
    printer.PrintField(field, value)
    self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
    out.close()

  def testPrintFieldValue(self, message_module):
    message = message_module.TestAllTypes()
    field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
    value = message.optional_float
    out = text_format.TextWriter(False)
    text_format.PrintFieldValue(field, value, out)
    self.assertEqual(&#39;0.0&#39;, out.getvalue())
    out.close()
    # Test Printer
    out = text_format.TextWriter(False)
    printer = text_format._Printer(out)
    printer.PrintFieldValue(field, value)
    self.assertEqual(&#39;0.0&#39;, out.getvalue())
    out.close()

  def testCustomOptions(self, message_module):
    message_descriptor = (unittest_custom_options_pb2.
                          TestMessageWithCustomOptions.DESCRIPTOR)
    message_proto = descriptor_pb2.DescriptorProto()
    message_descriptor.CopyToProto(message_proto)
    expected_text = (
        &#39;name: &#34;TestMessageWithCustomOptions&#34;\n&#39;
        &#39;field {\n&#39;
        &#39;  name: &#34;field1&#34;\n&#39;
        &#39;  number: 1\n&#39;
        &#39;  label: LABEL_OPTIONAL\n&#39;
        &#39;  type: TYPE_STRING\n&#39;
        &#39;  options {\n&#39;
        &#39;    ctype: CORD\n&#39;
        &#39;    [protobuf_unittest.field_opt1]: 8765432109\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;field {\n&#39;
        &#39;  name: &#34;oneof_field&#34;\n&#39;
        &#39;  number: 2\n&#39;
        &#39;  label: LABEL_OPTIONAL\n&#39;
        &#39;  type: TYPE_INT32\n&#39;
        &#39;  oneof_index: 0\n&#39;
        &#39;}\n&#39;
        &#39;enum_type {\n&#39;
        &#39;  name: &#34;AnEnum&#34;\n&#39;
        &#39;  value {\n&#39;
        &#39;    name: &#34;ANENUM_VAL1&#34;\n&#39;
        &#39;    number: 1\n&#39;
        &#39;  }\n&#39;
        &#39;  value {\n&#39;
        &#39;    name: &#34;ANENUM_VAL2&#34;\n&#39;
        &#39;    number: 2\n&#39;
        &#39;    options {\n&#39;
        &#39;      [protobuf_unittest.enum_value_opt1]: 123\n&#39;
        &#39;    }\n&#39;
        &#39;  }\n&#39;
        &#39;  options {\n&#39;
        &#39;    [protobuf_unittest.enum_opt1]: -789\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;
        &#39;options {\n&#39;
        &#39;  message_set_wire_format: false\n&#39;
        &#39;  [protobuf_unittest.message_opt1]: -56\n&#39;
        &#39;}\n&#39;
        &#39;oneof_decl {\n&#39;
        &#39;  name: &#34;AnOneof&#34;\n&#39;
        &#39;  options {\n&#39;
        &#39;    [protobuf_unittest.oneof_opt1]: -99\n&#39;
        &#39;  }\n&#39;
        &#39;}\n&#39;)
    self.assertEqual(expected_text,
                     text_format.MessageToString(message_proto))
    parsed_proto = descriptor_pb2.DescriptorProto()
    text_format.Parse(expected_text, parsed_proto)
    self.assertEqual(message_proto, parsed_proto)

  def testPrintUnknownFieldsEmbeddedMessageInBytes(self, message_module):
    inner_msg = message_module.TestAllTypes()
    inner_msg.optional_int32 = 101
    inner_msg.optional_double = 102.0
    inner_msg.optional_string = u&#39;hello&#39;
    inner_msg.optional_bytes = b&#39;103&#39;
    inner_msg.optional_nested_message.bb = 105
    inner_data = inner_msg.SerializeToString()
    outer_message = message_module.TestAllTypes()
    outer_message.optional_int32 = 101
    outer_message.optional_bytes = inner_data
    all_data = outer_message.SerializeToString()
    empty_message = message_module.TestEmptyMessage()
    empty_message.ParseFromString(all_data)

    self.assertEqual(&#39;  1: 101\n&#39;
                     &#39;  15 {\n&#39;
                     &#39;    1: 101\n&#39;
                     &#39;    12: 4636878028842991616\n&#39;
                     &#39;    14: &#34;hello&#34;\n&#39;
                     &#39;    15: &#34;103&#34;\n&#39;
                     &#39;    18 {\n&#39;
                     &#39;      1: 105\n&#39;
                     &#39;    }\n&#39;
                     &#39;  }\n&#39;,
                     text_format.MessageToString(empty_message,
                                                 indent=2,
                                                 print_unknown_fields=True))
    self.assertEqual(&#39;1: 101 &#39;
                     &#39;15 { &#39;
                     &#39;1: 101 &#39;
                     &#39;12: 4636878028842991616 &#39;
                     &#39;14: &#34;hello&#34; &#39;
                     &#39;15: &#34;103&#34; &#39;
                     &#39;18 { 1: 105 } &#39;
                     &#39;}&#39;,
                     text_format.MessageToString(empty_message,
                                                 print_unknown_fields=True,
                                                 as_one_line=True))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.VerifyPrintShortFormatRepeatedFields"><code class="name flex">
<span>def <span class="ident">VerifyPrintShortFormatRepeatedFields</span></span>(<span>self, message_module, as_one_line)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def VerifyPrintShortFormatRepeatedFields(self, message_module, as_one_line):
  message = message_module.TestAllTypes()
  message.repeated_int32.append(1)
  message.repeated_string.append(&#39;Google&#39;)
  message.repeated_string.append(&#39;Hello,World&#39;)
  message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_FOO)
  message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAR)
  message.repeated_foreign_enum.append(unittest_pb2.FOREIGN_BAZ)
  message.optional_nested_message.bb = 3
  for i in (21, 32):
    msg = message.repeated_nested_message.add()
    msg.bb = i
  expected_ascii = (
      &#39;optional_nested_message {\n  bb: 3\n}\n&#39;
      &#39;repeated_int32: [1]\n&#39;
      &#39;repeated_string: &#34;Google&#34;\n&#39;
      &#39;repeated_string: &#34;Hello,World&#34;\n&#39;
      &#39;repeated_nested_message {\n  bb: 21\n}\n&#39;
      &#39;repeated_nested_message {\n  bb: 32\n}\n&#39;
      &#39;repeated_foreign_enum: [FOREIGN_FOO, FOREIGN_BAR, FOREIGN_BAZ]\n&#39;)
  if as_one_line:
    expected_ascii = expected_ascii.replace(&#39;\n&#39;, &#39; &#39;)
    expected_ascii = re.sub(r&#39;\s+&#39;, &#39; &#39;, expected_ascii)
    expected_ascii = re.sub(r&#39;\s$&#39;, &#39;&#39;, expected_ascii)

  actual_ascii = text_format.MessageToString(
      message, use_short_repeated_primitives=True,
      as_one_line=as_one_line)
  self.CompareToGoldenText(actual_ascii, expected_ascii)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(actual_ascii, parsed_message)
  self.assertEqual(parsed_message, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testCustomOptions60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testCustomOptions(self, message_module):
  message_descriptor = (unittest_custom_options_pb2.
                        TestMessageWithCustomOptions.DESCRIPTOR)
  message_proto = descriptor_pb2.DescriptorProto()
  message_descriptor.CopyToProto(message_proto)
  expected_text = (
      &#39;name: &#34;TestMessageWithCustomOptions&#34;\n&#39;
      &#39;field {\n&#39;
      &#39;  name: &#34;field1&#34;\n&#39;
      &#39;  number: 1\n&#39;
      &#39;  label: LABEL_OPTIONAL\n&#39;
      &#39;  type: TYPE_STRING\n&#39;
      &#39;  options {\n&#39;
      &#39;    ctype: CORD\n&#39;
      &#39;    [protobuf_unittest.field_opt1]: 8765432109\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;
      &#39;field {\n&#39;
      &#39;  name: &#34;oneof_field&#34;\n&#39;
      &#39;  number: 2\n&#39;
      &#39;  label: LABEL_OPTIONAL\n&#39;
      &#39;  type: TYPE_INT32\n&#39;
      &#39;  oneof_index: 0\n&#39;
      &#39;}\n&#39;
      &#39;enum_type {\n&#39;
      &#39;  name: &#34;AnEnum&#34;\n&#39;
      &#39;  value {\n&#39;
      &#39;    name: &#34;ANENUM_VAL1&#34;\n&#39;
      &#39;    number: 1\n&#39;
      &#39;  }\n&#39;
      &#39;  value {\n&#39;
      &#39;    name: &#34;ANENUM_VAL2&#34;\n&#39;
      &#39;    number: 2\n&#39;
      &#39;    options {\n&#39;
      &#39;      [protobuf_unittest.enum_value_opt1]: 123\n&#39;
      &#39;    }\n&#39;
      &#39;  }\n&#39;
      &#39;  options {\n&#39;
      &#39;    [protobuf_unittest.enum_opt1]: -789\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;
      &#39;options {\n&#39;
      &#39;  message_set_wire_format: false\n&#39;
      &#39;  [protobuf_unittest.message_opt1]: -56\n&#39;
      &#39;}\n&#39;
      &#39;oneof_decl {\n&#39;
      &#39;  name: &#34;AnOneof&#34;\n&#39;
      &#39;  options {\n&#39;
      &#39;    [protobuf_unittest.oneof_opt1]: -99\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)
  self.assertEqual(expected_text,
                   text_format.MessageToString(message_proto))
  parsed_proto = descriptor_pb2.DescriptorProto()
  text_format.Parse(expected_text, parsed_proto)
  self.assertEqual(message_proto, parsed_proto)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testCustomOptions60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testCustomOptions(self, message_module):
  message_descriptor = (unittest_custom_options_pb2.
                        TestMessageWithCustomOptions.DESCRIPTOR)
  message_proto = descriptor_pb2.DescriptorProto()
  message_descriptor.CopyToProto(message_proto)
  expected_text = (
      &#39;name: &#34;TestMessageWithCustomOptions&#34;\n&#39;
      &#39;field {\n&#39;
      &#39;  name: &#34;field1&#34;\n&#39;
      &#39;  number: 1\n&#39;
      &#39;  label: LABEL_OPTIONAL\n&#39;
      &#39;  type: TYPE_STRING\n&#39;
      &#39;  options {\n&#39;
      &#39;    ctype: CORD\n&#39;
      &#39;    [protobuf_unittest.field_opt1]: 8765432109\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;
      &#39;field {\n&#39;
      &#39;  name: &#34;oneof_field&#34;\n&#39;
      &#39;  number: 2\n&#39;
      &#39;  label: LABEL_OPTIONAL\n&#39;
      &#39;  type: TYPE_INT32\n&#39;
      &#39;  oneof_index: 0\n&#39;
      &#39;}\n&#39;
      &#39;enum_type {\n&#39;
      &#39;  name: &#34;AnEnum&#34;\n&#39;
      &#39;  value {\n&#39;
      &#39;    name: &#34;ANENUM_VAL1&#34;\n&#39;
      &#39;    number: 1\n&#39;
      &#39;  }\n&#39;
      &#39;  value {\n&#39;
      &#39;    name: &#34;ANENUM_VAL2&#34;\n&#39;
      &#39;    number: 2\n&#39;
      &#39;    options {\n&#39;
      &#39;      [protobuf_unittest.enum_value_opt1]: 123\n&#39;
      &#39;    }\n&#39;
      &#39;  }\n&#39;
      &#39;  options {\n&#39;
      &#39;    [protobuf_unittest.enum_opt1]: -789\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;
      &#39;options {\n&#39;
      &#39;  message_set_wire_format: false\n&#39;
      &#39;  [protobuf_unittest.message_opt1]: -56\n&#39;
      &#39;}\n&#39;
      &#39;oneof_decl {\n&#39;
      &#39;  name: &#34;AnOneof&#34;\n&#39;
      &#39;  options {\n&#39;
      &#39;    [protobuf_unittest.oneof_opt1]: -99\n&#39;
      &#39;  }\n&#39;
      &#39;}\n&#39;)
  self.assertEqual(expected_text,
                   text_format.MessageToString(message_proto))
  parsed_proto = descriptor_pb2.DescriptorProto()
  text_format.Parse(expected_text, parsed_proto)
  self.assertEqual(message_proto, parsed_proto)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMessageToString60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToString(self, message_module):
  message = message_module.ForeignMessage()
  message.c = 123
  self.assertEqual(&#39;c: 123\n&#39;, str(message))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMessageToString60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToString(self, message_module):
  message = message_module.ForeignMessage()
  message.c = 123
  self.assertEqual(&#39;c: 123\n&#39;, str(message))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMessageToStringASCII60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToStringASCII(self, message_module):
  golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
  golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
  message = message_module.TestAllTypes()
  message.optional_string = golden_unicode
  message.optional_bytes = golden_bytes
  text = text_format.MessageToString(message, as_utf8=False)  # ASCII
  golden_message = (
      &#39;optional_string: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;
      &#39;optional_bytes: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;)
  self.CompareToGoldenText(text, golden_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMessageToStringASCII60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToStringASCII(self, message_module):
  golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
  golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
  message = message_module.TestAllTypes()
  message.optional_string = golden_unicode
  message.optional_bytes = golden_bytes
  text = text_format.MessageToString(message, as_utf8=False)  # ASCII
  golden_message = (
      &#39;optional_string: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;
      &#39;optional_bytes: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;)
  self.CompareToGoldenText(text, golden_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMessageToStringUnicode60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToStringUnicode(self, message_module):
  golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
  golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
  message = message_module.TestAllTypes()
  message.optional_string = golden_unicode
  message.optional_bytes = golden_bytes
  text = text_format.MessageToString(message, as_utf8=True)
  golden_message = textwrap.dedent(
      &#39;optional_string: &#34;Á short desçription and a 🍌.&#34;\n&#39;
      &#39;optional_bytes: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;)
  self.CompareToGoldenText(text, golden_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMessageToStringUnicode60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToStringUnicode(self, message_module):
  golden_unicode = u&#39;Á short desçription and a 🍌.&#39;
  golden_bytes = golden_unicode.encode(&#39;utf-8&#39;)
  message = message_module.TestAllTypes()
  message.optional_string = golden_unicode
  message.optional_bytes = golden_bytes
  text = text_format.MessageToString(message, as_utf8=True)
  golden_message = textwrap.dedent(
      &#39;optional_string: &#34;Á short desçription and a 🍌.&#34;\n&#39;
      &#39;optional_bytes: &#39;
      r&#39;&#34;\303\201 short des\303\247ription and a \360\237\215\214.&#34;&#39;
      &#39;\n&#39;)
  self.CompareToGoldenText(text, golden_message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintExotic60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExotic(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_format.MessageToString(message)),
      &#39;repeated_int64: -9223372036854775808\n&#39;
      &#39;repeated_uint64: 18446744073709551615\n&#39;
      &#39;repeated_double: 123.456\n&#39;
      &#39;repeated_double: 1.23e+22\n&#39;
      &#39;repeated_double: 1.23e-18\n&#39;
      &#39;repeated_string:&#39;
      &#39; &#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
      &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintExotic60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExotic(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_format.MessageToString(message)),
      &#39;repeated_int64: -9223372036854775808\n&#39;
      &#39;repeated_uint64: 18446744073709551615\n&#39;
      &#39;repeated_double: 123.456\n&#39;
      &#39;repeated_double: 1.23e+22\n&#39;
      &#39;repeated_double: 1.23e-18\n&#39;
      &#39;repeated_string:&#39;
      &#39; &#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
      &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExoticAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_format.MessageToString(
          message, as_one_line=True)),
      &#39;repeated_int64: -9223372036854775808&#39;
      &#39; repeated_uint64: 18446744073709551615&#39;
      &#39; repeated_double: 123.456&#39;
      &#39; repeated_double: 1.23e+22&#39;
      &#39; repeated_double: 1.23e-18&#39;
      &#39; repeated_string: &#39;
      &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;&#39;
      &#39; repeated_string: &#34;\\303\\274\\352\\234\\237&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExoticAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_format.MessageToString(
          message, as_one_line=True)),
      &#39;repeated_int64: -9223372036854775808&#39;
      &#39; repeated_uint64: 18446744073709551615&#39;
      &#39; repeated_double: 123.456&#39;
      &#39; repeated_double: 1.23e+22&#39;
      &#39; repeated_double: 1.23e-18&#39;
      &#39; repeated_string: &#39;
      &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;&#39;
      &#39; repeated_string: &#34;\\303\\274\\352\\234\\237&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExoticUnicodeSubclass(self, message_module):

  class UnicodeSub(six.text_type):
    pass

  message = message_module.TestAllTypes()
  message.repeated_string.append(UnicodeSub(u&#39;\u00fc\ua71f&#39;))
  self.CompareToGoldenText(
      text_format.MessageToString(message),
      &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintExoticUnicodeSubclass(self, message_module):

  class UnicodeSub(six.text_type):
    pass

  message = message_module.TestAllTypes()
  message.repeated_string.append(UnicodeSub(u&#39;\u00fc\ua71f&#39;))
  self.CompareToGoldenText(
      text_format.MessageToString(message),
      &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintField60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintField(self, message_module):
  message = message_module.TestAllTypes()
  field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
  value = message.optional_float
  out = text_format.TextWriter(False)
  text_format.PrintField(field, value, out)
  self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
  out.close()
  # Test Printer
  out = text_format.TextWriter(False)
  printer = text_format._Printer(out)
  printer.PrintField(field, value)
  self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintField60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintField(self, message_module):
  message = message_module.TestAllTypes()
  field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
  value = message.optional_float
  out = text_format.TextWriter(False)
  text_format.PrintField(field, value, out)
  self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
  out.close()
  # Test Printer
  out = text_format.TextWriter(False)
  printer = text_format._Printer(out)
  printer.PrintField(field, value)
  self.assertEqual(&#39;optional_float: 0.0\n&#39;, out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintFieldValue60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintFieldValue(self, message_module):
  message = message_module.TestAllTypes()
  field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
  value = message.optional_float
  out = text_format.TextWriter(False)
  text_format.PrintFieldValue(field, value, out)
  self.assertEqual(&#39;0.0&#39;, out.getvalue())
  out.close()
  # Test Printer
  out = text_format.TextWriter(False)
  printer = text_format._Printer(out)
  printer.PrintFieldValue(field, value)
  self.assertEqual(&#39;0.0&#39;, out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintFieldValue60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintFieldValue(self, message_module):
  message = message_module.TestAllTypes()
  field = message.DESCRIPTOR.fields_by_name[&#39;optional_float&#39;]
  value = message.optional_float
  out = text_format.TextWriter(False)
  text_format.PrintFieldValue(field, value, out)
  self.assertEqual(&#39;0.0&#39;, out.getvalue())
  out.close()
  # Test Printer
  out = text_format.TextWriter(False)
  printer = text_format._Printer(out)
  printer.PrintFieldValue(field, value)
  self.assertEqual(&#39;0.0&#39;, out.getvalue())
  out.close()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintFloatFormat60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintFloatFormat(self, message_module):
  # Check that float_format argument is passed to sub-message formatting.
  message = message_module.NestedTestAllTypes()
  message.payload.optional_float = 1.25
  # Check rounding at 15 significant digits
  message.payload.optional_double = -.000003456789012345678
  # Check no decimal point.
  message.payload.repeated_float.append(-5642)
  # Check no trailing zeros.
  message.payload.repeated_double.append(.000078900)
  formatted_fields = [&#39;optional_float: 1.25&#39;,
                      &#39;optional_double: -3.45678901234568e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))
  # as_one_line=True is a separate code branch where float_format is passed.
  text_message = text_format.MessageToString(message,
                                             as_one_line=True,
                                             float_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{ {0} {1} {2} {3} }}&#39;.format(*formatted_fields))

  # 32-bit 1.2 is noisy when extended to 64-bit:
  #  &gt;&gt;&gt; struct.unpack(&#39;f&#39;, struct.pack(&#39;f&#39;, 1.2))[0]
  #  1.2000000476837158
  # TODO(jieluo): change to 1.2 with cl/241634942.
  message.payload.optional_float = 1.2000000476837158
  formatted_fields = [&#39;optional_float: 1.2&#39;,
                      &#39;optional_double: -3.45678901234568e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;,
                                             double_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))

  # Test only set float_format affect both float and double fields.
  formatted_fields = [&#39;optional_float: 1.2&#39;,
                      &#39;optional_double: -3.456789e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))

  # Test default float_format has 8 valid digits.
  message.payload.optional_float = 1.2345678912
  message.payload.optional_double = 1.2345678912
  formatted_fields = [&#39;optional_float: 1.2345679&#39;,
                      &#39;optional_double: 1.2345678912&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintFloatFormat60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintFloatFormat(self, message_module):
  # Check that float_format argument is passed to sub-message formatting.
  message = message_module.NestedTestAllTypes()
  message.payload.optional_float = 1.25
  # Check rounding at 15 significant digits
  message.payload.optional_double = -.000003456789012345678
  # Check no decimal point.
  message.payload.repeated_float.append(-5642)
  # Check no trailing zeros.
  message.payload.repeated_double.append(.000078900)
  formatted_fields = [&#39;optional_float: 1.25&#39;,
                      &#39;optional_double: -3.45678901234568e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))
  # as_one_line=True is a separate code branch where float_format is passed.
  text_message = text_format.MessageToString(message,
                                             as_one_line=True,
                                             float_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{ {0} {1} {2} {3} }}&#39;.format(*formatted_fields))

  # 32-bit 1.2 is noisy when extended to 64-bit:
  #  &gt;&gt;&gt; struct.unpack(&#39;f&#39;, struct.pack(&#39;f&#39;, 1.2))[0]
  #  1.2000000476837158
  # TODO(jieluo): change to 1.2 with cl/241634942.
  message.payload.optional_float = 1.2000000476837158
  formatted_fields = [&#39;optional_float: 1.2&#39;,
                      &#39;optional_double: -3.45678901234568e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;,
                                             double_format=&#39;.15g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))

  # Test only set float_format affect both float and double fields.
  formatted_fields = [&#39;optional_float: 1.2&#39;,
                      &#39;optional_double: -3.456789e-6&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message, float_format=&#39;.7g&#39;)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))

  # Test default float_format has 8 valid digits.
  message.payload.optional_float = 1.2345678912
  message.payload.optional_double = 1.2345678912
  formatted_fields = [&#39;optional_float: 1.2345679&#39;,
                      &#39;optional_double: 1.2345678912&#39;,
                      &#39;repeated_float: -5642&#39;, &#39;repeated_double: 7.89e-5&#39;]
  text_message = text_format.MessageToString(message)
  self.CompareToGoldenText(
      self.RemoveRedundantZeros(text_message),
      &#39;payload {{\n  {0}\n  {1}\n  {2}\n  {3}\n}}\n&#39;.format(
          *formatted_fields))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintNestedMessageAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;repeated_nested_message { bb: 42 }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintNestedMessageAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  msg = message.repeated_nested_message.add()
  msg.bb = 42
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;repeated_nested_message { bb: 42 }&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintNestedNewLineInStringAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.optional_string = &#39;a\nnew\nline&#39;
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;optional_string: &#34;a\\nnew\\nline&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintNestedNewLineInStringAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.optional_string = &#39;a\nnew\nline&#39;
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;optional_string: &#34;a\\nnew\\nline&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintRawUtf8String60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintRawUtf8String(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  text = text_format.MessageToString(message, as_utf8=True)
  golden_unicode = u&#39;repeated_string: &#34;\u00fc\\t\ua71f&#34;\n&#39;
  golden_text = golden_unicode if six.PY3 else golden_unicode.encode(&#39;utf-8&#39;)
  # MessageToString always returns a native str.
  self.CompareToGoldenText(text, golden_text)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintRawUtf8String60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintRawUtf8String(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  text = text_format.MessageToString(message, as_utf8=True)
  golden_unicode = u&#39;repeated_string: &#34;\u00fc\\t\ua71f&#34;\n&#39;
  golden_text = golden_unicode if six.PY3 else golden_unicode.encode(&#39;utf-8&#39;)
  # MessageToString always returns a native str.
  self.CompareToGoldenText(text, golden_text)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintRepeatedFieldsAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int32.append(1)
  message.repeated_int32.append(1)
  message.repeated_int32.append(3)
  message.repeated_string.append(&#39;Google&#39;)
  message.repeated_string.append(&#39;Zurich&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;repeated_int32: 1 repeated_int32: 1 repeated_int32: 3 &#39;
      &#39;repeated_string: &#34;Google&#34; repeated_string: &#34;Zurich&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintRepeatedFieldsAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int32.append(1)
  message.repeated_int32.append(1)
  message.repeated_int32.append(3)
  message.repeated_string.append(&#39;Google&#39;)
  message.repeated_string.append(&#39;Zurich&#39;)
  self.CompareToGoldenText(
      text_format.MessageToString(message, as_one_line=True),
      &#39;repeated_int32: 1 repeated_int32: 1 repeated_int32: 3 &#39;
      &#39;repeated_string: &#34;Google&#34; repeated_string: &#34;Zurich&#34;&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintShortFormatRepeatedFields(self, message_module):
  self.VerifyPrintShortFormatRepeatedFields(message_module, False)
  self.VerifyPrintShortFormatRepeatedFields(message_module, True)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintShortFormatRepeatedFields(self, message_module):
  self.VerifyPrintShortFormatRepeatedFields(message_module, False)
  self.VerifyPrintShortFormatRepeatedFields(message_module, True)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintUnknownFieldsEmbeddedMessageInBytes(self, message_module):
  inner_msg = message_module.TestAllTypes()
  inner_msg.optional_int32 = 101
  inner_msg.optional_double = 102.0
  inner_msg.optional_string = u&#39;hello&#39;
  inner_msg.optional_bytes = b&#39;103&#39;
  inner_msg.optional_nested_message.bb = 105
  inner_data = inner_msg.SerializeToString()
  outer_message = message_module.TestAllTypes()
  outer_message.optional_int32 = 101
  outer_message.optional_bytes = inner_data
  all_data = outer_message.SerializeToString()
  empty_message = message_module.TestEmptyMessage()
  empty_message.ParseFromString(all_data)

  self.assertEqual(&#39;  1: 101\n&#39;
                   &#39;  15 {\n&#39;
                   &#39;    1: 101\n&#39;
                   &#39;    12: 4636878028842991616\n&#39;
                   &#39;    14: &#34;hello&#34;\n&#39;
                   &#39;    15: &#34;103&#34;\n&#39;
                   &#39;    18 {\n&#39;
                   &#39;      1: 105\n&#39;
                   &#39;    }\n&#39;
                   &#39;  }\n&#39;,
                   text_format.MessageToString(empty_message,
                                               indent=2,
                                               print_unknown_fields=True))
  self.assertEqual(&#39;1: 101 &#39;
                   &#39;15 { &#39;
                   &#39;1: 101 &#39;
                   &#39;12: 4636878028842991616 &#39;
                   &#39;14: &#34;hello&#34; &#39;
                   &#39;15: &#34;103&#34; &#39;
                   &#39;18 { 1: 105 } &#39;
                   &#39;}&#39;,
                   text_format.MessageToString(empty_message,
                                               print_unknown_fields=True,
                                               as_one_line=True))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintUnknownFieldsEmbeddedMessageInBytes(self, message_module):
  inner_msg = message_module.TestAllTypes()
  inner_msg.optional_int32 = 101
  inner_msg.optional_double = 102.0
  inner_msg.optional_string = u&#39;hello&#39;
  inner_msg.optional_bytes = b&#39;103&#39;
  inner_msg.optional_nested_message.bb = 105
  inner_data = inner_msg.SerializeToString()
  outer_message = message_module.TestAllTypes()
  outer_message.optional_int32 = 101
  outer_message.optional_bytes = inner_data
  all_data = outer_message.SerializeToString()
  empty_message = message_module.TestEmptyMessage()
  empty_message.ParseFromString(all_data)

  self.assertEqual(&#39;  1: 101\n&#39;
                   &#39;  15 {\n&#39;
                   &#39;    1: 101\n&#39;
                   &#39;    12: 4636878028842991616\n&#39;
                   &#39;    14: &#34;hello&#34;\n&#39;
                   &#39;    15: &#34;103&#34;\n&#39;
                   &#39;    18 {\n&#39;
                   &#39;      1: 105\n&#39;
                   &#39;    }\n&#39;
                   &#39;  }\n&#39;,
                   text_format.MessageToString(empty_message,
                                               indent=2,
                                               print_unknown_fields=True))
  self.assertEqual(&#39;1: 101 &#39;
                   &#39;15 { &#39;
                   &#39;1: 101 &#39;
                   &#39;12: 4636878028842991616 &#39;
                   &#39;14: &#34;hello&#34; &#39;
                   &#39;15: &#34;103&#34; &#39;
                   &#39;18 { 1: 105 } &#39;
                   &#39;}&#39;,
                   text_format.MessageToString(empty_message,
                                               print_unknown_fields=True,
                                               as_one_line=True))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testRoundTripExoticAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)

  # Test as_utf8 = False.
  wire_text = text_format.MessageToString(message,
                                          as_one_line=True,
                                          as_utf8=False)
  parsed_message = message_module.TestAllTypes()
  r = text_format.Parse(wire_text, parsed_message)
  self.assertIs(r, parsed_message)
  self.assertEqual(message, parsed_message)

  # Test as_utf8 = True.
  wire_text = text_format.MessageToString(message,
                                          as_one_line=True,
                                          as_utf8=True)
  parsed_message = message_module.TestAllTypes()
  r = text_format.Parse(wire_text, parsed_message)
  self.assertIs(r, parsed_message)
  self.assertEqual(message, parsed_message,
                   &#39;\n%s != %s&#39; % (message, parsed_message))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testRoundTripExoticAsOneLine(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_int64.append(-9223372036854775808)
  message.repeated_uint64.append(18446744073709551615)
  message.repeated_double.append(123.456)
  message.repeated_double.append(1.23e22)
  message.repeated_double.append(1.23e-18)
  message.repeated_string.append(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;)
  message.repeated_string.append(u&#39;\u00fc\ua71f&#39;)

  # Test as_utf8 = False.
  wire_text = text_format.MessageToString(message,
                                          as_one_line=True,
                                          as_utf8=False)
  parsed_message = message_module.TestAllTypes()
  r = text_format.Parse(wire_text, parsed_message)
  self.assertIs(r, parsed_message)
  self.assertEqual(message, parsed_message)

  # Test as_utf8 = True.
  wire_text = text_format.MessageToString(message,
                                          as_one_line=True,
                                          as_utf8=True)
  parsed_message = message_module.TestAllTypes()
  r = text_format.Parse(wire_text, parsed_message)
  self.assertIs(r, parsed_message)
  self.assertEqual(message, parsed_message,
                   &#39;\n%s != %s&#39; % (message, parsed_message))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests"><code class="flex name class">
<span>class <span class="ident">TextFormatMessageToTextBytesTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextFormatMessageToTextBytesTests(TextFormatBase):

  def testMessageToBytes(self, message_module):
    message = message_module.ForeignMessage()
    message.c = 123
    self.assertEqual(b&#39;c: 123\n&#39;, text_format.MessageToBytes(message))

  def testRawUtf8RoundTrip(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    utf8_text = text_format.MessageToBytes(message, as_utf8=True)
    golden_bytes = b&#39;repeated_string: &#34;\xc3\xbc\\t\xea\x9c\x9f&#34;\n&#39;
    self.CompareToGoldenText(utf8_text, golden_bytes)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(utf8_text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))

  def testEscapedUtf8ASCIIRoundTrip(self, message_module):
    message = message_module.TestAllTypes()
    message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
    ascii_text = text_format.MessageToBytes(message)  # as_utf8=False default
    golden_bytes = b&#39;repeated_string: &#34;\\303\\274\\t\\352\\234\\237&#34;\n&#39;
    self.CompareToGoldenText(ascii_text, golden_bytes)
    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(
        message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
        (message, parsed_message, message.repeated_string[0],
         parsed_message.repeated_string[0]))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testEscapedUtf8ASCIIRoundTrip(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  ascii_text = text_format.MessageToBytes(message)  # as_utf8=False default
  golden_bytes = b&#39;repeated_string: &#34;\\303\\274\\t\\352\\234\\237&#34;\n&#39;
  self.CompareToGoldenText(ascii_text, golden_bytes)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testEscapedUtf8ASCIIRoundTrip(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  ascii_text = text_format.MessageToBytes(message)  # as_utf8=False default
  golden_bytes = b&#39;repeated_string: &#34;\\303\\274\\t\\352\\234\\237&#34;\n&#39;
  self.CompareToGoldenText(ascii_text, golden_bytes)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testMessageToBytes60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToBytes(self, message_module):
  message = message_module.ForeignMessage()
  message.c = 123
  self.assertEqual(b&#39;c: 123\n&#39;, text_format.MessageToBytes(message))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testMessageToBytes60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToBytes(self, message_module):
  message = message_module.ForeignMessage()
  message.c = 123
  self.assertEqual(b&#39;c: 123\n&#39;, text_format.MessageToBytes(message))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testRawUtf8RoundTrip(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  utf8_text = text_format.MessageToBytes(message, as_utf8=True)
  golden_bytes = b&#39;repeated_string: &#34;\xc3\xbc\\t\xea\x9c\x9f&#34;\n&#39;
  self.CompareToGoldenText(utf8_text, golden_bytes)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(utf8_text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testRawUtf8RoundTrip(self, message_module):
  message = message_module.TestAllTypes()
  message.repeated_string.append(u&#39;\u00fc\t\ua71f&#39;)
  utf8_text = text_format.MessageToBytes(message, as_utf8=True)
  golden_bytes = b&#39;repeated_string: &#34;\xc3\xbc\\t\xea\x9c\x9f&#34;\n&#39;
  self.CompareToGoldenText(utf8_text, golden_bytes)
  parsed_message = message_module.TestAllTypes()
  text_format.Parse(utf8_text, parsed_message)
  self.assertEqual(
      message, parsed_message, &#39;\n%s != %s  (%s != %s)&#39; %
      (message, parsed_message, message.repeated_string[0],
       parsed_message.repeated_string[0]))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests"><code class="flex name class">
<span>class <span class="ident">TextFormatParserTests</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TextFormatParserTests(TextFormatBase):

  def testParseAllFields(self, message_module):
    message = message_module.TestAllTypes()
    test_util.SetAllFields(message)
    ascii_text = text_format.MessageToString(message)

    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

  def testParseAndMergeUtf8(self, message_module):
    message = message_module.TestAllTypes()
    test_util.SetAllFields(message)
    ascii_text = text_format.MessageToString(message)
    ascii_text = ascii_text.encode(&#39;utf-8&#39;)

    parsed_message = message_module.TestAllTypes()
    text_format.Parse(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

    parsed_message.Clear()
    text_format.Merge(ascii_text, parsed_message)
    self.assertEqual(message, parsed_message)
    if message_module is unittest_pb2:
      test_util.ExpectAllFieldsSet(self, message)

    msg2 = message_module.TestAllTypes()
    text = (u&#39;optional_string: &#34;café&#34;&#39;)
    text_format.Merge(text, msg2)
    self.assertEqual(msg2.optional_string, u&#39;café&#39;)
    msg2.Clear()
    self.assertEqual(msg2.optional_string, u&#39;&#39;)
    text_format.Parse(text, msg2)
    self.assertEqual(msg2.optional_string, u&#39;café&#39;)

  def testParseDoubleToFloat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_float: 3.4028235e+39\n&#39;
            &#39;repeated_float: 1.4028235e-39\n&#39;)
    text_format.Parse(text, message)
    self.assertEqual(message.repeated_float[0], float(&#39;inf&#39;))
    self.assertAlmostEqual(message.repeated_float[1], 1.4028235e-39)

  def testParseExotic(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: -9223372036854775808\n&#39;
            &#39;repeated_uint64: 18446744073709551615\n&#39;
            &#39;repeated_double: 123.456\n&#39;
            &#39;repeated_double: 1.23e+22\n&#39;
            &#39;repeated_double: 1.23e-18\n&#39;
            &#39;repeated_string: \n&#39;
            &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
            &#39;repeated_string: &#34;foo&#34; \&#39;corge\&#39; &#34;grault&#34;\n&#39;
            &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;
            &#39;repeated_string: &#34;\\xc3\\xbc&#34;\n&#39;
            &#39;repeated_string: &#34;\xc3\xbc&#34;\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(-9223372036854775808, message.repeated_int64[0])
    self.assertEqual(18446744073709551615, message.repeated_uint64[0])
    self.assertEqual(123.456, message.repeated_double[0])
    self.assertEqual(1.23e22, message.repeated_double[1])
    self.assertEqual(1.23e-18, message.repeated_double[2])
    self.assertEqual(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;, message.repeated_string[0])
    self.assertEqual(&#39;foocorgegrault&#39;, message.repeated_string[1])
    self.assertEqual(u&#39;\u00fc\ua71f&#39;, message.repeated_string[2])
    self.assertEqual(u&#39;\u00fc&#39;, message.repeated_string[3])

  def testParseTrailingCommas(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: 100;\n&#39;
            &#39;repeated_int64: 200;\n&#39;
            &#39;repeated_int64: 300,\n&#39;
            &#39;repeated_string: &#34;one&#34;,\n&#39;
            &#39;repeated_string: &#34;two&#34;;\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_int64[0])
    self.assertEqual(200, message.repeated_int64[1])
    self.assertEqual(300, message.repeated_int64[2])
    self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
    self.assertEqual(u&#39;two&#39;, message.repeated_string[1])

  def testParseRepeatedScalarShortFormat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_int64: [100, 200];\n&#39;
            &#39;repeated_int64: []\n&#39;
            &#39;repeated_int64: 300,\n&#39;
            &#39;repeated_string: [&#34;one&#34;, &#34;two&#34;];\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_int64[0])
    self.assertEqual(200, message.repeated_int64[1])
    self.assertEqual(300, message.repeated_int64[2])
    self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
    self.assertEqual(u&#39;two&#39;, message.repeated_string[1])

  def testParseRepeatedMessageShortFormat(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;repeated_nested_message: [{bb: 100}, {bb: 200}],\n&#39;
            &#39;repeated_nested_message: {bb: 300}\n&#39;
            &#39;repeated_nested_message [{bb: 400}];\n&#39;)
    text_format.Parse(text, message)

    self.assertEqual(100, message.repeated_nested_message[0].bb)
    self.assertEqual(200, message.repeated_nested_message[1].bb)
    self.assertEqual(300, message.repeated_nested_message[2].bb)
    self.assertEqual(400, message.repeated_nested_message[3].bb)

  def testParseEmptyText(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;&#39;
    text_format.Parse(text, message)
    self.assertEqual(message_module.TestAllTypes(), message)

  def testParseInvalidUtf8(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;repeated_string: &#34;\\xc3\\xc3&#34;&#39;
    with self.assertRaises(text_format.ParseError) as e:
      text_format.Parse(text, message)
    self.assertEqual(e.exception.GetLine(), 1)
    self.assertEqual(e.exception.GetColumn(), 28)

  def testParseSingleWord(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;foo&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;foo&#34;.&#39;), text_format.Parse, text, message)

  def testParseUnknownField(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;unknown_field: 8\n&#39;
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
        r&#39;&#34;unknown_field&#34;.&#39;), text_format.Parse, text, message)
    text = (&#39;optional_int32: 123\n&#39;
            &#39;unknown_field: 8\n&#39;
            &#39;optional_nested_message { bb: 45 }&#39;)
    text_format.Parse(text, message, allow_unknown_field=True)
    self.assertEqual(message.optional_nested_message.bb, 45)
    self.assertEqual(message.optional_int32, 123)

  def testParseBadEnumValue(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;optional_nested_enum: BARR&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;1:23 : \&#39;optional_nested_enum: BARR\&#39;: &#39;
                           r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                           r&#39;has no value named BARR.&#39;), text_format.Parse,
                          text, message)

  def testParseBadIntValue(self, message_module):
    message = message_module.TestAllTypes()
    text = &#39;optional_int32: bork&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (&#39;1:17 : \&#39;optional_int32: bork\&#39;: &#39;
                           &#39;Couldn\&#39;t parse integer: bork&#39;),
                          text_format.Parse, text, message)

  def testParseStringFieldUnescape(self, message_module):
    message = message_module.TestAllTypes()
    text = r&#39;&#39;&#39;repeated_string: &#34;\xf\x62&#34;
               repeated_string: &#34;\\xf\\x62&#34;
               repeated_string: &#34;\\\xf\\\x62&#34;
               repeated_string: &#34;\\\\xf\\\\x62&#34;
               repeated_string: &#34;\\\\\xf\\\\\x62&#34;
               repeated_string: &#34;\x5cx20&#34;&#39;&#39;&#39;

    text_format.Parse(text, message)

    SLASH = &#39;\\&#39;
    self.assertEqual(&#39;\x0fb&#39;, message.repeated_string[0])
    self.assertEqual(SLASH + &#39;xf&#39; + SLASH + &#39;x62&#39;, message.repeated_string[1])
    self.assertEqual(SLASH + &#39;\x0f&#39; + SLASH + &#39;b&#39;, message.repeated_string[2])
    self.assertEqual(SLASH + SLASH + &#39;xf&#39; + SLASH + SLASH + &#39;x62&#39;,
                     message.repeated_string[3])
    self.assertEqual(SLASH + SLASH + &#39;\x0f&#39; + SLASH + SLASH + &#39;b&#39;,
                     message.repeated_string[4])
    self.assertEqual(SLASH + &#39;x20&#39;, message.repeated_string[5])

  def testParseOneof(self, message_module):
    m = message_module.TestAllTypes()
    m.oneof_uint32 = 11
    m2 = message_module.TestAllTypes()
    text_format.Parse(text_format.MessageToString(m), m2)
    self.assertEqual(&#39;oneof_uint32&#39;, m2.WhichOneof(&#39;oneof_field&#39;))

  def testParseMultipleOneof(self, message_module):
    m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
    m2 = message_module.TestAllTypes()
    with six.assertRaisesRegex(self, text_format.ParseError,
                               &#39; is specified along with field &#39;):
      text_format.Parse(m_string, m2)

  # This example contains non-ASCII codepoint unicode data as literals
  # which should come through as utf-8 for bytes, and as the unicode
  # itself for string fields.  It also demonstrates escaped binary data.
  # The ur&#34;&#34; string prefix is unfortunately missing from Python 3
  # so we resort to double escaping our \s so that they come through.
  _UNICODE_SAMPLE = u&#34;&#34;&#34;
      optional_bytes: &#39;Á short desçription&#39;
      optional_string: &#39;Á short desçription&#39;
      repeated_bytes: &#39;\\303\\201 short des\\303\\247ription&#39;
      repeated_bytes: &#39;\\x12\\x34\\x56\\x78\\x90\\xab\\xcd\\xef&#39;
      repeated_string: &#39;\\xd0\\x9f\\xd1\\x80\\xd0\\xb8\\xd0\\xb2\\xd0\\xb5\\xd1\\x82&#39;
      &#34;&#34;&#34;
  _BYTES_SAMPLE = _UNICODE_SAMPLE.encode(&#39;utf-8&#39;)
  _GOLDEN_UNICODE = u&#39;Á short desçription&#39;
  _GOLDEN_BYTES = _GOLDEN_UNICODE.encode(&#39;utf-8&#39;)
  _GOLDEN_BYTES_1 = b&#39;\x12\x34\x56\x78\x90\xab\xcd\xef&#39;
  _GOLDEN_STR_0 = u&#39;Привет&#39;

  def testParseUnicode(self, message_module):
    m = message_module.TestAllTypes()
    text_format.Parse(self._UNICODE_SAMPLE, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
    # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
    self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
    # repeated_string[0] contained \ escaped data representing the UTF-8
    # representation of _GOLDEN_STR_0 - it needs to decode as such.
    self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)

  def testParseBytes(self, message_module):
    m = message_module.TestAllTypes()
    text_format.Parse(self._BYTES_SAMPLE, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
    # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
    self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
    # repeated_string[0] contained \ escaped data representing the UTF-8
    # representation of _GOLDEN_STR_0 - it needs to decode as such.
    self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)

  def testFromBytesFile(self, message_module):
    m = message_module.TestAllTypes()
    f = io.BytesIO(self._BYTES_SAMPLE)
    text_format.ParseLines(f, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromUnicodeFile(self, message_module):
    m = message_module.TestAllTypes()
    f = io.StringIO(self._UNICODE_SAMPLE)
    text_format.ParseLines(f, m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromBytesLines(self, message_module):
    m = message_module.TestAllTypes()
    text_format.ParseLines(self._BYTES_SAMPLE.split(b&#39;\n&#39;), m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testFromUnicodeLines(self, message_module):
    m = message_module.TestAllTypes()
    text_format.ParseLines(self._UNICODE_SAMPLE.split(u&#39;\n&#39;), m)
    self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
    self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
    self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)

  def testParseDuplicateMessages(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_nested_message { bb: 1 } &#39;
            &#39;optional_nested_message { bb: 2 }&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:59 : Message type &#34;\w+.TestAllTypes&#34; &#39;
        r&#39;should not have multiple &#34;optional_nested_message&#34; fields.&#39;),
                          text_format.Parse, text,
                          message)

  def testParseDuplicateScalars(self, message_module):
    message = message_module.TestAllTypes()
    text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
    six.assertRaisesRegex(self, text_format.ParseError, (
        r&#39;1:36 : Message type &#34;\w+.TestAllTypes&#34; should not &#39;
        r&#39;have multiple &#34;optional_int32&#34; fields.&#39;), text_format.Parse, text,
                          message)

  def testParseExistingScalarInMessage(self, message_module):
    message = message_module.TestAllTypes(optional_int32=42)
    text = &#39;optional_int32: 67&#39;
    six.assertRaisesRegex(self, text_format.ParseError,
                          (r&#39;Message type &#34;\w+.TestAllTypes&#34; should not &#39;
                           r&#39;have multiple &#34;optional_int32&#34; fields.&#39;),
                          text_format.Parse, text, message)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testFromBytesFile60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromBytesFile(self, message_module):
  m = message_module.TestAllTypes()
  f = io.BytesIO(self._BYTES_SAMPLE)
  text_format.ParseLines(f, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testFromBytesFile60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromBytesFile(self, message_module):
  m = message_module.TestAllTypes()
  f = io.BytesIO(self._BYTES_SAMPLE)
  text_format.ParseLines(f, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testFromBytesLines60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromBytesLines(self, message_module):
  m = message_module.TestAllTypes()
  text_format.ParseLines(self._BYTES_SAMPLE.split(b&#39;\n&#39;), m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testFromBytesLines60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromBytesLines(self, message_module):
  m = message_module.TestAllTypes()
  text_format.ParseLines(self._BYTES_SAMPLE.split(b&#39;\n&#39;), m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testFromUnicodeFile60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromUnicodeFile(self, message_module):
  m = message_module.TestAllTypes()
  f = io.StringIO(self._UNICODE_SAMPLE)
  text_format.ParseLines(f, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testFromUnicodeFile60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromUnicodeFile(self, message_module):
  m = message_module.TestAllTypes()
  f = io.StringIO(self._UNICODE_SAMPLE)
  text_format.ParseLines(f, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testFromUnicodeLines60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromUnicodeLines(self, message_module):
  m = message_module.TestAllTypes()
  text_format.ParseLines(self._UNICODE_SAMPLE.split(u&#39;\n&#39;), m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testFromUnicodeLines60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testFromUnicodeLines(self, message_module):
  m = message_module.TestAllTypes()
  text_format.ParseLines(self._UNICODE_SAMPLE.split(u&#39;\n&#39;), m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseAllFields60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAllFields(self, message_module):
  message = message_module.TestAllTypes()
  test_util.SetAllFields(message)
  ascii_text = text_format.MessageToString(message)

  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseAllFields60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAllFields(self, message_module):
  message = message_module.TestAllTypes()
  test_util.SetAllFields(message)
  ascii_text = text_format.MessageToString(message)

  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseAndMergeUtf860088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAndMergeUtf8(self, message_module):
  message = message_module.TestAllTypes()
  test_util.SetAllFields(message)
  ascii_text = text_format.MessageToString(message)
  ascii_text = ascii_text.encode(&#39;utf-8&#39;)

  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)

  parsed_message.Clear()
  text_format.Merge(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)

  msg2 = message_module.TestAllTypes()
  text = (u&#39;optional_string: &#34;café&#34;&#39;)
  text_format.Merge(text, msg2)
  self.assertEqual(msg2.optional_string, u&#39;café&#39;)
  msg2.Clear()
  self.assertEqual(msg2.optional_string, u&#39;&#39;)
  text_format.Parse(text, msg2)
  self.assertEqual(msg2.optional_string, u&#39;café&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseAndMergeUtf860088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseAndMergeUtf8(self, message_module):
  message = message_module.TestAllTypes()
  test_util.SetAllFields(message)
  ascii_text = text_format.MessageToString(message)
  ascii_text = ascii_text.encode(&#39;utf-8&#39;)

  parsed_message = message_module.TestAllTypes()
  text_format.Parse(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)

  parsed_message.Clear()
  text_format.Merge(ascii_text, parsed_message)
  self.assertEqual(message, parsed_message)
  if message_module is unittest_pb2:
    test_util.ExpectAllFieldsSet(self, message)

  msg2 = message_module.TestAllTypes()
  text = (u&#39;optional_string: &#34;café&#34;&#39;)
  text_format.Merge(text, msg2)
  self.assertEqual(msg2.optional_string, u&#39;café&#39;)
  msg2.Clear()
  self.assertEqual(msg2.optional_string, u&#39;&#39;)
  text_format.Parse(text, msg2)
  self.assertEqual(msg2.optional_string, u&#39;café&#39;)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseBadEnumValue60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadEnumValue(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;optional_nested_enum: BARR&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (r&#39;1:23 : \&#39;optional_nested_enum: BARR\&#39;: &#39;
                         r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                         r&#39;has no value named BARR.&#39;), text_format.Parse,
                        text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseBadEnumValue60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadEnumValue(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;optional_nested_enum: BARR&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (r&#39;1:23 : \&#39;optional_nested_enum: BARR\&#39;: &#39;
                         r&#39;Enum type &#34;\w+.TestAllTypes.NestedEnum&#34; &#39;
                         r&#39;has no value named BARR.&#39;), text_format.Parse,
                        text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseBadIntValue60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadIntValue(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;optional_int32: bork&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (&#39;1:17 : \&#39;optional_int32: bork\&#39;: &#39;
                         &#39;Couldn\&#39;t parse integer: bork&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseBadIntValue60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBadIntValue(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;optional_int32: bork&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (&#39;1:17 : \&#39;optional_int32: bork\&#39;: &#39;
                         &#39;Couldn\&#39;t parse integer: bork&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseBytes60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBytes(self, message_module):
  m = message_module.TestAllTypes()
  text_format.Parse(self._BYTES_SAMPLE, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
  # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
  self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
  # repeated_string[0] contained \ escaped data representing the UTF-8
  # representation of _GOLDEN_STR_0 - it needs to decode as such.
  self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseBytes60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseBytes(self, message_module):
  m = message_module.TestAllTypes()
  text_format.Parse(self._BYTES_SAMPLE, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
  # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
  self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
  # repeated_string[0] contained \ escaped data representing the UTF-8
  # representation of _GOLDEN_STR_0 - it needs to decode as such.
  self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseDoubleToFloat60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDoubleToFloat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_float: 3.4028235e+39\n&#39;
          &#39;repeated_float: 1.4028235e-39\n&#39;)
  text_format.Parse(text, message)
  self.assertEqual(message.repeated_float[0], float(&#39;inf&#39;))
  self.assertAlmostEqual(message.repeated_float[1], 1.4028235e-39)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseDoubleToFloat60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDoubleToFloat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_float: 3.4028235e+39\n&#39;
          &#39;repeated_float: 1.4028235e-39\n&#39;)
  text_format.Parse(text, message)
  self.assertEqual(message.repeated_float[0], float(&#39;inf&#39;))
  self.assertAlmostEqual(message.repeated_float[1], 1.4028235e-39)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseDuplicateMessages60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateMessages(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_nested_message { bb: 1 } &#39;
          &#39;optional_nested_message { bb: 2 }&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:59 : Message type &#34;\w+.TestAllTypes&#34; &#39;
      r&#39;should not have multiple &#34;optional_nested_message&#34; fields.&#39;),
                        text_format.Parse, text,
                        message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseDuplicateMessages60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateMessages(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_nested_message { bb: 1 } &#39;
          &#39;optional_nested_message { bb: 2 }&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:59 : Message type &#34;\w+.TestAllTypes&#34; &#39;
      r&#39;should not have multiple &#34;optional_nested_message&#34; fields.&#39;),
                        text_format.Parse, text,
                        message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseDuplicateScalars60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateScalars(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:36 : Message type &#34;\w+.TestAllTypes&#34; should not &#39;
      r&#39;have multiple &#34;optional_int32&#34; fields.&#39;), text_format.Parse, text,
                        message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseDuplicateScalars60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseDuplicateScalars(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;optional_int32: 42 &#39; &#39;optional_int32: 67&#39;)
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:36 : Message type &#34;\w+.TestAllTypes&#34; should not &#39;
      r&#39;have multiple &#34;optional_int32&#34; fields.&#39;), text_format.Parse, text,
                        message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseEmptyText60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseEmptyText(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;&#39;
  text_format.Parse(text, message)
  self.assertEqual(message_module.TestAllTypes(), message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseEmptyText60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseEmptyText(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;&#39;
  text_format.Parse(text, message)
  self.assertEqual(message_module.TestAllTypes(), message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseExistingScalarInMessage(self, message_module):
  message = message_module.TestAllTypes(optional_int32=42)
  text = &#39;optional_int32: 67&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (r&#39;Message type &#34;\w+.TestAllTypes&#34; should not &#39;
                         r&#39;have multiple &#34;optional_int32&#34; fields.&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseExistingScalarInMessage(self, message_module):
  message = message_module.TestAllTypes(optional_int32=42)
  text = &#39;optional_int32: 67&#39;
  six.assertRaisesRegex(self, text_format.ParseError,
                        (r&#39;Message type &#34;\w+.TestAllTypes&#34; should not &#39;
                         r&#39;have multiple &#34;optional_int32&#34; fields.&#39;),
                        text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseExotic60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseExotic(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: -9223372036854775808\n&#39;
          &#39;repeated_uint64: 18446744073709551615\n&#39;
          &#39;repeated_double: 123.456\n&#39;
          &#39;repeated_double: 1.23e+22\n&#39;
          &#39;repeated_double: 1.23e-18\n&#39;
          &#39;repeated_string: \n&#39;
          &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
          &#39;repeated_string: &#34;foo&#34; \&#39;corge\&#39; &#34;grault&#34;\n&#39;
          &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;
          &#39;repeated_string: &#34;\\xc3\\xbc&#34;\n&#39;
          &#39;repeated_string: &#34;\xc3\xbc&#34;\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(-9223372036854775808, message.repeated_int64[0])
  self.assertEqual(18446744073709551615, message.repeated_uint64[0])
  self.assertEqual(123.456, message.repeated_double[0])
  self.assertEqual(1.23e22, message.repeated_double[1])
  self.assertEqual(1.23e-18, message.repeated_double[2])
  self.assertEqual(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;, message.repeated_string[0])
  self.assertEqual(&#39;foocorgegrault&#39;, message.repeated_string[1])
  self.assertEqual(u&#39;\u00fc\ua71f&#39;, message.repeated_string[2])
  self.assertEqual(u&#39;\u00fc&#39;, message.repeated_string[3])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseExotic60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseExotic(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: -9223372036854775808\n&#39;
          &#39;repeated_uint64: 18446744073709551615\n&#39;
          &#39;repeated_double: 123.456\n&#39;
          &#39;repeated_double: 1.23e+22\n&#39;
          &#39;repeated_double: 1.23e-18\n&#39;
          &#39;repeated_string: \n&#39;
          &#39;&#34;\\000\\001\\007\\010\\014\\n\\r\\t\\013\\\\\\\&#39;\\&#34;&#34;\n&#39;
          &#39;repeated_string: &#34;foo&#34; \&#39;corge\&#39; &#34;grault&#34;\n&#39;
          &#39;repeated_string: &#34;\\303\\274\\352\\234\\237&#34;\n&#39;
          &#39;repeated_string: &#34;\\xc3\\xbc&#34;\n&#39;
          &#39;repeated_string: &#34;\xc3\xbc&#34;\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(-9223372036854775808, message.repeated_int64[0])
  self.assertEqual(18446744073709551615, message.repeated_uint64[0])
  self.assertEqual(123.456, message.repeated_double[0])
  self.assertEqual(1.23e22, message.repeated_double[1])
  self.assertEqual(1.23e-18, message.repeated_double[2])
  self.assertEqual(&#39;\000\001\a\b\f\n\r\t\v\\\&#39;&#34;&#39;, message.repeated_string[0])
  self.assertEqual(&#39;foocorgegrault&#39;, message.repeated_string[1])
  self.assertEqual(u&#39;\u00fc\ua71f&#39;, message.repeated_string[2])
  self.assertEqual(u&#39;\u00fc&#39;, message.repeated_string[3])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseInvalidUtf860088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseInvalidUtf8(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;repeated_string: &#34;\\xc3\\xc3&#34;&#39;
  with self.assertRaises(text_format.ParseError) as e:
    text_format.Parse(text, message)
  self.assertEqual(e.exception.GetLine(), 1)
  self.assertEqual(e.exception.GetColumn(), 28)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseInvalidUtf860088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseInvalidUtf8(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;repeated_string: &#34;\\xc3\\xc3&#34;&#39;
  with self.assertRaises(text_format.ParseError) as e:
    text_format.Parse(text, message)
  self.assertEqual(e.exception.GetLine(), 1)
  self.assertEqual(e.exception.GetColumn(), 28)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseMultipleOneof60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseMultipleOneof(self, message_module):
  m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
  m2 = message_module.TestAllTypes()
  with six.assertRaisesRegex(self, text_format.ParseError,
                             &#39; is specified along with field &#39;):
    text_format.Parse(m_string, m2)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseMultipleOneof60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseMultipleOneof(self, message_module):
  m_string = &#39;\n&#39;.join([&#39;oneof_uint32: 11&#39;, &#39;oneof_string: &#34;foo&#34;&#39;])
  m2 = message_module.TestAllTypes()
  with six.assertRaisesRegex(self, text_format.ParseError,
                             &#39; is specified along with field &#39;):
    text_format.Parse(m_string, m2)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseOneof60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseOneof(self, message_module):
  m = message_module.TestAllTypes()
  m.oneof_uint32 = 11
  m2 = message_module.TestAllTypes()
  text_format.Parse(text_format.MessageToString(m), m2)
  self.assertEqual(&#39;oneof_uint32&#39;, m2.WhichOneof(&#39;oneof_field&#39;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseOneof60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseOneof(self, message_module):
  m = message_module.TestAllTypes()
  m.oneof_uint32 = 11
  m2 = message_module.TestAllTypes()
  text_format.Parse(text_format.MessageToString(m), m2)
  self.assertEqual(&#39;oneof_uint32&#39;, m2.WhichOneof(&#39;oneof_field&#39;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseRepeatedMessageShortFormat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_nested_message: [{bb: 100}, {bb: 200}],\n&#39;
          &#39;repeated_nested_message: {bb: 300}\n&#39;
          &#39;repeated_nested_message [{bb: 400}];\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_nested_message[0].bb)
  self.assertEqual(200, message.repeated_nested_message[1].bb)
  self.assertEqual(300, message.repeated_nested_message[2].bb)
  self.assertEqual(400, message.repeated_nested_message[3].bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseRepeatedMessageShortFormat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_nested_message: [{bb: 100}, {bb: 200}],\n&#39;
          &#39;repeated_nested_message: {bb: 300}\n&#39;
          &#39;repeated_nested_message [{bb: 400}];\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_nested_message[0].bb)
  self.assertEqual(200, message.repeated_nested_message[1].bb)
  self.assertEqual(300, message.repeated_nested_message[2].bb)
  self.assertEqual(400, message.repeated_nested_message[3].bb)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseRepeatedScalarShortFormat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: [100, 200];\n&#39;
          &#39;repeated_int64: []\n&#39;
          &#39;repeated_int64: 300,\n&#39;
          &#39;repeated_string: [&#34;one&#34;, &#34;two&#34;];\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_int64[0])
  self.assertEqual(200, message.repeated_int64[1])
  self.assertEqual(300, message.repeated_int64[2])
  self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
  self.assertEqual(u&#39;two&#39;, message.repeated_string[1])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseRepeatedScalarShortFormat(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: [100, 200];\n&#39;
          &#39;repeated_int64: []\n&#39;
          &#39;repeated_int64: 300,\n&#39;
          &#39;repeated_string: [&#34;one&#34;, &#34;two&#34;];\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_int64[0])
  self.assertEqual(200, message.repeated_int64[1])
  self.assertEqual(300, message.repeated_int64[2])
  self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
  self.assertEqual(u&#39;two&#39;, message.repeated_string[1])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseSingleWord60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseSingleWord(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;foo&#39;
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
      r&#39;&#34;foo&#34;.&#39;), text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseSingleWord60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseSingleWord(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;foo&#39;
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
      r&#39;&#34;foo&#34;.&#39;), text_format.Parse, text, message)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseStringFieldUnescape60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseStringFieldUnescape(self, message_module):
  message = message_module.TestAllTypes()
  text = r&#39;&#39;&#39;repeated_string: &#34;\xf\x62&#34;
             repeated_string: &#34;\\xf\\x62&#34;
             repeated_string: &#34;\\\xf\\\x62&#34;
             repeated_string: &#34;\\\\xf\\\\x62&#34;
             repeated_string: &#34;\\\\\xf\\\\\x62&#34;
             repeated_string: &#34;\x5cx20&#34;&#39;&#39;&#39;

  text_format.Parse(text, message)

  SLASH = &#39;\\&#39;
  self.assertEqual(&#39;\x0fb&#39;, message.repeated_string[0])
  self.assertEqual(SLASH + &#39;xf&#39; + SLASH + &#39;x62&#39;, message.repeated_string[1])
  self.assertEqual(SLASH + &#39;\x0f&#39; + SLASH + &#39;b&#39;, message.repeated_string[2])
  self.assertEqual(SLASH + SLASH + &#39;xf&#39; + SLASH + SLASH + &#39;x62&#39;,
                   message.repeated_string[3])
  self.assertEqual(SLASH + SLASH + &#39;\x0f&#39; + SLASH + SLASH + &#39;b&#39;,
                   message.repeated_string[4])
  self.assertEqual(SLASH + &#39;x20&#39;, message.repeated_string[5])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseStringFieldUnescape60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseStringFieldUnescape(self, message_module):
  message = message_module.TestAllTypes()
  text = r&#39;&#39;&#39;repeated_string: &#34;\xf\x62&#34;
             repeated_string: &#34;\\xf\\x62&#34;
             repeated_string: &#34;\\\xf\\\x62&#34;
             repeated_string: &#34;\\\\xf\\\\x62&#34;
             repeated_string: &#34;\\\\\xf\\\\\x62&#34;
             repeated_string: &#34;\x5cx20&#34;&#39;&#39;&#39;

  text_format.Parse(text, message)

  SLASH = &#39;\\&#39;
  self.assertEqual(&#39;\x0fb&#39;, message.repeated_string[0])
  self.assertEqual(SLASH + &#39;xf&#39; + SLASH + &#39;x62&#39;, message.repeated_string[1])
  self.assertEqual(SLASH + &#39;\x0f&#39; + SLASH + &#39;b&#39;, message.repeated_string[2])
  self.assertEqual(SLASH + SLASH + &#39;xf&#39; + SLASH + SLASH + &#39;x62&#39;,
                   message.repeated_string[3])
  self.assertEqual(SLASH + SLASH + &#39;\x0f&#39; + SLASH + SLASH + &#39;b&#39;,
                   message.repeated_string[4])
  self.assertEqual(SLASH + &#39;x20&#39;, message.repeated_string[5])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseTrailingCommas60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseTrailingCommas(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: 100;\n&#39;
          &#39;repeated_int64: 200;\n&#39;
          &#39;repeated_int64: 300,\n&#39;
          &#39;repeated_string: &#34;one&#34;,\n&#39;
          &#39;repeated_string: &#34;two&#34;;\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_int64[0])
  self.assertEqual(200, message.repeated_int64[1])
  self.assertEqual(300, message.repeated_int64[2])
  self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
  self.assertEqual(u&#39;two&#39;, message.repeated_string[1])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseTrailingCommas60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseTrailingCommas(self, message_module):
  message = message_module.TestAllTypes()
  text = (&#39;repeated_int64: 100;\n&#39;
          &#39;repeated_int64: 200;\n&#39;
          &#39;repeated_int64: 300,\n&#39;
          &#39;repeated_string: &#34;one&#34;,\n&#39;
          &#39;repeated_string: &#34;two&#34;;\n&#39;)
  text_format.Parse(text, message)

  self.assertEqual(100, message.repeated_int64[0])
  self.assertEqual(200, message.repeated_int64[1])
  self.assertEqual(300, message.repeated_int64[2])
  self.assertEqual(u&#39;one&#39;, message.repeated_string[0])
  self.assertEqual(u&#39;two&#39;, message.repeated_string[1])</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseUnicode60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseUnicode(self, message_module):
  m = message_module.TestAllTypes()
  text_format.Parse(self._UNICODE_SAMPLE, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
  # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
  self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
  # repeated_string[0] contained \ escaped data representing the UTF-8
  # representation of _GOLDEN_STR_0 - it needs to decode as such.
  self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseUnicode60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseUnicode(self, message_module):
  m = message_module.TestAllTypes()
  text_format.Parse(self._UNICODE_SAMPLE, m)
  self.assertEqual(m.optional_bytes, self._GOLDEN_BYTES)
  self.assertEqual(m.optional_string, self._GOLDEN_UNICODE)
  self.assertEqual(m.repeated_bytes[0], self._GOLDEN_BYTES)
  # repeated_bytes[1] contained simple \ escaped non-UTF-8 raw binary data.
  self.assertEqual(m.repeated_bytes[1], self._GOLDEN_BYTES_1)
  # repeated_string[0] contained \ escaped data representing the UTF-8
  # representation of _GOLDEN_STR_0 - it needs to decode as such.
  self.assertEqual(m.repeated_string[0], self._GOLDEN_STR_0)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7050"><code class="name flex">
<span>def <span class="ident">testParseUnknownField60088eee47a511ea91e100155d0af7050</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseUnknownField(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;unknown_field: 8\n&#39;
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
      r&#39;&#34;unknown_field&#34;.&#39;), text_format.Parse, text, message)
  text = (&#39;optional_int32: 123\n&#39;
          &#39;unknown_field: 8\n&#39;
          &#39;optional_nested_message { bb: 45 }&#39;)
  text_format.Parse(text, message, allow_unknown_field=True)
  self.assertEqual(message.optional_nested_message.bb, 45)
  self.assertEqual(message.optional_int32, 123)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7051"><code class="name flex">
<span>def <span class="ident">testParseUnknownField60088eee47a511ea91e100155d0af7051</span></span>(<span>self, message_module)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testParseUnknownField(self, message_module):
  message = message_module.TestAllTypes()
  text = &#39;unknown_field: 8\n&#39;
  six.assertRaisesRegex(self, text_format.ParseError, (
      r&#39;1:1 : Message type &#34;\w+.TestAllTypes&#34; has no field named &#39;
      r&#39;&#34;unknown_field&#34;.&#39;), text_format.Parse, text, message)
  text = (&#39;optional_int32: 123\n&#39;
          &#39;unknown_field: 8\n&#39;
          &#39;optional_nested_message { bb: 45 }&#39;)
  text_format.Parse(text, message, allow_unknown_field=True)
  self.assertEqual(message.optional_nested_message.bb, 45)
  self.assertEqual(message.optional_int32, 123)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest"><code class="flex name class">
<span>class <span class="ident">TokenizerTest</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TokenizerTest(unittest.TestCase):

  def testSimpleTokenCases(self):
    text = (&#39;identifier1:&#34;string1&#34;\n     \n\n&#39;
            &#39;identifier2 : \n \n123  \n  identifier3 :\&#39;string\&#39;\n&#39;
            &#39;identifiER_4 : 1.1e+2 ID5:-0.23 ID6:\&#39;aaaa\\\&#39;bbbb\&#39;\n&#39;
            &#39;ID7 : &#34;aa\\&#34;bb&#34;\n\n\n\n ID8: {A:inf B:-inf C:true D:false}\n&#39;
            &#39;ID9: 22 ID10: -111111111111111111 ID11: -22\n&#39;
            &#39;ID12: 2222222222222222222 ID13: 1.23456f ID14: 1.2e+2f &#39;
            &#39;false_bool:  0 true_BOOL:t \n true_bool1:  1 false_BOOL1:f &#39;
            &#39;False_bool: False True_bool: True X:iNf Y:-inF Z:nAN&#39;)
    tokenizer = text_format.Tokenizer(text.splitlines())
    methods = [(tokenizer.ConsumeIdentifier, &#39;identifier1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;string1&#39;),
               (tokenizer.ConsumeIdentifier, &#39;identifier2&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 123),
               (tokenizer.ConsumeIdentifier, &#39;identifier3&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;string&#39;),
               (tokenizer.ConsumeIdentifier, &#39;identifiER_4&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.1e+2),
               (tokenizer.ConsumeIdentifier, &#39;ID5&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, -0.23),
               (tokenizer.ConsumeIdentifier, &#39;ID6&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;aaaa\&#39;bbbb&#39;),
               (tokenizer.ConsumeIdentifier, &#39;ID7&#39;), &#39;:&#39;,
               (tokenizer.ConsumeString, &#39;aa\&#34;bb&#39;),
               (tokenizer.ConsumeIdentifier, &#39;ID8&#39;), &#39;:&#39;, &#39;{&#39;,
               (tokenizer.ConsumeIdentifier, &#39;A&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;B&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, -float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;C&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;D&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False), &#39;}&#39;,
               (tokenizer.ConsumeIdentifier, &#39;ID9&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 22),
               (tokenizer.ConsumeIdentifier, &#39;ID10&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, -111111111111111111),
               (tokenizer.ConsumeIdentifier, &#39;ID11&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, -22),
               (tokenizer.ConsumeIdentifier, &#39;ID12&#39;), &#39;:&#39;,
               (tokenizer.ConsumeInteger, 2222222222222222222),
               (tokenizer.ConsumeIdentifier, &#39;ID13&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.23456),
               (tokenizer.ConsumeIdentifier, &#39;ID14&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, 1.2e+2),
               (tokenizer.ConsumeIdentifier, &#39;false_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;true_BOOL&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;true_bool1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;false_BOOL1&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;False_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, False),
               (tokenizer.ConsumeIdentifier, &#39;True_bool&#39;), &#39;:&#39;,
               (tokenizer.ConsumeBool, True),
               (tokenizer.ConsumeIdentifier, &#39;X&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;Y&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;-inf&#39;)),
               (tokenizer.ConsumeIdentifier, &#39;Z&#39;), &#39;:&#39;,
               (tokenizer.ConsumeFloat, float(&#39;nan&#39;))]

    i = 0
    while not tokenizer.AtEnd():
      m = methods[i]
      if isinstance(m, str):
        token = tokenizer.token
        self.assertEqual(token, m)
        tokenizer.NextToken()
      elif isinstance(m[1], float) and math.isnan(m[1]):
        self.assertTrue(math.isnan(m[0]()))
      else:
        self.assertEqual(m[1], m[0]())
      i += 1

  def testConsumeAbstractIntegers(self):
    # This test only tests the failures in the integer parsing methods as well
    # as the &#39;0&#39; special cases.
    int64_max = (1 &lt;&lt; 63) - 1
    uint32_max = (1 &lt;&lt; 32) - 1
    text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(-1, tokenizer.ConsumeInteger())

    self.assertEqual(uint32_max + 1, tokenizer.ConsumeInteger())

    self.assertEqual(int64_max + 1, tokenizer.ConsumeInteger())
    self.assertTrue(tokenizer.AtEnd())

    text = &#39;-0 0 0 1.2&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(True, tokenizer.TryConsumeInteger())
    self.assertEqual(False, tokenizer.TryConsumeInteger())
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()
    self.assertEqual(1.2, tokenizer.ConsumeFloat())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeIntegers(self):
    # This test only tests the failures in the integer parsing methods as well
    # as the &#39;0&#39; special cases.
    int64_max = (1 &lt;&lt; 63) - 1
    uint32_max = (1 &lt;&lt; 32) - 1
    text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint32, tokenizer)
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint64, tokenizer)
    self.assertEqual(-1, text_format._ConsumeInt32(tokenizer))

    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeUint32, tokenizer)
    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeInt32, tokenizer)
    self.assertEqual(uint32_max + 1, text_format._ConsumeInt64(tokenizer))

    self.assertRaises(text_format.ParseError,
                      text_format._ConsumeInt64, tokenizer)
    self.assertEqual(int64_max + 1, text_format._ConsumeUint64(tokenizer))
    self.assertTrue(tokenizer.AtEnd())

    text = &#39;-0 -0 0 0&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
    self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeOctalIntegers(self):
    &#34;&#34;&#34;Test support for C style octal integers.&#34;&#34;&#34;
    text = &#39;00 -00 04 0755 -010 007 -0033 08 -09 01&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(0, tokenizer.ConsumeInteger())
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertEqual(0o755, tokenizer.ConsumeInteger())
    self.assertEqual(-0o10, tokenizer.ConsumeInteger())
    self.assertEqual(7, tokenizer.ConsumeInteger())
    self.assertEqual(-0o033, tokenizer.ConsumeInteger())
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()  # 08
    tokenizer.NextToken()
    with self.assertRaises(text_format.ParseError):
      tokenizer.ConsumeInteger()  # -09
    tokenizer.NextToken()
    self.assertEqual(1, tokenizer.ConsumeInteger())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeByteString(self):
    text = &#39;&#34;string1\&#39;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;string1&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\xt&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

    text = &#39;\n&#34;\\x&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  def testConsumeBool(self):
    text = &#39;not-a-bool&#39;
    tokenizer = text_format.Tokenizer(text.splitlines())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeBool)

  def testSkipComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines())
    self.assertTrue(tokenizer.AtEnd())
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)

  def testConsumeComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                      skip_comments=False)
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTwoComments(self):
    text = &#39;# some comment\n# another comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual(&#39;# another comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTrailingComment(self):
    text = &#39;some_number: 4\n# some comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)

    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertFalse(tokenizer.AtEnd())

    self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeLineComment(self):
    tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                      skip_comments=False)
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual((False, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeTwoLineComments(self):
    text = &#39;# some comment\n# another comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual((False, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertFalse(tokenizer.AtEnd())
    self.assertEqual((False, &#39;# another comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testConsumeAndCheckTrailingComment(self):
    text = &#39;some_number: 4  # some comment&#39;  # trailing comment on the same line
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertRaises(text_format.ParseError,
                      tokenizer.ConsumeCommentOrTrailingComment)

    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertRaises(text_format.ParseError,
                      tokenizer.ConsumeCommentOrTrailingComment)
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertFalse(tokenizer.AtEnd())

    self.assertEqual((True, &#39;# some comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testHashinComment(self):
    text = &#39;some_number: 4  # some comment # not a new comment&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
    self.assertEqual(tokenizer.token, &#39;:&#39;)
    tokenizer.NextToken()
    self.assertEqual(4, tokenizer.ConsumeInteger())
    self.assertEqual((True, &#39;# some comment # not a new comment&#39;),
                     tokenizer.ConsumeCommentOrTrailingComment())
    self.assertTrue(tokenizer.AtEnd())

  def testHugeString(self):
    # With pathologic backtracking, fails with Forge OOM.
    text = &#39;&#34;&#39; + &#39;a&#39; * (10 * 1024 * 1024) + &#39;&#34;&#39;
    tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
    tokenizer.ConsumeString()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAbstractIntegers"><code class="name flex">
<span>def <span class="ident">testConsumeAbstractIntegers</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeAbstractIntegers(self):
  # This test only tests the failures in the integer parsing methods as well
  # as the &#39;0&#39; special cases.
  int64_max = (1 &lt;&lt; 63) - 1
  uint32_max = (1 &lt;&lt; 32) - 1
  text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertEqual(-1, tokenizer.ConsumeInteger())

  self.assertEqual(uint32_max + 1, tokenizer.ConsumeInteger())

  self.assertEqual(int64_max + 1, tokenizer.ConsumeInteger())
  self.assertTrue(tokenizer.AtEnd())

  text = &#39;-0 0 0 1.2&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertEqual(0, tokenizer.ConsumeInteger())
  self.assertEqual(0, tokenizer.ConsumeInteger())
  self.assertEqual(True, tokenizer.TryConsumeInteger())
  self.assertEqual(False, tokenizer.TryConsumeInteger())
  with self.assertRaises(text_format.ParseError):
    tokenizer.ConsumeInteger()
  self.assertEqual(1.2, tokenizer.ConsumeFloat())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAndCheckTrailingComment"><code class="name flex">
<span>def <span class="ident">testConsumeAndCheckTrailingComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeAndCheckTrailingComment(self):
  text = &#39;some_number: 4  # some comment&#39;  # trailing comment on the same line
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  self.assertRaises(text_format.ParseError,
                    tokenizer.ConsumeCommentOrTrailingComment)

  self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
  self.assertEqual(tokenizer.token, &#39;:&#39;)
  tokenizer.NextToken()
  self.assertRaises(text_format.ParseError,
                    tokenizer.ConsumeCommentOrTrailingComment)
  self.assertEqual(4, tokenizer.ConsumeInteger())
  self.assertFalse(tokenizer.AtEnd())

  self.assertEqual((True, &#39;# some comment&#39;),
                   tokenizer.ConsumeCommentOrTrailingComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeBool"><code class="name flex">
<span>def <span class="ident">testConsumeBool</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeBool(self):
  text = &#39;not-a-bool&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeBool)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeByteString"><code class="name flex">
<span>def <span class="ident">testConsumeByteString</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeByteString(self):
  text = &#39;&#34;string1\&#39;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  text = &#39;string1&#34;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  text = &#39;\n&#34;\\xt&#34;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  text = &#39;\n&#34;\\&#34;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)

  text = &#39;\n&#34;\\x&#34;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeByteString)</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeComment"><code class="name flex">
<span>def <span class="ident">testConsumeComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeComment(self):
  tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                    skip_comments=False)
  self.assertFalse(tokenizer.AtEnd())
  self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeIntegers"><code class="name flex">
<span>def <span class="ident">testConsumeIntegers</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeIntegers(self):
  # This test only tests the failures in the integer parsing methods as well
  # as the &#39;0&#39; special cases.
  int64_max = (1 &lt;&lt; 63) - 1
  uint32_max = (1 &lt;&lt; 32) - 1
  text = &#39;-1 %d %d&#39; % (uint32_max + 1, int64_max + 1)
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertRaises(text_format.ParseError,
                    text_format._ConsumeUint32, tokenizer)
  self.assertRaises(text_format.ParseError,
                    text_format._ConsumeUint64, tokenizer)
  self.assertEqual(-1, text_format._ConsumeInt32(tokenizer))

  self.assertRaises(text_format.ParseError,
                    text_format._ConsumeUint32, tokenizer)
  self.assertRaises(text_format.ParseError,
                    text_format._ConsumeInt32, tokenizer)
  self.assertEqual(uint32_max + 1, text_format._ConsumeInt64(tokenizer))

  self.assertRaises(text_format.ParseError,
                    text_format._ConsumeInt64, tokenizer)
  self.assertEqual(int64_max + 1, text_format._ConsumeUint64(tokenizer))
  self.assertTrue(tokenizer.AtEnd())

  text = &#39;-0 -0 0 0&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
  self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
  self.assertEqual(0, text_format._ConsumeUint32(tokenizer))
  self.assertEqual(0, text_format._ConsumeUint64(tokenizer))
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeLineComment"><code class="name flex">
<span>def <span class="ident">testConsumeLineComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeLineComment(self):
  tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines(),
                                    skip_comments=False)
  self.assertFalse(tokenizer.AtEnd())
  self.assertEqual((False, &#39;# some comment&#39;),
                   tokenizer.ConsumeCommentOrTrailingComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeOctalIntegers"><code class="name flex">
<span>def <span class="ident">testConsumeOctalIntegers</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Test support for C style octal integers.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeOctalIntegers(self):
  &#34;&#34;&#34;Test support for C style octal integers.&#34;&#34;&#34;
  text = &#39;00 -00 04 0755 -010 007 -0033 08 -09 01&#39;
  tokenizer = text_format.Tokenizer(text.splitlines())
  self.assertEqual(0, tokenizer.ConsumeInteger())
  self.assertEqual(0, tokenizer.ConsumeInteger())
  self.assertEqual(4, tokenizer.ConsumeInteger())
  self.assertEqual(0o755, tokenizer.ConsumeInteger())
  self.assertEqual(-0o10, tokenizer.ConsumeInteger())
  self.assertEqual(7, tokenizer.ConsumeInteger())
  self.assertEqual(-0o033, tokenizer.ConsumeInteger())
  with self.assertRaises(text_format.ParseError):
    tokenizer.ConsumeInteger()  # 08
  tokenizer.NextToken()
  with self.assertRaises(text_format.ParseError):
    tokenizer.ConsumeInteger()  # -09
  tokenizer.NextToken()
  self.assertEqual(1, tokenizer.ConsumeInteger())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTrailingComment"><code class="name flex">
<span>def <span class="ident">testConsumeTrailingComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeTrailingComment(self):
  text = &#39;some_number: 4\n# some comment&#39;
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)

  self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
  self.assertEqual(tokenizer.token, &#39;:&#39;)
  tokenizer.NextToken()
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)
  self.assertEqual(4, tokenizer.ConsumeInteger())
  self.assertFalse(tokenizer.AtEnd())

  self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoComments"><code class="name flex">
<span>def <span class="ident">testConsumeTwoComments</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeTwoComments(self):
  text = &#39;# some comment\n# another comment&#39;
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  self.assertEqual(&#39;# some comment&#39;, tokenizer.ConsumeComment())
  self.assertFalse(tokenizer.AtEnd())
  self.assertEqual(&#39;# another comment&#39;, tokenizer.ConsumeComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoLineComments"><code class="name flex">
<span>def <span class="ident">testConsumeTwoLineComments</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testConsumeTwoLineComments(self):
  text = &#39;# some comment\n# another comment&#39;
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  self.assertEqual((False, &#39;# some comment&#39;),
                   tokenizer.ConsumeCommentOrTrailingComment())
  self.assertFalse(tokenizer.AtEnd())
  self.assertEqual((False, &#39;# another comment&#39;),
                   tokenizer.ConsumeCommentOrTrailingComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testHashinComment"><code class="name flex">
<span>def <span class="ident">testHashinComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testHashinComment(self):
  text = &#39;some_number: 4  # some comment # not a new comment&#39;
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  self.assertEqual(&#39;some_number&#39;, tokenizer.ConsumeIdentifier())
  self.assertEqual(tokenizer.token, &#39;:&#39;)
  tokenizer.NextToken()
  self.assertEqual(4, tokenizer.ConsumeInteger())
  self.assertEqual((True, &#39;# some comment # not a new comment&#39;),
                   tokenizer.ConsumeCommentOrTrailingComment())
  self.assertTrue(tokenizer.AtEnd())</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testHugeString"><code class="name flex">
<span>def <span class="ident">testHugeString</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testHugeString(self):
  # With pathologic backtracking, fails with Forge OOM.
  text = &#39;&#34;&#39; + &#39;a&#39; * (10 * 1024 * 1024) + &#39;&#34;&#39;
  tokenizer = text_format.Tokenizer(text.splitlines(), skip_comments=False)
  tokenizer.ConsumeString()</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testSimpleTokenCases"><code class="name flex">
<span>def <span class="ident">testSimpleTokenCases</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testSimpleTokenCases(self):
  text = (&#39;identifier1:&#34;string1&#34;\n     \n\n&#39;
          &#39;identifier2 : \n \n123  \n  identifier3 :\&#39;string\&#39;\n&#39;
          &#39;identifiER_4 : 1.1e+2 ID5:-0.23 ID6:\&#39;aaaa\\\&#39;bbbb\&#39;\n&#39;
          &#39;ID7 : &#34;aa\\&#34;bb&#34;\n\n\n\n ID8: {A:inf B:-inf C:true D:false}\n&#39;
          &#39;ID9: 22 ID10: -111111111111111111 ID11: -22\n&#39;
          &#39;ID12: 2222222222222222222 ID13: 1.23456f ID14: 1.2e+2f &#39;
          &#39;false_bool:  0 true_BOOL:t \n true_bool1:  1 false_BOOL1:f &#39;
          &#39;False_bool: False True_bool: True X:iNf Y:-inF Z:nAN&#39;)
  tokenizer = text_format.Tokenizer(text.splitlines())
  methods = [(tokenizer.ConsumeIdentifier, &#39;identifier1&#39;), &#39;:&#39;,
             (tokenizer.ConsumeString, &#39;string1&#39;),
             (tokenizer.ConsumeIdentifier, &#39;identifier2&#39;), &#39;:&#39;,
             (tokenizer.ConsumeInteger, 123),
             (tokenizer.ConsumeIdentifier, &#39;identifier3&#39;), &#39;:&#39;,
             (tokenizer.ConsumeString, &#39;string&#39;),
             (tokenizer.ConsumeIdentifier, &#39;identifiER_4&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, 1.1e+2),
             (tokenizer.ConsumeIdentifier, &#39;ID5&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, -0.23),
             (tokenizer.ConsumeIdentifier, &#39;ID6&#39;), &#39;:&#39;,
             (tokenizer.ConsumeString, &#39;aaaa\&#39;bbbb&#39;),
             (tokenizer.ConsumeIdentifier, &#39;ID7&#39;), &#39;:&#39;,
             (tokenizer.ConsumeString, &#39;aa\&#34;bb&#39;),
             (tokenizer.ConsumeIdentifier, &#39;ID8&#39;), &#39;:&#39;, &#39;{&#39;,
             (tokenizer.ConsumeIdentifier, &#39;A&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
             (tokenizer.ConsumeIdentifier, &#39;B&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, -float(&#39;inf&#39;)),
             (tokenizer.ConsumeIdentifier, &#39;C&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, True),
             (tokenizer.ConsumeIdentifier, &#39;D&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, False), &#39;}&#39;,
             (tokenizer.ConsumeIdentifier, &#39;ID9&#39;), &#39;:&#39;,
             (tokenizer.ConsumeInteger, 22),
             (tokenizer.ConsumeIdentifier, &#39;ID10&#39;), &#39;:&#39;,
             (tokenizer.ConsumeInteger, -111111111111111111),
             (tokenizer.ConsumeIdentifier, &#39;ID11&#39;), &#39;:&#39;,
             (tokenizer.ConsumeInteger, -22),
             (tokenizer.ConsumeIdentifier, &#39;ID12&#39;), &#39;:&#39;,
             (tokenizer.ConsumeInteger, 2222222222222222222),
             (tokenizer.ConsumeIdentifier, &#39;ID13&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, 1.23456),
             (tokenizer.ConsumeIdentifier, &#39;ID14&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, 1.2e+2),
             (tokenizer.ConsumeIdentifier, &#39;false_bool&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, False),
             (tokenizer.ConsumeIdentifier, &#39;true_BOOL&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, True),
             (tokenizer.ConsumeIdentifier, &#39;true_bool1&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, True),
             (tokenizer.ConsumeIdentifier, &#39;false_BOOL1&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, False),
             (tokenizer.ConsumeIdentifier, &#39;False_bool&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, False),
             (tokenizer.ConsumeIdentifier, &#39;True_bool&#39;), &#39;:&#39;,
             (tokenizer.ConsumeBool, True),
             (tokenizer.ConsumeIdentifier, &#39;X&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, float(&#39;inf&#39;)),
             (tokenizer.ConsumeIdentifier, &#39;Y&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, float(&#39;-inf&#39;)),
             (tokenizer.ConsumeIdentifier, &#39;Z&#39;), &#39;:&#39;,
             (tokenizer.ConsumeFloat, float(&#39;nan&#39;))]

  i = 0
  while not tokenizer.AtEnd():
    m = methods[i]
    if isinstance(m, str):
      token = tokenizer.token
      self.assertEqual(token, m)
      tokenizer.NextToken()
    elif isinstance(m[1], float) and math.isnan(m[1]):
      self.assertTrue(math.isnan(m[0]()))
    else:
      self.assertEqual(m[1], m[0]())
    i += 1</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.TokenizerTest.testSkipComment"><code class="name flex">
<span>def <span class="ident">testSkipComment</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testSkipComment(self):
  tokenizer = text_format.Tokenizer(&#39;# some comment&#39;.splitlines())
  self.assertTrue(tokenizer.AtEnd())
  self.assertRaises(text_format.ParseError, tokenizer.ConsumeComment)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest"><code class="flex name class">
<span>class <span class="ident">WhitespaceTest</span></span>
<span>(</span><span>methodName='runTest')</span>
</code></dt>
<dd>
<section class="desc"><p>A class whose instances are single test cases.</p>
<p>By default, the test code itself should be placed in a method named
'runTest'.</p>
<p>If the fixture may be used for many test cases, create as
many test methods as are needed. When instantiating such a TestCase
subclass, specify in the constructor arguments the name of the test method
that the instance is to execute.</p>
<p>Test authors should subclass TestCase for their own tests. Construction
and deconstruction of the test's environment ('fixture') can be
implemented by overriding the 'setUp' and 'tearDown' methods respectively.</p>
<p>If it is necessary to override the <strong>init</strong> method, the base class
<strong>init</strong> method must always be called. It is important that subclasses
should not change the signature of their <strong>init</strong> method, since instances
of the classes are instantiated automatically by parts of the framework
in order to be run.</p>
<p>When subclassing TestCase, you can set these attributes:
* failureException: determines which exception will be raised when
the instance's assertion methods fail; test methods raising this
exception will be deemed to have 'failed' rather than 'errored'.
* longMessage: determines whether long messages (including repr of
objects used in assert methods) will be printed on failure in <em>addition</em>
to any explicit message passed.
* maxDiff: sets the maximum length of a diff in failure messages
by assert methods using difflib. It is looked up as an instance
attribute so can be configured by individual tests if required.</p>
<p>Create an instance of the class that will use the named test
method when executed. Raises a ValueError if the instance does
not have a method with the specified name.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WhitespaceTest(TextFormatBase):

  def setUp(self):
    self.out = text_format.TextWriter(False)
    self.addCleanup(self.out.close)
    self.message = unittest_pb2.NestedTestAllTypes()
    self.message.child.payload.optional_string = &#39;value&#39;
    self.field = self.message.DESCRIPTOR.fields_by_name[&#39;child&#39;]
    self.value = self.message.child

  def testMessageToString(self):
    self.CompareToGoldenText(
        text_format.MessageToString(self.message),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintMessage(self):
    text_format.PrintMessage(self.message, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintField(self):
    text_format.PrintField(self.field, self.value, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            child {
              payload {
                optional_string: &#34;value&#34;
              }
            }
            &#34;&#34;&#34;))

  def testPrintFieldValue(self):
    text_format.PrintFieldValue(
        self.field, self.value, self.out)
    self.CompareToGoldenText(
        self.out.getvalue(),
        textwrap.dedent(&#34;&#34;&#34;\
            {
              payload {
                optional_string: &#34;value&#34;
              }
            }&#34;&#34;&#34;))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></li>
<li>unittest.case.TestCase</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest.setUp"><code class="name flex">
<span>def <span class="ident">setUp</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Hook method for setting up the test fixture before exercising it.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setUp(self):
  self.out = text_format.TextWriter(False)
  self.addCleanup(self.out.close)
  self.message = unittest_pb2.NestedTestAllTypes()
  self.message.child.payload.optional_string = &#39;value&#39;
  self.field = self.message.DESCRIPTOR.fields_by_name[&#39;child&#39;]
  self.value = self.message.child</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest.testMessageToString"><code class="name flex">
<span>def <span class="ident">testMessageToString</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testMessageToString(self):
  self.CompareToGoldenText(
      text_format.MessageToString(self.message),
      textwrap.dedent(&#34;&#34;&#34;\
          child {
            payload {
              optional_string: &#34;value&#34;
            }
          }
          &#34;&#34;&#34;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintField"><code class="name flex">
<span>def <span class="ident">testPrintField</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintField(self):
  text_format.PrintField(self.field, self.value, self.out)
  self.CompareToGoldenText(
      self.out.getvalue(),
      textwrap.dedent(&#34;&#34;&#34;\
          child {
            payload {
              optional_string: &#34;value&#34;
            }
          }
          &#34;&#34;&#34;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintFieldValue"><code class="name flex">
<span>def <span class="ident">testPrintFieldValue</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintFieldValue(self):
  text_format.PrintFieldValue(
      self.field, self.value, self.out)
  self.CompareToGoldenText(
      self.out.getvalue(),
      textwrap.dedent(&#34;&#34;&#34;\
          {
            payload {
              optional_string: &#34;value&#34;
            }
          }&#34;&#34;&#34;))</code></pre>
</details>
</dd>
<dt id="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintMessage"><code class="name flex">
<span>def <span class="ident">testPrintMessage</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def testPrintMessage(self):
  text_format.PrintMessage(self.message, self.out)
  self.CompareToGoldenText(
      self.out.getvalue(),
      textwrap.dedent(&#34;&#34;&#34;\
          child {
            payload {
              optional_string: &#34;value&#34;
            }
          }
          &#34;&#34;&#34;))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="google.protobuf.internal" href="index.html">google.protobuf.internal</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests">OnlyWorksWithProto2RightNowTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMapOrderEnforcement" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMapOrderEnforcement">testMapOrderEnforcement</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMergeLinesGolden" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testMergeLinesGolden">testMergeLinesGolden</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseGolden" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseGolden">testParseGolden</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseLinesGolden" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testParseLinesGolden">testParseLinesGolden</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFields" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFields">testPrintAllFields</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFieldsPointy" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintAllFieldsPointy">testPrintAllFieldsPointy</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintInIndexOrder" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintInIndexOrder">testPrintInIndexOrder</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMap" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMap">testPrintMap</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMapUsingCppImplementation" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintMapUsingCppImplementation">testPrintMapUsingCppImplementation</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintUnknownFields" href="#google.protobuf.internal.text_format_test.OnlyWorksWithProto2RightNowTests.testPrintUnknownFields">testPrintUnknownFields</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest">PrettyPrinterTest</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7050">testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7051">testPrettyPrintEntireMessage60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7050">testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7051">testPrettyPrintMultiLine60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7050">testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7051">testPrettyPrintMultipleParts60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7050">testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7051">testPrettyPrintNoMatch60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7050">testPrettyPrintOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.PrettyPrinterTest.testPrettyPrintOneLine60088eee47a511ea91e100155d0af7051">testPrettyPrintOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.Proto2Tests" href="#google.protobuf.internal.text_format_test.Proto2Tests">Proto2Tests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testExtensionInsideAnyMessage" href="#google.protobuf.internal.text_format_test.Proto2Tests.testExtensionInsideAnyMessage">testExtensionInsideAnyMessage</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testMergeDuplicateExtensionScalars" href="#google.protobuf.internal.text_format_test.Proto2Tests.testMergeDuplicateExtensionScalars">testMergeDuplicateExtensionScalars</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseAllExtensions" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseAllExtensions">testParseAllExtensions</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseAllowedUnknownExtension" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseAllowedUnknownExtension">testParseAllowedUnknownExtension</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseBadExtension" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseBadExtension">testParseBadExtension</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseBadIdentifier" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseBadIdentifier">testParseBadIdentifier</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionMessages" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionMessages">testParseDuplicateExtensionMessages</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionScalars" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseDuplicateExtensionScalars">testParseDuplicateExtensionScalars</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseEmptyGroup" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseEmptyGroup">testParseEmptyGroup</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseGoldenExtensions" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseGoldenExtensions">testParseGoldenExtensions</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseGroupNotClosed" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseGroupNotClosed">testParseGroupNotClosed</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseMap" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseMap">testParseMap</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageByFieldNumber" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageByFieldNumber">testParseMessageByFieldNumber</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageSet" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseMessageSet">testParseMessageSet</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testParseNumericUnknownEnum" href="#google.protobuf.internal.text_format_test.Proto2Tests.testParseNumericUnknownEnum">testParseNumericUnknownEnum</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensions" href="#google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensions">testPrintAllExtensions</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensionsPointy" href="#google.protobuf.internal.text_format_test.Proto2Tests.testPrintAllExtensionsPointy">testPrintAllExtensionsPointy</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSet" href="#google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSet">testPrintMessageSet</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetAsOneLine" href="#google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetAsOneLine">testPrintMessageSetAsOneLine</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetByFieldNumber" href="#google.protobuf.internal.text_format_test.Proto2Tests.testPrintMessageSetByFieldNumber">testPrintMessageSetByFieldNumber</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.Proto3Tests" href="#google.protobuf.internal.text_format_test.Proto3Tests">Proto3Tests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeAlternativeUrl" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeAlternativeUrl">testMergeAlternativeUrl</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAny" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAny">testMergeExpandedAny</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyDescriptorPoolMissingType" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyDescriptorPoolMissingType">testMergeExpandedAnyDescriptorPoolMissingType</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyPointyBrackets" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyPointyBrackets">testMergeExpandedAnyPointyBrackets</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyRepeated" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeExpandedAnyRepeated">testMergeExpandedAnyRepeated</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeMissingAnyEndToken" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeMissingAnyEndToken">testMergeMissingAnyEndToken</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testMergeUnexpandedAny" href="#google.protobuf.internal.text_format_test.Proto3Tests.testMergeUnexpandedAny">testMergeUnexpandedAny</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintAndParseMessageInvalidAny" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintAndParseMessageInvalidAny">testPrintAndParseMessageInvalidAny</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAny" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAny">testPrintMessageExpandAny</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLine" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLine">testPrintMessageExpandAnyAsOneLine</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLinePointyBrackets" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyAsOneLinePointyBrackets">testPrintMessageExpandAnyAsOneLinePointyBrackets</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyDescriptorPoolMissingType" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyDescriptorPoolMissingType">testPrintMessageExpandAnyDescriptorPoolMissingType</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyPointyBrackets" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyPointyBrackets">testPrintMessageExpandAnyPointyBrackets</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyRepeated" href="#google.protobuf.internal.text_format_test.Proto3Tests.testPrintMessageExpandAnyRepeated">testPrintMessageExpandAnyRepeated</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testTopAnyMessage" href="#google.protobuf.internal.text_format_test.Proto3Tests.testTopAnyMessage">testTopAnyMessage</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.Proto3Tests.testUnknownEnums" href="#google.protobuf.internal.text_format_test.Proto3Tests.testUnknownEnums">testUnknownEnums</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.SimpleTextFormatTests" href="#google.protobuf.internal.text_format_test.SimpleTextFormatTests">SimpleTextFormatTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.SimpleTextFormatTests.testQuoteMarksAreSingleChars" href="#google.protobuf.internal.text_format_test.SimpleTextFormatTests.testQuoteMarksAreSingleChars">testQuoteMarksAreSingleChars</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TextFormatBase" href="#google.protobuf.internal.text_format_test.TextFormatBase">TextFormatBase</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenFile" href="#google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenFile">CompareToGoldenFile</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenText" href="#google.protobuf.internal.text_format_test.TextFormatBase.CompareToGoldenText">CompareToGoldenText</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatBase.ReadGolden" href="#google.protobuf.internal.text_format_test.TextFormatBase.ReadGolden">ReadGolden</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatBase.RemoveRedundantZeros" href="#google.protobuf.internal.text_format_test.TextFormatBase.RemoveRedundantZeros">RemoveRedundantZeros</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests">TextFormatMergeTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7050">testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7051">testMergeDuplicateNestedMessageScalars60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7050">testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7051">testMergeDuplicateScalarsInText60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7050">testMergeMultipleOneof60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testMergeMultipleOneof60088eee47a511ea91e100155d0af7051">testMergeMultipleOneof60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7050">testReplaceMessageInMessage60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceMessageInMessage60088eee47a511ea91e100155d0af7051">testReplaceMessageInMessage60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7050">testReplaceScalarInMessage60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMergeTests.testReplaceScalarInMessage60088eee47a511ea91e100155d0af7051">testReplaceScalarInMessage60088eee47a511ea91e100155d0af7051</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests">TextFormatMessageToStringTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.VerifyPrintShortFormatRepeatedFields" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.VerifyPrintShortFormatRepeatedFields">VerifyPrintShortFormatRepeatedFields</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7050">testCustomOptions60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testCustomOptions60088eee47a511ea91e100155d0af7051">testCustomOptions60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7050">testMessageToString60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToString60088eee47a511ea91e100155d0af7051">testMessageToString60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7050">testMessageToStringASCII60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringASCII60088eee47a511ea91e100155d0af7051">testMessageToStringASCII60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7050">testMessageToStringUnicode60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testMessageToStringUnicode60088eee47a511ea91e100155d0af7051">testMessageToStringUnicode60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7050">testPrintExotic60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExotic60088eee47a511ea91e100155d0af7051">testPrintExotic60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7050">testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7051">testPrintExoticAsOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7050">testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7051">testPrintExoticUnicodeSubclass60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7050">testPrintField60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintField60088eee47a511ea91e100155d0af7051">testPrintField60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7050">testPrintFieldValue60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFieldValue60088eee47a511ea91e100155d0af7051">testPrintFieldValue60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7050">testPrintFloatFormat60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintFloatFormat60088eee47a511ea91e100155d0af7051">testPrintFloatFormat60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7050">testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7051">testPrintNestedMessageAsOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7050">testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7051">testPrintNestedNewLineInStringAsOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7050">testPrintRawUtf8String60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRawUtf8String60088eee47a511ea91e100155d0af7051">testPrintRawUtf8String60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7050">testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7051">testPrintRepeatedFieldsAsOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7050">testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7051">testPrintShortFormatRepeatedFields60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7050">testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7051">testPrintUnknownFieldsEmbeddedMessageInBytes60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7050">testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToStringTests.testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7051">testRoundTripExoticAsOneLine60088eee47a511ea91e100155d0af7051</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests">TextFormatMessageToTextBytesTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7050">testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7051">testEscapedUtf8ASCIIRoundTrip60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7050">testMessageToBytes60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testMessageToBytes60088eee47a511ea91e100155d0af7051">testMessageToBytes60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7050">testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatMessageToTextBytesTests.testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7051">testRawUtf8RoundTrip60088eee47a511ea91e100155d0af7051</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests" href="#google.protobuf.internal.text_format_test.TextFormatParserTests">TextFormatParserTests</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7050">testFromBytesFile60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesFile60088eee47a511ea91e100155d0af7051">testFromBytesFile60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7050">testFromBytesLines60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromBytesLines60088eee47a511ea91e100155d0af7051">testFromBytesLines60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7050">testFromUnicodeFile60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeFile60088eee47a511ea91e100155d0af7051">testFromUnicodeFile60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7050">testFromUnicodeLines60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testFromUnicodeLines60088eee47a511ea91e100155d0af7051">testFromUnicodeLines60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7050">testParseAllFields60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAllFields60088eee47a511ea91e100155d0af7051">testParseAllFields60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7050">testParseAndMergeUtf860088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseAndMergeUtf860088eee47a511ea91e100155d0af7051">testParseAndMergeUtf860088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7050">testParseBadEnumValue60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadEnumValue60088eee47a511ea91e100155d0af7051">testParseBadEnumValue60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7050">testParseBadIntValue60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBadIntValue60088eee47a511ea91e100155d0af7051">testParseBadIntValue60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7050">testParseBytes60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseBytes60088eee47a511ea91e100155d0af7051">testParseBytes60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7050">testParseDoubleToFloat60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDoubleToFloat60088eee47a511ea91e100155d0af7051">testParseDoubleToFloat60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7050">testParseDuplicateMessages60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateMessages60088eee47a511ea91e100155d0af7051">testParseDuplicateMessages60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7050">testParseDuplicateScalars60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseDuplicateScalars60088eee47a511ea91e100155d0af7051">testParseDuplicateScalars60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7050">testParseEmptyText60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseEmptyText60088eee47a511ea91e100155d0af7051">testParseEmptyText60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7050">testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7051">testParseExistingScalarInMessage60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7050">testParseExotic60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseExotic60088eee47a511ea91e100155d0af7051">testParseExotic60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7050">testParseInvalidUtf860088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseInvalidUtf860088eee47a511ea91e100155d0af7051">testParseInvalidUtf860088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7050">testParseMultipleOneof60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseMultipleOneof60088eee47a511ea91e100155d0af7051">testParseMultipleOneof60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7050">testParseOneof60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseOneof60088eee47a511ea91e100155d0af7051">testParseOneof60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7050">testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7051">testParseRepeatedMessageShortFormat60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7050">testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7051">testParseRepeatedScalarShortFormat60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7050">testParseSingleWord60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseSingleWord60088eee47a511ea91e100155d0af7051">testParseSingleWord60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7050">testParseStringFieldUnescape60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseStringFieldUnescape60088eee47a511ea91e100155d0af7051">testParseStringFieldUnescape60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7050">testParseTrailingCommas60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseTrailingCommas60088eee47a511ea91e100155d0af7051">testParseTrailingCommas60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7050">testParseUnicode60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnicode60088eee47a511ea91e100155d0af7051">testParseUnicode60088eee47a511ea91e100155d0af7051</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7050" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7050">testParseUnknownField60088eee47a511ea91e100155d0af7050</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7051" href="#google.protobuf.internal.text_format_test.TextFormatParserTests.testParseUnknownField60088eee47a511ea91e100155d0af7051">testParseUnknownField60088eee47a511ea91e100155d0af7051</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.TokenizerTest" href="#google.protobuf.internal.text_format_test.TokenizerTest">TokenizerTest</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAbstractIntegers" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAbstractIntegers">testConsumeAbstractIntegers</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAndCheckTrailingComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeAndCheckTrailingComment">testConsumeAndCheckTrailingComment</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeBool" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeBool">testConsumeBool</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeByteString" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeByteString">testConsumeByteString</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeComment">testConsumeComment</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeIntegers" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeIntegers">testConsumeIntegers</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeLineComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeLineComment">testConsumeLineComment</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeOctalIntegers" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeOctalIntegers">testConsumeOctalIntegers</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTrailingComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTrailingComment">testConsumeTrailingComment</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoComments" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoComments">testConsumeTwoComments</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoLineComments" href="#google.protobuf.internal.text_format_test.TokenizerTest.testConsumeTwoLineComments">testConsumeTwoLineComments</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testHashinComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testHashinComment">testHashinComment</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testHugeString" href="#google.protobuf.internal.text_format_test.TokenizerTest.testHugeString">testHugeString</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testSimpleTokenCases" href="#google.protobuf.internal.text_format_test.TokenizerTest.testSimpleTokenCases">testSimpleTokenCases</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.TokenizerTest.testSkipComment" href="#google.protobuf.internal.text_format_test.TokenizerTest.testSkipComment">testSkipComment</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest" href="#google.protobuf.internal.text_format_test.WhitespaceTest">WhitespaceTest</a></code></h4>
<ul class="">
<li><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest.setUp" href="#google.protobuf.internal.text_format_test.WhitespaceTest.setUp">setUp</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest.testMessageToString" href="#google.protobuf.internal.text_format_test.WhitespaceTest.testMessageToString">testMessageToString</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintField" href="#google.protobuf.internal.text_format_test.WhitespaceTest.testPrintField">testPrintField</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintFieldValue" href="#google.protobuf.internal.text_format_test.WhitespaceTest.testPrintFieldValue">testPrintFieldValue</a></code></li>
<li><code><a title="google.protobuf.internal.text_format_test.WhitespaceTest.testPrintMessage" href="#google.protobuf.internal.text_format_test.WhitespaceTest.testPrintMessage">testPrintMessage</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.4</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>